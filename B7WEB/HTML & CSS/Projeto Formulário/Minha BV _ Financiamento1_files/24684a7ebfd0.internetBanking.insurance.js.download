!function(){"use strict";function a(a,b){function c(a){l=a,n.put("currentCard",l)}function d(){return n.get("currentCard")}function e(a,b,c){var d=c.map(function(b){return b.isAdditional=!0,b.complement=a,b}),e=[];0===m.length?m.push({contractNumber:b,additionalCards:d}):(e=f(b),0===e.length&&m.push({contractNumber:b,additionalCards:d})),n.put("holderCards",m)}function f(a){var b=n.get("holderCards")||m,c=b.filter(function(b){return a===b.contractNumber});return c.length>0?c[0].additionalCards:[]}function g(a){n.put("allCards",a)}function h(){return n.get("allCards")||[]}function i(){return n.remove("allCards"),n.remove("holderCards"),[]}function j(a){var b=a.listaSeguroCartao.map(function(a){return{serviceDescription:a.descricaoServicoCartao,slug:a.slug,serviceSummary:a.resumoServicoCartao,serviceAbout:a.sobreServicoCartao,serviceTermUrl:a.urlTermoServicoCartao,servicePlans:a.listaPlanos}});return{isAdditional:a.identificadorCartaoAdicional,cardName:a.nomeCompleto,insuranceList:b}}function k(a){var b=a.insuranceList.map(function(a){return{indicadorSituacaoServicoCartao:a.status,codigoServicoCartao:a.serviceCode,descricaoServicoCartao:a.serviceDescription,valorServicoCartao:a.serviceValue}});return{identificadorCartaoAdicional:a.isAdditional,nomeCompleto:a.cardName,listaSeguroCartao:b}}var l={},m=[],n={},o={setCurrentCard:c,setCardsList:g,setAdditionalCards:e,getCurrentCard:d,getCardsList:h,getAdditionalCards:f,resetCardsList:i,APIToViewModel:j,viewModelToAPI:k};return b.get("insuranceCardsCache")||(n=b.createCache("insuranceCardsCache")),o}a.$inject=["$filter","CacheFactory"],angular.module("internetBanking.insurance").factory("insuranceCardsFactory",a)}(),function(){"use strict";function a(a,b,c,d){function e(){return u.get("currentPlanToContract")}function f(a){t=a,u.put("currentPlanToContract",t)}function g(a){s=a,u.put("currentService",s)}function h(){return u.get("currentService")}function i(a){q=a,u.put("currentInsuranceList",q)}function j(a){r=a,u.put("currentTermPdfUrl",r)}function k(){return u.get("currentTermPdfUrl")}function l(){return u.get("currentPlansList")}function m(a){u.put("currentPlansList",a)}function n(){return u.get("currentInsuranceList")}function o(){return q}function p(b){var e=c.filter(function(a){return a.slug===b})[0],f=q.filter(function(a){return e.codes.filter(function(b){return a.serviceCode===b}).length>0});return f=f.map(function(b){var c=b,e=_.filter(d,function(a){return a.code===b.serviceCode})[0];return c.serviceName=e.name,c.isIdealPlan=e.isIdealPlan,c.monthlyDrawing=a("currency")(e.monthlyDrawing,"R$"),c.coverageLimit=e.coverageLimit,c.assistance=e.assistance,c.conditionsPdf=e.conditionsPdf,c}),{serviceDescription:e.about,serviceName:e.name,serviceSlug:e.slug,servicesTypes:f,conditionsPdf:e.conditionsPdf}}var q=[],r="",s={},t={},u={},v={setCurrentInsuranceList:i,getCurrentInsuranceList:n,getInsuranceService:p,getInsurances:o,setCurrentActivePlansList:m,getCurrentActivePlansList:l,setCurrentTermPdfUrl:j,getCurrentTermPdfUrl:k,setCurrentService:g,getCurrentService:h,setCurrentPlanToContract:f,getCurrentPlanToContract:e};return b.get("insuranceServicesCache")||(u=b.createCache("insuranceServicesCache")),v}a.$inject=["$filter","CacheFactory","insuranceCardsServicesList","insuranceCardsTypes"],angular.module("internetBanking.insurance").factory("insuranceServicesFactory",a)}(),function(){"use strict";function a(a,b,c,d){function e(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=d.defer(),i={method:"GET",cache:!1,url:a.backEnd+b.INSURANCE_CARDS_LIST+"/"+e};return c(i).then(f).catch(g),h.promise}return{getInsuranceCard:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.insurance").service("insuranceCardsService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=d.defer(),i={method:"POST",cache:!1,url:a.backEnd+b.INSURANCE_SEND_EMAIL_CONFIRMATION,data:e};return c(i).then(f).catch(g),h.promise}return{postConfirmationEmail:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.insurance").service("insuranceConfirmationEmail",a)}(),function(){"use strict";function a(a,b,c,d){function e(){function e(a){g.resolve(a)}function f(a){g.reject(a)}var g=d.defer(),h={method:"GET",cache:!1,url:a.backEnd+b.INSURNCE_AUTO_GET_DADOS_LIMPOS};return c(h).then(e).catch(f),g.promise}function f(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=d.defer(),i={method:"POST",cache:!1,url:a.backEnd+b.INSURNCE_AUTO_POST_CRM,data:e};return c(i).then(f).catch(g),h.promise}return{sendForm:f,getCleanUserContactInfo:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.insurance").service("insuranceAutoService",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){f.customPageView({pageName:"BV|AL|financiamento|seguros",url:"/seguros"}),n.view={showSiderBarCustom:h()},a.$on("scrollTop",function(){angular.element(".main_content__inner, .main_wrap").scrollTop(0)})}function h(){return i()&&m()}function i(){return!(!b.current.hasOwnProperty("data")||!b.current.data.hasOwnProperty("hideSidebar"))&&b.current.data.hideSidebar}function j(a){switch(a){case"cards":b.go(c.CARDS_LIST);break;case"auto":b.go(c.AUTO_CONTACT)}}function k(){return e.getProductsListCached().filter(function(a){return 15===a.productCode&&3!==a.paymentSituationCode}).length>0}function l(){return e.getProductsListCached().filter(function(a){return 12===a.productCode}).length>0}function m(){return!(!b.current.hasOwnProperty("data")||!b.current.data.hasOwnProperty("hasSideBarCustom"))&&b.current.data.hasSideBarCustom}var n=this;n.hasValidCards=k,n.hasFinancingAuto=l,n.redirectTo=j,n.hasSideBarNavigation=i,n.hasSideBarCustom=m,n.breadcrumbList=[{value:"Início",route:d.HOME},{value:"Seguros"}],g()}a.$inject=["$rootScope","$state","insuranceRoutes","commonRoutes","userInfoService","dataLayerFactory"],angular.module("internetBanking.insurance").controller("InsuranceController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){var b=f.getCardsListCached(),g=e.getCardsList();l.commonRoutes=c,l.insuranceRoutes=d,l.cards=b,l.goToInsuranceList=k,l.cardName=f.user.nameUser||"Nome do cliente",l.loadingPage=!0,l.watchEvent=!1,0===g.length?j(b):(l.cards=g,l.loadingPage=!1),1===l.cards.length&&l.goToInsuranceList(l.cards[0]),a.$broadcast("scrollTop")}function j(a){var b=[];a.map(function(c,d){function f(f){var h=[],i=[];b.push(c),f.data&&f.data.length>0&&(h=g.translateAdditionalCardToView(f.data),e.setAdditionalCards(j,c.contractNumber,h),i=e.getAdditionalCards(c.contractNumber),i.map(function(a){b.push(a)})),_.findLastIndex(a)===d&&(e.setCardsList(b),l.cards=e.getCardsList(),l.loadingPage=!1)}function i(){return l.loadingPage=!1,!1}var j=c.complement;h.listAdditionalCards(c.contractNumber).then(f).catch(i)})}function k(a){var c={contractNumber:a.contractNumber,cardName:l.cardName,complement:a.complement};b.go(d.CARDS_PRODUCTS,{contractNumber:c.contractNumber}),e.setCurrentCard(c)}var l=this;i()}a.$inject=["$rootScope","$state","commonRoutes","insuranceRoutes","insuranceCardsFactory","userInfoService","additionalCardsFactory","additionalCardsService"],angular.module("internetBanking.insurance").controller("CardsController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){o.lastFourDigits=c.contractNumber,o.insuranceRoutes=d,o.goToContract=m,o.currentCard=g.getCurrentCard(),o.card={},o.servicesList=[],o.copyServicesList=[],o.loadingPage=!0,o.watchEvent=!1,o.isActive=i,o.isActiveItem=j,o.toggleItem=k,o.activeTab=0,o.activeItem=-1,o.showTabs=!1,o.showInsuranceList=l,o.view={tabs:[{name:"Novos Seguros"},{name:"Seguros Contratados"}]},n(o.lastFourDigits),a.$broadcast("scrollTop")}function i(a){return a===o.activeTab}function j(a){return a===o.activeItem}function k(a){o.activeItem=o.activeItem===a?-1:a}function l(a){var b=[],c=[],d=[],e={contractedList:b,noContractedList:c};o.copyServicesList.forEach(function(a,b){d=a.servicePlans.filter(function(a){return 5===a.indicadorSituacaoServicoCartao}),d.length>0?(a.status=5,e.contractedList.push(a)):(a.status=6,e.noContractedList.push(a))}),console.log("Factoring insurances object : ",e),o.showTabs=e.contractedList.length>0&&e.noContractedList.length>0||!1,o.showTabs?o.servicesList=1===a?e.contractedList:e.noContractedList:(e.contractedList.length>0&&0===e.noContractedList.length?a=1:0===e.contractedList.length&&e.noContractedList.length>0&&(a=0),o.servicesList=1===a?e.contractedList:e.noContractedList),o.activeTab=a,o.activeItem=-1}function m(a){var c=o.copyServicesList.filter(function(b){return b.slug===a})[0],e=5===c.status,g=6===c.status,h="assistencia"===a.split("-")[0],i={error:d.CONTRACT_ERROR,details:d.CONTRACT_DETAILS,detailsAxa:d.CONTRACT_AXA_DETAILS,info:d.CONTRACT_INFO,infoAxa:d.CONTRACT_AXA_INFO},j=i.error;console.log("Setting current service on factory..."),f.setCurrentService(c),e?(j=h?i.detailsAxa:i.details,console.log("Setting contract route to "+j)):g&&(j=h?i.infoAxa:i.info,console.log("Setting contract route to "+j)),console.log("Setting current active service plans..."),f.setCurrentActivePlansList(c.servicePlans),console.log("Setting current term pdf url..."),f.setCurrentTermPdfUrl(c.serviceTermUrl),b.go(j,{contractNumber:o.lastFourDigits,insuranceServiceName:c.serviceDescription,insuranceServiceSlug:c.slug})}function n(a){function c(a){var c=g.APIToViewModel(a.data),e=o.currentCard;return o.card=c,e.cardName=c.cardName,console.log("Setting current card..."),g.setCurrentCard(e),console.log("Setting current insurannce list..."),f.setCurrentInsuranceList(c.insuranceList),i=c.insuranceList,j=!0,j?(o.copyServicesList=i,l(0)):b.go(d.CONTRACT_ERROR,{contractNumber:o.lastFourDigits,insuranceServiceSlug:i[0].slug}),o.loadingPage=!1,c}function h(a){return o.loadingPage=!1,a}var i=[],j=!1;i&&e.getInsuranceCard(a).then(c).catch(h)}var o=this;h()}a.$inject=["$rootScope","$state","$stateParams","insuranceRoutes","insuranceCardsService","insuranceServicesFactory","insuranceCardsFactory"],angular.module("internetBanking.insurance").controller("CardsProductsController",a)}(),function(){"use strict";function a(a,b){function c(){d.breadcrumbList=[{value:"Início",route:a.HOME},{value:"Seguros",route:b.HOME},{value:"Cartões"}]}var d=this;c()}a.$inject=["commonRoutes","insuranceRoutes"],angular.module("internetBanking.insurance").controller("SidebarCardsController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){g.customPageView({pageName:"BV|AL|financiamento|seguros|seguo-auto|solicitar-cotacao",url:"/seguros/auto"}),f.getCleanUserContactInfo().then(function(a){l.view.contactForm={name:a.data.nome,email:a.data.email,phone:a.data.celular},setTimeout(function(){c.document.getElementById("input-phone-mobile-update").click()},500),l.loadingPage=!1}),a.$broadcast("scrollTop")}function i(){b.go(d.HOME)}function j(){var a={email:l.view.contactForm.email,celular:l.view.contactForm.phone,isWhatsApp:""};l.loadingPage=!0,f.sendForm(a).then(function(a){a.data.success&&(l.modalStatus.open=!0,g.customPageView({pageName:"BV|AL|financiamento|seguros|seguo-auto|solicitar-cotacao|sucesso",url:"/seguros/auto"})),l.loadingPage=!1})}function k(){l.modalStatus={open:!1},b.go(e.HOME)}var l=this;l.loadingPage=!0,l.watchEvent=!0,l.view={contactForm:{phone:null,email:null,name:null}},l.modalStatus={open:!1},l.goBack=i,l.sendData=j,l.closeModal=k,h()}a.$inject=["$rootScope","$state","$window","insuranceRoutes","commonRoutes","insuranceAutoService","dataLayerFactory"],angular.module("internetBanking.insurance").controller("AutoController",a)}(),function(){"use strict";function a(a,b){function c(){d.breadcrumbList=[{value:"Início",route:a.HOME},{value:"Seguros",route:b.HOME},{value:"Seguro Auto"}]}var d=this;c()}a.$inject=["commonRoutes","insuranceRoutes"],angular.module("internetBanking.insurance").controller("SidebarAutoController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){function k(){var b=d("translate"),k=c.insuranceServiceSlug,p=k.replace(/seguro|protecao|financeira|premiada|-/gi,"").toUpperCase();i.getInsuranceService(k);o.insuranceRoutes=h,o.insuranceTemplateUrls=g,o.insuranceServiceSlug=k,o.insuranceServiceSlugSplit=k.split("-")[0],o.plans=i.getCurrentActivePlansList(),console.log("vm.plans dentro de contract-details => ",o.plans),o.activePlan=o.plans.filter(function(a){return 5===a.indicadorSituacaoServicoCartao})[0],o.currentCard=j.getCurrentCard(),o.currentInsuranceCompany=p,o.view={modal:{claimNotice:{open:!1},centralRelationship:{open:!1}}},o.openModal=l,o.closeModal=m,o.cancelContract=n,o.watchEvent=!1,o.loadingPage=!0,f.customPageView({pageName:b(e[k].details)}),a.$on("$viewContentLoaded",function(){o.loadingPage=!1}),a.$broadcast("scrollTop")}function l(a){o.view.modal[a].open=!0}function m(a){o.view.modal[a].open=!1}function n(){b.go(h.CONTRACT_CANCEL,{insuranceServiceSlug:c.insuranceServiceSlug,insuranceServiceCode:o.activePlan.codigoServicoCartao},{reload:h.CONTRACT_CANCEL})}var o=this;k()}a.$inject=["$rootScope","$state","$stateParams","$filter","insurancePageNames","dataLayerFactory","insuranceTemplateUrls","insuranceRoutes","insuranceServicesFactory","insuranceCardsFactory"],angular.module("internetBanking.insurance").controller("ContractDetailsController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){var b=d("translate"),e=c.insuranceServiceSlug,f=c.insuranceServiceName,g=c.contractNumber;c.servicePlans;w.insuranceRoutes=l,w.insuranceServiceSlug=e,w.insuranceServiceName=f,w.currentContractNumber=g,w.insuranceServiceSlugSplit=e.split("-")[0],w.plans=m.getCurrentActivePlansList(),console.log("plans => ",w.plans),w.conditionsPdf=m.getCurrentTermPdfUrl(),console.log("TERMO PDF => ",w.conditionsPdf),w.activeTab=w.plans.length>1?1:0,w.currentCard=n.getCurrentCard(),w.activePlan=w.plans[w.activeTab],console.log("Active plan => ",w.plans," / active tab => ",w.activeTab," value => ",w.activePlan.value),w.view={tabs:w.plans},console.log("vm.view => ",w.view),w.isActive=u,w.showPlan=v,w.goToTerms=r,w.watchEvent=!1,w.loadingPage=!0;a.$on("$viewContentLoaded",function(){w.loadingPage=!1}),h.customPageView({pageName:b(k[e].info)}),a.$broadcast("scrollTop")}function r(a){var d=x(k[a].authentication),g=s(a),h={successRoute:l.CONTRACT_SUCCESS,prefixEndpoint:i.INSURANCE_CARDS_CONTRACT,kindTokenTransaction:g,pageName:d,dataTransaction:{solicitarSeguroCartao:{ultimosQuatroDigitosCartao:w.currentContractNumber,codigoServicoCartao:w.activePlan.codigoServicoCartao}},cardName:w.currentCard.cardName.trim(),contractNumber:c.contractNumber};f.setDataTransaction(h),t("start"),j.getUserCPF().then(function(d){var f={cpfCnpj:d.name,codes:[17]},g=e.getToken();p.post(f,g).then(function(){t("stop"),b.go(l.AUTHENTICATION_TOKEN,{contractNumber:c.contractNumber,insuranceServiceCode:w.activePlan.codigoServicoCartao,insuranceServiceSlug:a},{reload:l.AUTHENTICATION_TOKEN})}).catch(function(){t("stop"),openModal({contract:!0})})}).catch(function(a){t("stop"),console.log("Erro ao obter dados do usuario logado: ",a)}),m.setCurrentPlanToContract(w.activePlan)}function s(a){var b=o[0].slug;return[{slug:o[1].slug,tokenTransaction:"CONTRATACAO_SEGURO_CARTAO_SPP"},{slug:b,tokenTransaction:"CONTRATACAO_SEGURO_CARTAO_SPF"},{slug:o[2].slug,tokenTransaction:"CONTRATACAO_SEGURO_CARTAO_AXAR"},{slug:o[3].slug,tokenTransaction:"CONTRATACAO_SEGURO_CARTAO_AXAP"},{slug:o[4].slug,tokenTransaction:"CONTRATACAO_SEGURO_CARTAO_AXAF"}].filter(function(b){return b.slug===a})[0].tokenTransaction}function t(b){var c=g.SPINNING_STOP,d=g.SPINNING_START;a.$emit("start"===b?d:c,{target:"loaderContractTerms"})}function u(a){return a===w.activeTab}function v(a){w.activeTab=a,w.activePlan=w.plans[a],m.setCurrentPlanToContract(w.activePlan),console.log("Current Plan to Contract => ",m.getCurrentPlanToContract())}var w=this,x=d("translate");q()}a.$inject=["$rootScope","$state","$stateParams","$filter","authIdentifyFactory","authTokenFactory","commonEvents","dataLayerFactory","endPoints","userService","insurancePageNames","insuranceRoutes","insuranceServicesFactory","insuranceCardsFactory","insuranceCardsServicesList","userContractService"],angular.module("internetBanking.insurance").controller("ContractInfoController",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){var g=c("translate"),i=b.insuranceServiceSlug;h.insuranceRoutes=f,d.customPageView({pageName:g(e[i].error)}),a.$broadcast("scrollTop")}var h=this;g()}a.$inject=["$rootScope","$stateParams","$filter","dataLayerFactory","insurancePageNames","insuranceRoutes"],angular.module("internetBanking.insurance").controller("ContractErrorController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(){var b=c.insuranceServiceSlug;w.insuranceRoutes=l,w.continueContract=v,w.insuranceTermsForm={},w.readUseTerms=!1,w.acceptTerms=!1,w.insuranceService=o.getInsuranceService(b),w.currentCard=p.getCurrentCard(),w.useTermsTemplateUrl=s(b),h.customPageView({pageName:x(k[b].terms)}),a.$broadcast("scrollTop")}function s(a){var b="";switch(a){case"protecao-premiada-mapfre":b=m.CONTRACT_TERMS_MAPFRE;break;case"protecao-financeira-cardif":case"assistencia-domiciliar-axa":case"assistencia-domiciliar-pet-axa":case"assistencia-funeral-axa":b=m.CONTRACT_TERMS_CARDIF}return b}function t(a){var b=n[0].slug;return[{slug:n[1].slug,tokenTransaction:"CONTRATACAO_SEGURO_CARTAO_SPP"},{slug:b,tokenTransaction:"CONTRATACAO_SEGURO_CARTAO_SPF"},{slug:n[2].slug,tokenTransaction:"CONTRATACAO_SEGURO_CARTAO_AXAR"},{slug:n[3].slug,tokenTransaction:"CONTRATACAO_SEGURO_CARTAO_AXAP"},{slug:n[4].slug,tokenTransaction:"CONTRATACAO_SEGURO_CARTAO_AXAF"}].filter(function(b){return b.slug===a})[0].tokenTransaction}function u(b){var c=e.SPINNING_STOP,d=e.SPINNING_START;a.$emit("start"===b?d:c,{target:"loaderContractTerms"})}function v(a){var d=x(k[a].authentication),e=t(a),h={successRoute:l.CONTRACT_SUCCESS,prefixEndpoint:f.INSURANCE_CARDS_CONTRACT,kindTokenTransaction:e,pageName:d,dataTransaction:{solicitarSeguroCartao:{ultimosQuatroDigitosCartao:c.contractNumber,codigoServicoCartao:c.insuranceServiceCode}},cardName:w.currentCard.cardName.trim(),contractNumber:c.contractNumber};q.setDataTransaction(h),u("start"),i.getUserCPF().then(function(d){var e={cpfCnpj:d.name,codes:[17]},f=g.getToken();j.post(e,f).then(function(){u("stop"),b.go(l.AUTHENTICATION_TOKEN,{contractNumber:c.contractNumber,insuranceServiceCode:c.insuranceServiceCode,insuranceServiceSlug:a},{reload:l.AUTHENTICATION_TOKEN})}).catch(function(){u("stop"),openModal({contract:!0})})}).catch(function(a){u("stop"),console.log("Erro ao obter dados do usuario logado: ",a)})}var w=this,x=d("translate");r()}a.$inject=["$rootScope","$state","$stateParams","$filter","commonEvents","endPoints","authIdentifyFactory","dataLayerFactory","userService","userContractService","insurancePageNames","insuranceRoutes","insuranceTemplateUrls","insuranceCardsServicesList","insuranceServicesFactory","insuranceCardsFactory","authTokenFactory"],angular.module("internetBanking.insurance").controller("ContractTermsController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){function l(){var b=c("translate");o.user=e.getUserCached(),o.emailConfirmationForm={},o.insuranceRoutes=g,o.insuranceTemplateUrls=h,o.view={modal:{centralRelationship:{open:!1},emailConfirmation:{open:!1},emailError:{open:!1}}},o.currentService=i.getCurrentService(),console.log("Curent Service ",o.currentService),o.openModal=m;var k=o.currentService.slug;o.insuranceService=i.getInsuranceService(k),console.log("Insurance Service => ",o.insuranceService),o.currentInsuranceCompany=k.replace(/seguro|protecao|financeira|premiada|-/gi,"").toUpperCase(),o.currentInsuranceName=o.currentService.serviceDescription;var l=i.getCurrentPlanToContract();console.log("Service Contracted ",l),l.serviceValue=c("currency")(l.serviceValue,"R$"),o.insuranceServiceSlugSplit=k.split("-")[0],d.customPageView({pageName:b(f[k].success)}),j.resetCardsList();var p={visitorID:o.user.cpfCnpj,contactName:e.user.nameUser,emailAddress:o.user.email,tipoSeguro:o.currentInsuranceName,tipoPlano:l.nome};o.user.email?n(p):(o.view.modal.emailConfirmation.open=!0,o.sendEmailConfirmationModal=function(){p.emailAddress=o.emailConfirmationForm.emailConfirm,n(p),o.view.modal.emailConfirmation.open=!1}),a.$broadcast("scrollTop")}function m(a){o.view.modal[a].open=!0}function n(a){function b(a){}function c(a){o.loadingPage=!1}k.postConfirmationEmail(a).then(b).catch(c)}var o=this;l()}a.$inject=["$rootScope","$stateParams","$filter","dataLayerFactory","userInfoService","insurancePageNames","insuranceRoutes","insuranceTemplateUrls","insuranceServicesFactory","insuranceCardsFactory","insuranceConfirmationEmail"],angular.module("internetBanking.insurance").controller("ContractSuccessController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l){function m(){var b=c.insuranceServiceSlug,d=j.getCurrentService();p.insuranceRoutes=h,p.insuranceServiceSlugSplit=b.split("-")[0],p.currentCard=k.getCurrentCard(),p.insuranceService=j.getCurrentService(),console.log("current service => ",p.insuranceService),p.activePlan=d.servicePlans.filter(function(a){return 5===a.indicadorSituacaoServicoCartao})[0],console.log("Active plan => ",p.activePlan),p.cancelContract=o,f.customPageView({pageName:q(g[b].cancel)}),a.$broadcast("scrollTop")}function n(a){var b=i[0].slug;return[{slug:i[1].slug,tokenTransaction:"CANCELAMENTO_SEGURO_CARTAO_SPP"},{slug:b,tokenTransaction:"CANCELAMENTO_SEGURO_CARTAO_SPF"},{slug:i[2].slug,tokenTransaction:"CANCELAMENTO_SEGURO_CARTAO_AXAR"},{slug:i[3].slug,tokenTransaction:"CANCELAMENTO_SEGURO_CARTAO_AXAP"},{slug:i[4].slug,tokenTransaction:"CANCELAMENTO_SEGURO_CARTAO_AXAF"}].filter(function(b){return b.slug===a})[0].tokenTransaction}function o(a){var d=q(g[a].authenticationCancel),f={successRoute:h.CONTRACT_CANCEL_SUCCESS,prefixEndpoint:e.INSURANCE_CARDS_CANCEL,kindTokenTransaction:n(a),pageName:d,dataTransaction:{solicitarSeguroCartao:{ultimosQuatroDigitosCartao:c.contractNumber,codigoServicoCartao:c.insuranceServiceCode}},cardName:p.currentCard.cardName.trim(),contractNumber:c.contractNumber};l.setDataTransaction(f),b.go(h.AUTHENTICATION_TOKEN_CANCEL,{contractNumber:c.contractNumber,insuranceServiceCode:c.insuranceServiceCode,insuranceServiceSlug:a},{reload:h.AUTHENTICATION_TOKEN_CANCEL})}var p=this,q=d("translate");m()}a.$inject=["$rootScope","$state","$stateParams","$filter","endPoints","dataLayerFactory","insurancePageNames","insuranceRoutes","insuranceCardsServicesList","insuranceServicesFactory","insuranceCardsFactory","authTokenFactory"],angular.module("internetBanking.insurance").controller("ContractCancelController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){var i=b.insuranceServiceSlug,k=c("translate");j.insuranceRoutes=f,j.insuranceService=g.getInsuranceService(i),j.insuranceServiceSlug=i,j.insuranceServiceSlugSplit=i.split("-")[0],d.customPageView({pageName:k(e[i].cancelSuccess)}),h.resetCardsList(),a.$broadcast("scrollTop")}var j=this;i()}a.$inject=["$rootScope","$stateParams","$filter","dataLayerFactory","insurancePageNames","insuranceRoutes","insuranceServicesFactory","insuranceCardsFactory"],angular.module("internetBanking.insurance").controller("ContractCancelSuccessController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){l.currentInsuranceName=b.insuranceServiceName,l.currentCard=h.getCurrentCard(),l.insuranceRoutes=f,l.insuranceServiceSlug=b.insuranceServiceSlug,l.activeSlug=b.insuranceServiceSlug,l.insuranceList=j(),console.log("Insurance List dentro do sidebar-contract => ",l.insuranceList),l.currentService=g.getCurrentService(),console.log("Current Sercice => ",l.currentService),l.onChangeSidebarItem=k,l.breadcrumbList=[{value:"Início",route:e.HOME},{value:"Seguros Cartões",route:f.CARDS_LIST},{value:l.currentInsuranceName}],l.sidebarType="list",c.$on("$stateChangeStart",function(a,b,c,d,e,f){_.isEqual(b,d)||(-1!==b.name.indexOf("Details")||-1!==b.name.indexOf("Info")?l.sidebarType="list":l.sidebarType="internal")})}function j(){var a=g.getCurrentInsuranceList();return a=a.filter(function(a){return 0!==a.status}),a=a.map(function(a){return l.activeSlug===a.slug?a.isActive=!0:a.isActive=!1,a})}function k(b){console.log("****sidebar item => ",b.data),g.setCurrentActivePlansList(b.data.servicePlans),g.setCurrentService(b.data),g.setCurrentTermPdfUrl(b.data.serviceTermUrl);var c="assistencia"===b.data.slug.split("-")[0]||!1,d={error:f.CONTRACT_ERROR,details:f.CONTRACT_DETAILS,detailsAxa:f.CONTRACT_AXA_DETAILS,info:f.CONTRACT_INFO,infoAxa:f.CONTRACT_AXA_INFO},e=d.error;5===b.data.status?e=c?d.detailsAxa:d.details:6===b.data.status&&(e=c?d.infoAxa:d.info),a.go(e,{contractNumber:l.currentCard.contractNumber,insuranceServiceName:b.data.serviceDescription,insuranceServiceSlug:b.data.slug},{reload:e})}var l=this;i()}a.$inject=["$state","$stateParams","$rootScope","$timeout","commonRoutes","insuranceRoutes","insuranceServicesFactory","insuranceCardsFactory"],angular.module("internetBanking.insurance").controller("SidebarContractController",a)}();