!function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){console.log("SubscribePassword:init()")}function q(a){var b=c.document.getElementById(a);J.data.password="",J.data.confirmPassword="",b.focus()}function r(a){s(a,!0)}function s(a,b){"string"!=typeof J.data[J.inputFocused]&&(J.data[J.inputFocused]="");var c=J.data[J.inputFocused].trim(),d=angular.element(a.target),e=d.find("span").text().toLowerCase().trim();if("limpar"===e)J.data[J.inputFocused]="";else if("delete"===d.attr("data-action"))J.data[J.inputFocused]=c.substring(0,c.length-1);else{if(c.length>=8)return!1;b||(J.data[J.inputFocused]=c+e)}if(J.formSubmitted){var f=C();J.btnContinueEnabled=!!f}return e}function t(a){var b=angular.element(a.target).attr("name"),c=angular.element(".fixed-virtual-keyboard"),d=angular.element("#subscribe-password");J.inputFocused="password"==b?"password":"confirmPassword",c.removeClass("--show"),c.addClass("--hide"),c.hasClass("--min-height")&&(c.removeClass("--min-height"),d.addClass("--virtual-keyboard-showed")),setTimeout(function(){c.removeClass("--hide"),c.addClass("--show")},200)}function u(){a.go(g.LOGIN)}function v(a){A(!1),J.formSubmitted=!0;var b=J.data.passwordValidation.notLowerThanSix,c=J.data.passwordValidation.notIsSequence,d=C();if(b&&c&&d){w(x,{nuCpfCnpj:M,codigosTermoUso:[1,2]})}else J.btnContinueEnabled=!1}function w(a,b,c){function d(d){K.setPublicKey(d.data.key);var e={payload:K.encrypt(JSON.stringify(b))};a(e,c)}function e(a){G("error")}k.getPublicKey().then(d).catch(e)}function x(a){function b(){y()}function c(){G("contract")}o.postEncrypted(a).then(b).catch(c)}function y(){E(),H();var a={cpf:M,telefone:"",email:"",senha:J.data.password,tipoCadastro:"CLIENTE_FINANCIAMENTO",tipoOperacao:m.get("type"),tipo:l.getTypeTokenSend(),tokenOtp:l.getTokenOtp()};console.log("PAYLOAD FINANCIAMENTO: ",a),D(z,a)}function z(b,c){function d(){m.set("user",J.data);var b=n.SUCCESS_RESET_PASSWORD;"cadastro"==L&&(b=n.SUCCESS_SUBSCRIBE),a.go(b)}function f(a){var b=angular.element("#password-rule-error-backend").find("bv-svg-icon img");J.btnContinueEnabled=!1,J.data.passwordValidation.notLowerThanSix=!1,J.data.passwordValidation.notIsSequence=!1,b.attr("src","dist/images/white-error.svg");try{var c={pageName:"BV|AA|minha-bv|"+L+"|financiamento|nova-senha|senha-fora-padrao",url:"/nova-senha",errorCode:a.status,nameErrorCode:a.status>=500?"sistema_indisponivel":"senha_fora_do_padrao"};c.pageName+=m.get("isCNPJ")?"|cnpj":"|cpf",e.customPageViewV3(c)}catch(d){console.error("Ocorreu um erro para disparar DTM V3. ",d)}G("password")}j.register(b,c).then(d).catch(f).finally(function(){F()})}function A(a){var c=angular.element("#password-rule-greather-than").find("bv-svg-icon img"),d=angular.element("#password-rule-seq").find("bv-svg-icon img"),e=angular.element("#password-rule-error-backend").find("bv-svg-icon img"),f=J.data.password.trim()||"",g=J.data.confirmPassword.trim()||"",i=h.isEqualRepeatingNumbers(f),j=h.isIncreasingNumbers(f),k=h.isDecreasingNumbers(f);return f.length>=6&&f.length<=8&&g.length>=6&&g.length<=8?(J.data.passwordValidation.notLowerThanSix=!0,c.attr("src","dist/images/white-check.svg")):(c.attr("src","dist/images/white-error.svg"),J.data.passwordValidation.notLowerThanSix=!1),f.length>=6&&f.length<=8&&g.length>=6&&g.length<=8&&!i&&!j&&!k?(J.data.passwordValidation.notIsSequence=!0,d.attr("src","dist/images/white-check.svg")):(d.attr("src","dist/images/white-error.svg"),J.data.passwordValidation.notIsSequence=!1),a&&(c.attr("src","dist/images/white-error.svg"),J.data.passwordValidation.notLowerThanSix=!1,d.attr("src","dist/images/white-error.svg"),J.data.passwordValidation.notIsSequence=!1),c.parent().removeClass("-hide"),c.parent().addClass("-show"),d.parent().removeClass("-hide"),d.parent().addClass("-show"),e.parent().removeClass("-hide"),e.parent().addClass("-show"),setTimeout(function(){b.$digest()},10),!1}function B(a,c){var d=angular.element("input[name="+c+"]"),e=a.currentTarget.querySelector("bv-svg-icon img"),f="password",g="dist/images/unsee-disabled.svg";"password"==d.attr("type")&&(f="tel",g="dist/images/see.svg"),d.attr("type",f),e.src=g,setTimeout(function(){b.$digest()},10)}function C(){return angular.equals(J.data.password,J.data.confirmPassword)&&""!=J.data.confirmPassword?(J.data.passwordValidation.isEquals=!0,!0):(J.data.passwordValidation.isEquals=!1,!1)}function D(a,b){i.execute("subscribe").then(function(c){w(a,b,c)}).catch(function(){F()})}function E(){b.$emit(d.SPINNING_START,{target:"login-spinner"})}function F(){b.$emit(d.SPINNING_STOP,{target:"login-spinner"})}function G(a){J.modalStatus.open=!0,J.modalStatus[a]=!0}function H(){J.modalStatus={open:!1,error:!1,contract:!1,attendance:!1,password:!1,token:!1}}function I(){var a="BV|AA|minha-bv|"+L+"|financiamento|nova-senha";"0"==m.get("productClient")&&(a="BV|AA|minha-bv|"+L+"|sem-produto|nova-senha"),a+=m.get("isCNPJ")?"|cnpj":"|cpf";try{var b={pageName:a,url:"/nova-senha",errorCode:"",nameErrorCode:""};e.customPageViewV3(b)}catch(c){console.error("Ocorreu um erro para disparar DTM V3. ",c)}}m.get("cpfCnpj")||a.go(g.LOGIN);var J=this,K=new JSEncrypt,L="RESET"==m.get("type")?"esqueci-senha":"cadastro",M=m.get("cpfCnpj").replace(/\D/g,"");J.data={password:"",confirmPassword:"",passwordValidation:{notLowerThanSix:!1,notIsSequence:!1,isEquals:!1}},J.formSubmitted=!1,J.btnContinueEnabled=!0,J.showPage=!1,J.disablePassword=!1,J.disableConfirmPassword=!1,J.phonePattern=f.PHONE,J.modalStatus={open:!1,error:!1,contract:!1,attendance:!1,password:!1,token:!1},J.statusInput={password:{sequential:!1},confirmPassword:{equals:!1}},J.inputFocused=void 0,J.submitStep=v,J.closeModal=H,J.togglePassword=B,J.onBackToLogin=u,J.onCurrentInputFocused=t,J.onKeyPressVirtualKeyboard=s,J.onKeypress=r,J.setFocusField=q,p(),I()}a.$inject=["$state","$rootScope","$window","commonEvents","dataLayerFactory","formPatterns","loginRoutes","mathOperationsFactory","recaptchaService","registerPasswordService","rsaPublicKeyService","subscribeFactory","subscribeService","subscribeRoutes","userContractService"],angular.module("internetBanking.subscribe").controller("SubscribePassword",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l){function m(){console.log("SubscribeCreditcard:init()")}function n(a){function b(a){y.data.cc.digits=a}y.data.cc.digits="",y.vkCCDisabled=!0,l.open(c,[4],null,a).then(b).finally(function(){y.vkCCDisabled=!1,o()})}function o(){if(""==y.data.cc.digits||""==y.data.cc.password)return void(y.view.formValidate=!1);y.view.formValidate=!0}function p(a){function b(a){y.data.cc.password=a}y.data.cc.password="",y.vkPassDisabled=!0,l.open(c,[4],null,a).then(b).finally(function(){y.vkPassDisabled=!1,o()})}function q(){_.isEmpty(y.data.cc.digits)||_.isEmpty(y.data.cc.password)?t("error"):r()}function r(){h.execute("creditcard").then(function(a){s(a)}).catch(function(){w()})}function s(a){function c(c){function e(a){k.uid=a.headers().cadastroibbvuid;var c=j.CREDITCARD_TYPE_NEW_PASSWORD_RESET_PASSWORD;"cadastro"==A&&(c=j.CREDITCARD_TYPE_NEW_PASSWORD_SUBSCRIBE),b.go(c)}function g(a){w();try{var b={pageName:"BV|AA|minha-bv|"+A+"|cartao|dados-cartao|dados-invalidos",url:"/cartao",errorCode:a.status,nameErrorCode:"dados_cartao_invalido"};f.customPageViewV3(b)}catch(c){console.error("Ocorreu um erro para disparar DTM V3. ",a)}t("error")}var h=new JSEncrypt;h.setPublicKey(c.data.key),k.set("creditcard",{lastDigits:y.data.cc.digits,password:y.data.cc.password});var i={cpfCnpj:z,statusOnboard:k.get("typeUser"),ultimosQuatroDigitosCartao:y.data.cc.digits,senha:y.data.cc.password},l={payload:h.encrypt(JSON.stringify(i))};d.post(l,a).then(e).catch(g)}v(),i.getPublicKey().then(c).catch(function(a){console.error("Ocorreu um erro ao obter a chave publica para o cartao de credito. ",a)})}function t(a){y.modalStatus.open=!0,y.modalStatus[a]=!0}function u(){y.modalStatus={open:!1,error:!1,contract:!1,attendance:!1,password:!1,token:!1}}function v(){a.$emit(e.SPINNING_START,{target:"login-spinner"})}function w(){a.$emit(e.SPINNING_STOP,{target:"login-spinner"})}function x(){var a="BV|AA|minha-bv|"+A+"|cartao|dados-cartao|cpf";"0"==k.get("productClient")&&(a="BV|AA|minha-bv|"+A+"|sem-produto|dados-cartao|cpf");try{var b={pageName:a,url:"/cartao",errorCode:"",nameErrorCode:""};f.customPageViewV3(b)}catch(c){console.error("Ocorreu um erro para disparar DTM V3. ",c)}}k.get("cpfCnpj")||b.go(g.LOGIN);var y=this,z=k.get("cpfCnpj").replace(/\D/g,""),A="RESET"==k.get("type")?"esqueci-senha":"cadastro";y.data={cc:{digits:"",password:""}},y.view={formValidate:!1},y.vkCCDisabled=!1,y.vkPassDisabled=!1,y.modalStatus={open:!1,error:!1,contract:!1,attendance:!1,password:!1,token:!1},y.openVKCC=n,y.openVKPass=p,y.submitStep=q,y.closeModal=u,m(),x()}a.$inject=["$rootScope","$state","$scope","authCCService","commonEvents","dataLayerFactory","loginRoutes","recaptchaService","rsaPublicKeyService","subscribeRoutes","subscribeService","VirtualKeyboard"],angular.module("internetBanking.subscribe").controller("SubscribeCreditcard",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){console.log("SubscribePasswordCreditcard:init()")}function r(a){var b=c.document.getElementById(a);K.data.password="",K.data.confirmPassword="",b.focus()}function s(a){t(a,!0)}function t(a,b){"string"!=typeof K.data[K.inputFocused]&&(K.data[K.inputFocused]="");var c=K.data[K.inputFocused].trim(),d=angular.element(a.target),e=d.find("span").text().toLowerCase().trim();if("limpar"===e)K.data[K.inputFocused]="";else if("delete"===d.attr("data-action"))K.data[K.inputFocused]=c.substring(0,c.length-1);else{if(c.length>=8)return!1;b||(K.data[K.inputFocused]=c+e)}if(K.formSubmitted){var f=D();K.btnContinueEnabled=!!f}return e}function u(a){var b=angular.element(a.target).attr("name"),c=angular.element(".fixed-virtual-keyboard"),d=angular.element("#subscribe-password");K.inputFocused="password"==b?"password":"confirmPassword",c.removeClass("--show"),c.addClass("--hide"),c.hasClass("--min-height")&&(c.removeClass("--min-height"),d.addClass("--virtual-keyboard-showed")),setTimeout(function(){c.removeClass("--hide"),c.addClass("--show")},200)}function v(){a.go(h.LOGIN)}function w(a){B(!1),K.formSubmitted=!0;var b=K.data.passwordValidation.notLowerThanSix,c=K.data.passwordValidation.notIsSequence,d=D();if(b&&c&&d){x(y,{nuCpfCnpj:N,codigosTermoUso:[1,2]})}else K.btnContinueEnabled=!1}function x(a,b,c){function d(d){L.setPublicKey(d.data.key);var e={payload:L.encrypt(JSON.stringify(b))};a(e,c)}function e(a){H("error")}l.getPublicKey().then(d).catch(e)}function y(a){function b(){z()}function c(){H("contract")}p.postEncrypted(a).then(b).catch(c)}function z(){F(),I();var a={cpf:N,telefone:"",email:"",senha:K.data.password,tipoCadastro:"CLIENTE_CARTAO",tipoOperacao:n.get("type"),dadosCartao:{ultimosQuatroDigitosCartao:n.get("creditcard").lastDigits,senha:n.get("creditcard").password}};console.log("PAYLOAD CARTAO DE CREDITO: ",a),E(A,a)}function A(b,c){function e(){n.set("user",K.data);var b=o.CREDITCARD_SUCCESS_RESET_PASSWORD;"cadastro"==M&&(b=o.CREDITCARD_SUCCESS_SUBSCRIBE),a.go(b)}function g(a){var b=angular.element("#password-rule-error-backend").find("bv-svg-icon img");K.btnContinueEnabled=!1,K.data.passwordValidation.notLowerThanSix=!1,K.data.passwordValidation.notIsSequence=!1,b.attr("src","dist/images/white-error.svg");try{var c={pageName:"BV|AA|minha-bv|"+M+"|cartao|nova-senha|senha-fora-padrao",url:"/nova-senha",errorCode:a.status,nameErrorCode:a.status>=500?"sistema_indisponivel":"senha_fora_do_padrao"};c.pageName+=n.get("isCNPJ")?"|cnpj":"|cpf",f.customPageViewV3(c)}catch(d){console.error("Ocorreu um erro para disparar DTM V3. ",d)}H("password")}d.post(b,c).then(e).catch(g).finally(function(){G()})}function B(a){var c=angular.element("#password-rule-greather-than").find("bv-svg-icon img"),d=angular.element("#password-rule-seq").find("bv-svg-icon img"),e=angular.element("#password-rule-error-backend").find("bv-svg-icon img"),f=K.data.password.trim()||"",g=K.data.confirmPassword.trim()||"",h=i.isEqualRepeatingNumbers(f),j=i.isIncreasingNumbers(f),k=i.isDecreasingNumbers(f);return f.length>=6&&f.length<=8&&g.length>=6&&g.length<=8?(K.data.passwordValidation.notLowerThanSix=!0,c.attr("src","dist/images/white-check.svg")):(c.attr("src","dist/images/white-error.svg"),K.data.passwordValidation.notLowerThanSix=!1),f.length>=6&&f.length<=8&&g.length>=6&&g.length<=8&&!h&&!j&&!k?(K.data.passwordValidation.notIsSequence=!0,d.attr("src","dist/images/white-check.svg")):(d.attr("src","dist/images/white-error.svg"),K.data.passwordValidation.notIsSequence=!1),a&&(c.attr("src","dist/images/white-error.svg"),K.data.passwordValidation.notLowerThanSix=!1,d.attr("src","dist/images/white-error.svg"),K.data.passwordValidation.notIsSequence=!1),c.parent().removeClass("-hide"),c.parent().addClass("-show"),d.parent().removeClass("-hide"),d.parent().addClass("-show"),e.parent().removeClass("-hide"),e.parent().addClass("-show"),setTimeout(function(){b.$digest()},10),!1}function C(a,c){var d=angular.element("input[name="+c+"]"),e=a.currentTarget.querySelector("bv-svg-icon img"),f="password",g="dist/images/unsee-disabled.svg";"password"==d.attr("type")&&(f="tel",g="dist/images/see.svg"),d.attr("type",f),e.src=g,setTimeout(function(){b.$digest()},10)}function D(){return angular.equals(K.data.password,K.data.confirmPassword)&&""!=K.data.confirmPassword?(K.data.passwordValidation.isEquals=!0,!0):(K.data.passwordValidation.isEquals=!1,!1)}function E(a,b){j.execute("subscribe").then(function(c){x(a,b,c)}).catch(function(){G()})}function F(){b.$emit(e.SPINNING_START,{target:"login-spinner"})}function G(){b.$emit(e.SPINNING_STOP,{target:"login-spinner"})}function H(a){K.modalStatus.open=!0,K.modalStatus[a]=!0}function I(){K.modalStatus={open:!1,error:!1,contract:!1,attendance:!1,password:!1,token:!1}}function J(){var a="BV|AA|minha-bv|"+M+"|cartao|nova-senha|cpf";"0"==n.get("productClient")&&(a="BV|AA|minha-bv|"+M+"|sem-produto|nova-senha|cpf");try{var b={pageName:a,url:"/nova-senha",errorCode:"",nameErrorCode:""};f.customPageViewV3(b)}catch(c){console.error("Ocorreu um erro para disparar DTM V3. ",c)}}n.get("cpfCnpj")||a.go(h.LOGIN);var K=this,L=new JSEncrypt,M="RESET"==n.get("type")?"esqueci-senha":"cadastro",N=n.get("cpfCnpj").replace(/\D/g,"");K.data={password:"",confirmPassword:"",passwordValidation:{notLowerThanSix:!1,notIsSequence:!1,isEquals:!1}},K.formSubmitted=!1,K.btnContinueEnabled=!0,K.showPage=!1,K.disablePassword=!1,K.disableConfirmPassword=!1,K.phonePattern=g.PHONE,K.modalStatus={open:!1,error:!1,contract:!1,attendance:!1,password:!1,token:!1},K.statusInput={password:{sequential:!1},confirmPassword:{equals:!1}},K.inputFocused=void 0,K.submitStep=w,K.closeModal=I,K.togglePassword=C,K.onBackToLogin=v,K.onCurrentInputFocused=u,K.onKeyPressVirtualKeyboard=t,K.onKeypress=s,K.setFocusField=r,q(),J()}a.$inject=["$state","$rootScope","$window","authRegisterService","commonEvents","dataLayerFactory","formPatterns","loginRoutes","mathOperationsFactory","recaptchaService","registerPasswordService","rsaPublicKeyService","subscribeFactory","subscribeService","subscribeRoutes","userContractService"],angular.module("internetBanking.subscribe").controller("SubscribePasswordCreditcard",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){function l(){console.log("SubscribeOtpSend:init()"),w.loading=!0,m(n)}function m(a,b){h.getPublicKey().then(function(c){x.setPublicKey(c.data.key),_.isEmpty(b)?a():a(b[0])}).catch(function(a){t(),console.error("API indisponivel. ",a)})}function n(){var a={cpfCnpj:y},b={payload:x.encrypt(JSON.stringify(a))};c.getContactInformation(b).then(function(a){if(a.data.length>0||"204"!=a.status)w.receive=a.data,w.contactInformation=a.data.map(function(a){return{id:a.codigo,contact:a.contato,kind:a.tipo}}),w.loading=!1;else{try{var b={pageName:"BV|AA|minha-bv|"+z+"|financiamento|nenhum-contato-encontrado|erro",url:"/codigo-seguranca",errorCode:a.status,nameErrorCode:"golden_record"};e.customPageViewV3(b)}catch(c){console.error("Ocorreu um erro para disparar DTM V3. ",c)}r("emptyGoldenRecord")}}).catch(function(a){try{var b={pageName:"BV|AA|minha-bv|"+z+"|financiamento|nenhum-contato-encontrado|erro",url:"/codigo-seguranca",errorCode:a.status,nameErrorCode:"golden_record"};e.customPageViewV3(b)}catch(c){console.error("Ocorreu um erro para disparar DTM V3. ",c)}r("emptyGoldenRecord")})}function o(){s(),g.execute("sendtokenotp").then(function(a){m(p,[a])}).catch(function(a){try{var b={pageName:"BV|AA|minha-bv|"+z+"|financiamento|recaptcha|erro",url:"/codigo-seguranca",errorCode:a.status,nameErrorCode:"recaptcha_invalido"};e.customPageViewV3(b)}catch(c){console.error("Ocorreu um erro para disparar DTM V3. ",c)}t()})}function p(a){var d=JSON.parse(w.receive),f={cpfCnpj:y,codigo:d.id},g={payload:x.encrypt(JSON.stringify(f))};k.set("receiveTokenWay",d),c.send(g,a).then(function(){var a=i.TOKEN_OTP_VALIDATE_RESET_PASSWORD;"cadastro"==z&&(a=i.TOKEN_OTP_VALIDATE_SUBSCRIBE),b.go(a)}).catch(function(a){try{var b={pageName:"BV|AA|minha-bv|"+z+"|financiamento|receber-codigo-identificacao|erro",url:"/codigo-seguranca",errorCode:a.status,nameErrorCode:"erro_disparo_token_otp"};e.customPageViewV3(b)}catch(c){console.error("Ocorreu um erro para disparar DTM V3. ",c)}}).finally(function(){j.setTypeTokenSend(d.kind),t()})}function q(){try{var a={pageName:"BV|AA|minha-bv|"+z+"|financiamento|lightbox-celular-email-incorreto|transbordo-central-atendimento",url:"/codigo-seguranca"};e.customPageViewV3(a)}catch(b){console.error("Ocorreu um erro para disparar DTM V3. ",b)}r("invalidData")}function r(a){w.modalStatus.open=!0,w.modalStatus[a]=!0}function s(){a.$emit(d.SPINNING_START,{target:"btn-spinner"})}function t(){a.$emit(d.SPINNING_STOP,{target:"btn-spinner"})}function u(){b.go(f.LOGIN)}function v(){var a="BV|AA|minha-bv|"+z+"|financiamento|receber-codigo-identificacao";"0"==k.get("productClient")&&(a="BV|AA|minha-bv|"+z+"|sem-produto|receber-codigo-identificacao"),a+=k.get("isCNPJ")?"|cnpj":"|cpf";try{var b={pageName:a,url:"/codigo-seguranca",errorCode:"",nameErrorCode:""};e.customPageViewV3(b)}catch(c){console.error("Ocorreu um erro para disparar DTM V3. ",c)}}k.get("cpfCnpj")||b.go(f.LOGIN);var w=this,x=new JSEncrypt,y=k.get("cpfCnpj").replace(/\D/g,""),z="RESET"==k.get("type")?"esqueci-senha":"cadastro";w.botaoHabilitado=!1,w.modalStatus={open:!1,emptyGoldenRecord:!1,serverError:!1,invalidData:!1},w.checkRecaptcha=o,w.openModalDataInvalid=q,w.openModal=r,w.sendToInitialPage=u,l(),v()}a.$inject=["$rootScope","$state","bvTokenService","commonEvents","dataLayerFactory","loginRoutes","recaptchaService","rsaPublicKeyService","subscribeRoutes","subscribeFactory","subscribeService"],angular.module("internetBanking.subscribe").controller("SubscribeOtpSend",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){function l(){console.log("SubscribeOtpValidate:init()"),s()}function m(){h.getPublicKey().then(function(a){z.setPublicKey(a.data.key),o()}).catch(function(a){w(),console.error("API indisponivel. ",a)})}function n(){var a=j.TOKEN_OTP_RESET_PASSWORD;try{var b={pageName:"BV|AA|minha-bv|"+A+"|financiamento|validar-codigo-identificacao|reenviar-codigo",url:"/validar-codigo-seguranca"};b.pageName+=k.get("isCNPJ")?"|cnpj":"|cpf",f.customPageViewV3(b)}catch(d){console.error("Ocorreu um erro para disparar DTM V3. ",d)}"cadastro"==A&&(a=j.TOKEN_OTP_SUBSCRIBE),c.go(a)}function o(){v();var a={cpfCnpj:B,tokenOtp:y.inputToken.value,tipo:y.typeTokenSend},b={payload:z.encrypt(JSON.stringify(a))};d.validate(b).then(function(){var a=j.TYPE_NEW_PASSWORD_RESET_PASSWORD;"cadastro"==A&&(a=j.TYPE_NEW_PASSWORD_SUBSCRIBE),c.go(a)}).catch(function(a){try{var b={pageName:"BV|AA|minha-bv|"+A+"|financiamento|validar-codigo-identificacao|codigo-invalido",url:"/validar-codigo-seguranca",errorCode:a.status,nameErrorCode:"codigo_seguranca_invalido"};b.pageName+=k.get("isCNPJ")?"|cnpj":"|cpf",f.customPageViewV3(b)}catch(c){console.error("Ocorreu um erro para disparar DTM V3. ",c)}q(),t("invalidTokenOTP")}).finally(function(){i.setTokenOtp(y.inputToken.value),w()})}function p(a,b){if(8==a.keyCode||46==a.keyCode)return q(),!1;var c=a.target.value,d=b+1;return""!=c&&Number.isInteger(parseInt(c))?(C[b]=c,y.inputToken={value:C.join(""),eachField:C},6==y.inputToken.value.length&&(y.botaoHabilitado=!0),b<5&&angular.element("#input-token-"+d).focus(),!0):void 0}function q(){angular.element("#input-token-0").val(""),angular.element("#input-token-1").val(""),angular.element("#input-token-2").val(""),angular.element("#input-token-3").val(""),angular.element("#input-token-4").val(""),angular.element("#input-token-5").val(""),angular.element("#input-token-0").focus(),y.inputToken.value="",C=[],y.botaoHabilitado=!1}function r(){return y.radiusCircle/60*y.countdownResendToken-y.radiusCircle/60}function s(){var a=setInterval(function(){y.radiusProgress=r(),--y.countdownResendToken||clearTimeout(a),b.$apply()},1e3)}function t(a){y.modalStatus.open=!0,y.modalStatus[a]=!0}function u(a){y.modalStatus.open=!1,y.modalStatus[a]=!1}function v(){a.$emit(e.SPINNING_START,{target:"btn-spinner"})}function w(){a.$emit(e.SPINNING_STOP,{target:"btn-spinner"})}function x(){var a="BV|AA|minha-bv|"+A+"|financiamento|validar-codigo-identificacao";"0"==k.get("productClient")&&(a="BV|AA|minha-bv|"+A+"|sem-produto|validar-codigo-identificacao"),a+=k.get("isCNPJ")?"|cnpj":"|cpf";try{var b={pageName:a,url:"/validar-codigo-seguranca",errorCode:"",nameErrorCode:""};f.customPageViewV3(b)}catch(c){console.error("Ocorreu um erro para disparar DTM V3. ",c)}}k.get("cpfCnpj")||c.go(g.LOGIN);var y=this,z=new JSEncrypt,A="RESET"==k.get("type")?"esqueci-senha":"cadastro",B=k.get("cpfCnpj").replace(/\D/g,""),C=[];y.countdownResendToken=60,y.radius=41,y.diameter=2*y.radius,y.radiusCircle=y.diameter*Math.PI,y.radiusProgress=r(),y.botaoHabilitado=!1,y.inputToken={value:""},y.modalStatus={open:!1,invalidTokenOTP:!1},y.typeTokenSend=i.getTypeTokenSend(),y.onKeyupInputToken=p,y.getPublicKey=m,y.resendToken=n,y.closeModal=u,l(),x()}a.$inject=["$rootScope","$scope","$state","bvTokenService","commonEvents","dataLayerFactory","loginRoutes","rsaPublicKeyService","subscribeFactory","subscribeRoutes","subscribeService"],angular.module("internetBanking.subscribe").controller("SubscribeOtpValidate",a)}(),function(){"use strict";function a(a,b,c,d){function e(){console.log("SubscribeSuccess:init()")}function f(){var a="2"==d.get("productClient")?"financiamento":"cartao",c="BV|AA|minha-bv|"+h+"|"+a+"|sucesso";"0"==d.get("productClient")&&(c="BV|AA|minha-bv|"+h+"|sem-produto|sucesso"),c+=d.get("isCNPJ")?"|cnpj":"|cpf";try{var e={pageName:c,url:"/sucesso",errorCode:"",nameErrorCode:""};b.customPageViewV3(e)}catch(f){console.error("Ocorreu um erro para disparar DTM V3. ",f)}}d.get("cpfCnpj")||a.go(c.LOGIN);var g=this,h="RESET"==d.get("type")?"esqueci-senha":"cadastro";g.commonRoutes=c,e(),f()}a.$inject=["$state","dataLayerFactory","loginRoutes","subscribeService"],angular.module("internetBanking.subscribe").controller("SubscribeSuccess",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){console.log("SubscribeWelcomeResetPassword:init()")}function h(){var b=e.CREDITCARD_RESET_PASSWORD;"2"==f.get("productClient")&&(b=e.TOKEN_OTP_RESET_PASSWORD),a.go(b)}function i(){a.go(c.LOGIN)}function j(){var a="BV|AA|minha-bv|esqueci-senha|cartao";"2"==f.get("productClient")?a="BV|AA|minha-bv|esqueci-senha|financiamento":"0"==f.get("productClient")&&(a="BV|AA|minha-bv|esqueci-senha|sem-produto"),a+=f.get("isCNPJ")?"|cnpj":"|cpf";try{var c={pageName:a,url:"/recuperar-senha",errorCode:"",nameErrorCode:""};b.customPageViewV3(c)}catch(d){console.error("Ocorreu um erro para disparar DTM V3. ",d)}}var k=this;k.isCreditcard="2"!=f.get("productClient"),k.btnContinue=h,k.btnLogin=i,g(),j()}a.$inject=["$state","dataLayerFactory","loginRoutes","subscribeFactory","subscribeRoutes","subscribeService"],angular.module("internetBanking.subscribe").controller("SubscribeWelcomeResetPassword",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){console.log("SubscribeWelcomeSubscribe:init()")}function g(){var b=d.TOKEN_OTP_SUBSCRIBE;j.isCreditcard&&(b=d.CREDITCARD_SUBSCRIBE),a.go(b)}function h(){a.go(c.LOGIN)}function i(){var a="BV|AA|minha-bv|cadastro|cartao";"2"==e.get("productClient")?a="BV|AA|minha-bv|cadastro|financiamento":"0"==e.get("productClient")&&(a="BV|AA|minha-bv|cadastro|sem-produto"),a+=e.get("isCNPJ")?"|cnpj":"|cpf";try{var c={pageName:a,url:"/cadastro",errorCode:"",nameErrorCode:""};b.customPageViewV3(c)}catch(d){console.error("Ocorreu um erro para disparar DTM V3. ",d)}}var j=this;j.isCreditcard="2"!=e.get("productClient"),j.btnContinue=g,j.btnLogin=h,f(),i()}a.$inject=["$state","dataLayerFactory","loginRoutes","subscribeRoutes","subscribeService"],angular.module("internetBanking.subscribe").controller("SubscribeWelcomeSubscribe",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","webquizzQuestionsKeys"],angular.module("internetBanking.subscribe").factory("webquizQuestionsFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","webquizQuestionsDetailsKeys"],angular.module("internetBanking.subscribe").factory("webquizQuestionsDetailsFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","webquizQuestionsAnswersKeys"],angular.module("internetBanking.subscribe").factory("webquizQuestionsAnswersFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createService(b)),c}a.$inject=["baseService","serviceAuthenticateCreditCard"],angular.module("internetBanking.subscribe").service("authenticateCreditCardService",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createService(b)),c}a.$inject=["baseService","serviceAuthenticateFinancing"],angular.module("internetBanking.subscribe").service("authenticateFinancingService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e,f){function g(a){i.resolve(a)}function h(a){i.reject(a)}var i=d.defer(),j={method:"POST",url:a.backEnd+b.SUBSCRIBE_AUTHENTICATION_LEGACY,data:{cpfCnpj:e,senha:f}};return c(j).then(g).catch(h),i.promise}return{authenticationLegacy:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.subscribe").service("authenticationLegacyService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=d.defer(),i={method:"GET",cache:!1,url:a.backEnd+b.SUBSCRIBE_GET_PRODUCTS+"/"+e};return c(i).then(f).catch(g),h.promise}return{get:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.subscribe").service("getProductsService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=d.defer(),i={method:"POST",cache:!1,url:a.backEnd+b.SUBSCRIBE_URL_TOKEN_VALIDATE,data:e};return c(i).then(f).catch(g),h.promise}function f(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=d.defer(),i={method:"POST",cache:!1,url:a.backEnd+b.SUBSCRIBE_IAM_NEW_CLIENT_CREATE_PASSWORD,data:e};return c(i).then(f).catch(g),h.promise}return{validateURLToken:e,createPassword:f}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.subscribe").service("iamNewClientService",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createService(b)),c}a.$inject=["baseService","serviceSubscribeCreditCard"],angular.module("internetBanking.subscribe").service("subscribeCreditCardService",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createService(b)),c}a.$inject=["baseService","serviceSubscribeFinancing"],angular.module("internetBanking.subscribe").service("subscribeFinancingService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e,f,g,h,i){function j(a){l.resolve(a)}function k(a){l.reject(a)}var l=d.defer(),m={method:"POST",url:a.backEnd+b.SUBSCRIBE_SEND_LEGACY,data:{cpfCnpj:e,senhaInternetBanking:f,token:g,celular:h,email:i}};return c(m).then(j).catch(k),l.promise}return{post:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.subscribe").service("subscribeLegacyService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e,f,g){function h(a){k.resolve(a)}function i(a){k.reject(a)}var j={googleToken:f};_.isEmpty(g)||(j.tokenURL=g);var k=d.defer(),l={method:"POST",cache:!1,url:a.backEnd+b.SUBSCRIBE_REGISTER_PASSWORD,data:e,headers:j};return c(l).then(h).catch(i),k.promise}return{register:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.subscribe").service("registerPasswordService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=d.defer(),i={method:"POST",cache:!1,url:a.backEnd+b.SUBSCRIBE_TOKEN_VALIDATE,data:e};return c(i).then(f).catch(g),h.promise}return{validate:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.subscribe").service("tokenValidateService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=d.defer(),i={method:"POST",cache:!1,url:a.backEnd+b.SUBSCRIBE_WEB_QUIZZ_QUESTIONS,data:e};return c(i).then(f).catch(g),h.promise}return{questions:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.subscribe").service("webquizzQuestionsService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=d.defer(),i={method:"POST",cache:!1,url:a.backEnd+b.SUBSCRIBE_WEB_QUIZZ_VALIDATE,data:e};return c(i).then(f).catch(g),h.promise}return{validate:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.subscribe").service("webquizzValidateService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e,f){function g(a){i.resolve(a)}function h(a){i.reject(a)}var i=d.defer(),j={method:"POST",cache:!1,url:a.backEnd+b.SUBSCRIBE_SEND_EMAIL,data:e,headers:{tokenRecaptcha:f}};return c(j).then(g).catch(h),i.promise}return{send:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.subscribe").service("sendEmailService",a)}();