!function(){"use strict";function a(){function a(a){return{numeroContrato:a.contractNumber,codigoProduto:a.productCode,alias:a.alias}}return{converterViewModelToAPI:a}}angular.module("internetBanking.navigation").factory("aliasFactory",a)}(),function(){"use strict";function a(a){function b(b){var c=[];return _.forEach(_.groupBy(b,function(a){return 12===a.productCode||14===a.productCode||13===a.productCode?(14===a.productCode&&(a.parentProductCode=12),13===a.productCode&&(a.parentProductCode=12),12):a.productCode}),function(b,d){var e=a.formatByProductCode(d);c.push({id:d,slug:e&&e.slug,name:e&&e.name,shortName:e&&e.shortName,order:e&&e.order,isActive:!1,isFocus:!1,isEditing:!1,items:b})}),_.sortBy(c,"order")}function c(a){return _.map(a,function(a){return _.defaults({isActive:!1,isPrev:!1,isNext:!1},a)})}function d(a){return{name:a.nome,product:{productId:a.produto.produtoId,productType:a.produto.produtoTipo,productTitle:a.produto.produtoTitulo,productTitlePerUser:a.produto.produtoTituloPorUsuario,cardBrand:a.produto.bandeiraCartao,cardFinal:a.produto.finalCartao,cardNumber:a.produto.cartaoNumero,productImage:a.produto.produtoImagem,contractNumber:a.produto.numeroContrato,availableLimit:a.produto.limiteDisponivel,bestDayToBuy:a.produto.melhorDiaParaCompra,currentInvoiceValue:a.produto.valorFaturaAtual,merecePoints:a.produto.merecePontos,netPoints:a.produto.netPontos,isPendent:a.produto.estaPendente,invoiceList:a.produto.faturaLista.map(function(a){return{invoiceToPayDate:a.faturaAPagarData,invoiceValue:a.faturaValor,invoicestatus:a.faturaStatus}})}}}return{formatMenuList:b,formatProductList:c,formatClientDetails:d}}a.$inject=["categoryNamesFactory"],angular.module("internetBanking.navigation").factory("navigationFactory",a)}(),function(){"use strict";function a(a){function b(a){var b,c=[],d=[],e=[],f=[],g=[],h=a.length;for(b=0;b<h;b++)switch(a[b].productCode){case 10:e.push(a[b]);break;case 11:g.push(a[b]);break;case 12:case 13:case 14:f.push(a[b]);break;case 15:d.push(a[b])}return f.length&&c.push(f),e.length&&c.push(e),g.length&&c.push(g),d.length&&c.push(d),c}function c(b){return b.filter(function(b){return angular.equals(b.productCode,a.creditCard)})}function d(a){return a.filter(function(a){return angular.equals(a.contractStatus.code,"-1")})}return{filterProductsByCategory:b,checkCreditCardProducts:c,checkProductsBlocked:d}}a.$inject=["mainProductCodes"],angular.module("internetBanking.navigation").factory("productsFactory",a)}(),function(){"use strict";function a(a,b,c,d){function e(e,f,g){function h(a){j.resolve(a)}function i(a){j.reject(a)}var j=d.defer(),k={method:"POST",cache:!1,url:a.backEnd+b.ALIAS,data:{numeroContrato:e,codigoProduto:f,alias:g}};return c(k).then(h).catch(i),j.promise}return{post:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.navigation").service("aliasService",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createService(b)),c}a.$inject=["baseService","serviceGetClientDetails"],angular.module("internetBanking.navigation").service("clientDetailsService",a)}(),function(){"use strict";function a(){function a(){return c}function b(a){c=a}var c;return{getInternalPage:a,setInternalPage:b}}angular.module("internetBanking.navigation").service("internalPageService",a)}(),function(){"use strict";function a(a,b,c,d){function e(){function e(a){g.resolve(a)}function f(a){g.reject(a)}var g=d.defer(),h={method:"POST",cache:!1,url:a.backEndMinhasPropostas+b.MINHAS_PROPOSTAS_OBTER,data:{}};return c(h).then(e).catch(f),g.promise}return{post:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.navigation").service("minhasPropostasService",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U){function V(){if(C.userName.then(function(a){Db.view.userName=a.nomeCliente||""}).catch(function(a){Db.view.userName=""}),v.init(f.notProducts),v.isInactiveContract())return v.hasUpgradeOfCard()&&(Db.isUpgradeAddCard=!0),Db.modalStatus=v.getObjectModal(),!1;if(c.$emit(i.LOADING_START,{noAnimate:!0,where:"navigation: i ===nit()"}),h.alert=function(a){console.warn("alert",a)},Db.view.sidebarIsLoading=!0,!u)return $a();Db.breadcrumb=e.current.data.breadcrumb?e.current.data.breadcrumb:[],Db.permissioning={role:u.currentProduct.permissioning.role,category:[]},Db.productList=x.formatProductList(u.productsCache),Db.menuList=x.formatMenuList(Db.productList),Db.menuList=Db.menuList.map(function(a){return a.isExpired=!1,a}),pa(u.productsCache,u.currentProduct.product),pb(),qb(),Db.isOpenBanking=!1,f.isOpenBanking&&(Db.isOpenBanking=!0,Db.menuList&&!Db.menuList.length||rb()),ob(),Ea();var a=_.filter(Db.productList,function(a){return a.contractNumber==e.params.contractNumber}),b=!1;if(a&&a.length<1)return void $a();Ka(K.getCurrentProduct()),ab(a[0],b),ra(),qa(a[0]),ia(),ka(),I.checkQueryParams(),W(),"/area-cliente/cpvg-online/simulacao"==D.redirectToMKT.route?window.location.href=D.redirectToMKT.route:""!=D.redirectToMKT.route&&e.go(D.redirectToMKT.route)}function W(){function a(){Db.carbonEmissionStatus=null,Db.showCarbonEmissionButton=!1}Db.showCarbonEmissionButton=!1;var b=K.getCurrentProduct();if(!T.isEligible(b.data))return a(),void X();T.hasAccepted(b.data).then(function(a){Db.carbonEmissionStatus=a,Db.showCarbonEmissionButton=!0,X()})}function X(){try{document.BVDatalayer.carbonInfo||(document.BVDatalayer.carbonInfo={}),document.BVDatalayer.carbonInfo.requestSuccess=!!Db.carbonEmissionStatus;var a=K.getCurrentProduct();document.BVDatalayer.carbonInfo.vehiclesModel=a&&a.data&&a.data.title}catch(b){console.warn("Erro ao atualizar dataLayer",b)}}function Y(){ea().then(function(a){Z()})}function Z(){c.$emit(i.SPINNING_START),Db.carbonEmissionStatus?aa("success"):(da().then(function(){}).finally(function(){aa(Db.isEmptyData?"empty":Db.isAllUpdated?"normal":"update"),c.$emit(i.SPINNING_STOP)}),document.BVDatalayer.carbonInfo||(document.BVDatalayer.carbonInfo={}),document.BVDatalayer.carbonInfo.lightboxWantPartOpen=!0)}function aa(a){var b={open:!0};"update"===a?Db.modalCarbonEmissionUpdateConfig=b:"empty"===a?Db.modalEmptyDataConfig=b:(ga(),Db.carbonEmissionStatus?Db.modalCarbonEmissionSuccessConfig=b:Db.modalCarbonEmissionConfig=b),c.isModal=!0}function ba(){c.$emit(i.SPINNING_START),e.go(E.DATA_UPDATE_EDIT,{callback:function(a){console.log("---\x3e Atualização cadastral: ",a),c.$emit("open-carbon-submit-emission-modal"),console.log(e.current),h.history.back()}}).then(function(){Db.onCloseCarbonEmissionUpdateModal(),c.$emit(i.SPINNING_STOP)})}function ca(){Db.abandonModalAction&&Db.abandonModalAction.route?e.go(Db.abandonModalAction.route):Db.abandonModalAction&&Db.abandonModalAction.item?(za(),Ea(Db.abandonModalAction.item.contractNumber),Ja(Db.abandonModalAction.item)):Db.abandonModalAction&&Db.abandonModalAction.product?Ga(Db.abandonModalAction.product):(za(),va(),e.go("app.navigation.user.openBankingManagement")),na()}function da(){return Db.isAllUpdated=!1,Db.isEmptyData=!1,S.get().then(function(a){function b(a){Db.isAllUpdated=a&&a.enderecosAtualizados&&a.enderecosEletronicosAtualizados&&a.telefonesAtualizados,Db.phoneList=a.telefones,Db.emailList=a.enderecosEletronicos,Db.isEmptyData=0===Db.phoneList.length&&0===Db.emailList.length}b(a.data),Db.isAllUpdated?R.customPageView({pageName:"BV|AL|campanha|sempre-compensa|atualizacao-cadastral-ok"}):R.customPageView({pageName:"BV|AL|campanha|sempre-compensa|atualizacao-cadastral-solicitado"})}).catch(function(){Db.isAllUpdated=!0})}function ea(){c.$emit(i.SPINNING_START,{target:"carbon-accept-spinner"}),Db.modalCarbonEmissionConfig.error=!1;var a=K.getCurrentProduct();return T.setAcceptance(a.data.contractNumber,!0).then(function(){c.$emit(i.SPINNING_STOP,{target:"carbon-accept-spinner"}),Db.carbonEmissionStatus=!0,X(),R.customPageView({pageName:"BV|AL|campanha|sempre-compensa|lightbox-sucesso"})}).catch(function(a){console.error(a),c.$emit(i.SPINNING_STOP,{target:"carbon-accept-spinner"}),Db.modalCarbonEmissionConfig.error=!0})}function fa(){Db.modalCarbonEmissionConfig=Db.modalCarbonEmissionSuccessConfig=Db.modalEmptyDataConfig={open:!1},c.isModal=!1}function ga(){Db.modalCarbonEmissionUpdateConfig={open:!1},c.isModal=!1}function ha(){"/credito"!=e.current.url&&(za(),e.go(Db.campaignRoutes.SIMULATOR_HOME)),Db.show_limit_bold=!0}function ia(){Db.view.stopWatch=!0,Db.onModalSession=function(){c.isModal=!1,Db.modalStatus.open=!1,Db.modalStatus.session=!1,Db.showModalSession=!1,G.eventButtonModal()},d.$watch(function(){return h.navigation.showModalSession},function(a,b){a&&ja()})}function ja(){c.isModal=!0,Db.modalStatus.open=!0,Db.modalStatus.session=!0,Db.showModalSession=!1}function ka(){d.$watch(function(){return h.navigation.showModalBillet},function(a,b){a&&la()}),d.$watch(function(){return h.navigation.textMessageBillet},function(a,b){a&&(Db.view.textModalBillet=a)})}function la(){c.isModal=!0,Db.modalStatus.open=!0,Db.modalStatus.billet=!0}function ma(){c.isModal=!0,Db.modalStatus.open=!0,Db.modalStatus.abandon=!0,c.$emit("open-banking-datalayer","lightbox-abandono")}function na(){c.isModal=!1,Db.modalStatus.open=!1,Db.modalStatus.abandon=!1,Db.abandonModalAction=void 0}function oa(){Db.modalStatus.open=!1,Db.modalStatus.error=!1,Db.modalStatus.billet=!1,h.navigation.showModalBillet=!1}function pa(a,b){if(1===a.length&&b.isExpired)return Db.menuList[0].isExpired=!0,e.go(E.PERSONAL_DATA)}function qa(a){_.forEach(Db.menuList,function(b){b.isFocus=!1,b.id!=a.productCode&&b.id!=a.parentProductCode||(b.isFocus=!0)})}function ra(){Cb=!0,e.current.data&&!1===e.current.data.internalPage&&(Cb=e.current.data.internalPage),M.setInternalPage(Cb),Db.internal_page=M.getInternalPage()}function sa(a){a.hasOwnProperty("route")&&!_.isNull(a.route)&&""!=a.route&&e.go(a.route)}function ta(){h.history.back()}function ua(a,b){if(Db.show_limit_bold=!1,"seguros"===a.slug)return Db.menuList=Db.menuList.map(function(a){return a.isFocus="seguros"===a.slug||!1,a}),za(),void e.go(o.HOME);switch(a.id){case"15":case"17":Db.view.showSubtitle=!1;break;case"18":Db.view.showSubtitle=!1;case"19":case"OB":Db.view.showSubtitle=!1;break;default:Db.view.showSubtitle=!0}if("17"!==a.id&&"19"!==a.id&&1===a.items.length)return Va(b)?(za(),Ea(a.items[0].contractNumber),Ja(a.items[0]),void 0):(za(),Db.abandonModalAction={item:a.items[0]},!1);if("OB"!==a.id){var c=a.isActive;va(),c?Db.menuOpened=!1:(a.isActive=!0,Db.menuOpened=!0)}}function va(){_.map(Db.menuList,function(a){return a.isActive=!1,a.isFocus=!1,a})}function wa(){_.map(Db.menuList,function(a){return a.isActive=!1,a}),Db.menuOpened=!1}function xa(){Db.mobileMenuOpened=!Db.mobileMenuOpened,Db.closeMenu();try{Db.userMenuActivator.close()}catch(a){}}function ya(){Db.mobileMenuOpened=!0,Db.closeMenu()}function za(){Db.mobileMenuOpened=!1,Db.closeMenu();try{Db.userMenuActivator.close()}catch(a){}}function Aa(a,b){return"transparency-portal"===a.target.id?void h.open(Db.commonUrls.PUBLICSITE_TRANSPARENCY_PORTAL):Va(a)?("open-banking-link-menu"===a.target.id&&e.reload(b),a.preventDefault(),a.stopPropagation(),za(),va(),void g(function(){e.go(b)},200)):(Db.abandonModalAction={route:b},!1)}function Ba(a){a&&(a.preventDefault(),a.stopPropagation());try{sessionStorage.removeItem("refundModalStatus"),Db.userMenuActivator.close()}catch(b){}N.logout({"user-logout":!0}).then(function(){A.resetCardsList(),e.go(p.LOGIN)})}function Ca(){Db.modalStatus.open=!1,Db.modalStatus.error=!1,c.isModal=!1}function Da(){Db.modalStatus.open=!1,D.setBlockedCardCache(!0),Db.blockedCreditCard=D.getBlockedCardCached(),e.go(Db.commonRoutes.ADD_CARD)}function Ea(a){Db.view.sidebarIsLoading=!0,Ra(a),Sa(),Ta(),Ua()}function Fa(a,b){return b.isPrev||b.isNext?(Ea(b.contractNumber),Ja(b),!0):(a.stopPropagation(),!1)}function Ga(a){if(!Va()&&!Db.abandonModalAction)return Db.abandonModalAction={product:a},!1;if(19===a.productCode)switch(za(),a.id){case"CVG":var b=a.numeroProposta,c=a.statusProposta;window.location.href="/area-cliente/cpvg-online/define-etapa?proposal="+b+"&status="+c;break;case"REFIN":var d=P.getHeaders();sessionStorage.setItem("tokencs",d.TokenCS),window.location.href="/area-cliente/refinanciamento-consignado/";break;case"CP":e.go(l.STATUS_TENDER_HOME)}else if(17===a.productCode)switch(za(),a.id){case"CVG":window.location.href="/area-cliente/cpvg-online/simulacao?idcmpit=mbv_menu-header_emp-credito-veiculo-garantia_all-visits-minhabv_credito-veiculo-garantia_click-menu-creditos-para-voce-contrate-cvg";break;case"CP":e.go(l.STATUS_TENDER_HOME)}else a.isEditing||(za(),g(function(){Ea(a.contractNumber),Ja(a)},200))}function Ha(){!_.isNull(Db.prevIndex)&&_.isFinite(Db.prevIndex)?(Db.view.sidebarIsLoading=!0,Db.activeIndex=Db.prevIndex,Sa(),Ta(),Ua(),Ja(Db.productList[Db.activeIndex])):Ua()}function Ia(){!_.isNull(Db.nextIndex)&&_.isFinite(Db.nextIndex)?(Db.view.sidebarIsLoading=!0,Db.activeIndex=Db.nextIndex,Sa(),Ta(),Ua(),Ja(Db.productList[Db.activeIndex])):Ua()}function Ja(a){Eb&&g.cancel(Eb),Eb=g(function(){Db.view.sidebarIsLoading=!0,Db.view.sidebarIsLoadingActive=!0,ab(a,!0),qa(a)},500)}function Ka(a){var b=a.productCode;if(b||(b=a.data.productCode),b===r.creditCard)return void La(a);Ma(a)}function La(a){d.$watch(function(){return h.navigation.pageAssessory},function(a,b){Db.view.isAssesory=a}),d.$watch(function(){return h.navigation.dueDateInvoice},function(a,b){if(_.isEmpty(a))return!1;Db.view.dueDateInvoice=a}),d.$watch(function(){return Db.invoiceReceive},function(a,b){Db.view.hasEmailInvoice=a}),Db.view.bestBuyDate=K.getCurrentProduct().sidebar.bestBuyDate,Db.view.availableCreditLimit=K.getCurrentProduct().sidebar.availableCreditLimit,Db.view.totalCreditLimit=K.getCurrentProduct().sidebar.totalCreditLimit,bb(K.getCurrentProduct().data.contractNumber),cb(K.getCurrentProduct().productDetail)}function Ma(a){Db.view.showSidebar=!1,Db.view.isNewContract=Na(a.productDetail),Db.view.isSettled=Oa(a),Db.view.isSettled||Db.view.isNewContract||(Db.view.showSidebar=!0,[s.CEDIDO_CARTEIRA_PODRE.code,s.CESSAO_BB.code].indexOf(a.data.paymentSituationCode)>-1&&(Db.view.showSidebar=!1),Db.view.progressbarBVF=Pa(a.productDetail))}function Na(a){var b=a&&a.paidInstallmentsQuantity&&a.paidInstallmentsQuantity.value||0;return angular.equals(a.firstDueDate&&a.firstDueDate.value,a.nextDueDate&&a.nextDueDate.value)&&0===b}function Oa(a){return a.data.paymentSituationCode===s.QUITADO.code}function Pa(a){return{paid:a.paidInstallmentsQuantity.value,total:a.installmentsTotalQuantity.value,progressPercentage:Qa(a.paidInstallmentsQuantity.value,a.installmentsTotalQuantity.value)}}function Qa(a,b){return a>=b?100:a/b*100}function Ra(a){var a=void 0===a?e.params.contractNumber:a;Db.activeIndex=_.findIndex(Db.productList,function(b){return b.contractNumber==a})}function Sa(){Db.prevIndex=Db.activeIndex>0?Db.activeIndex-1:null,Db.nextIndex=!Db.productList||Db.activeIndex>=Db.productList.length-1?null:Db.activeIndex+1}function Ta(){_.map(Db.productList,function(a,b){return a.isActive=Db.activeIndex==b,a.isPrev=Db.prevIndex==b,a.isNext=Db.nextIndex==b,a})}function Ua(){Db.transformPanel=null;var a=Math.max(document.documentElement.clientWidth,window.innerWidth||0),b=Math.max(document.documentElement.clientHeight,window.innerHeight||0);g(function(){h.bvResize.isMediumToSmall?g(function(){if(Hb){var b=Db.activeIndex*a;Db.transformPanel={transform:"translateX(-"+b+"px) translateY(0px)"}}else Db.transformPanel={transform:"translateX(calc(-"+100*Db.activeIndex+"vw)) translateY(0px)"}},10):g(function(){if(Hb){var a=(b-115)*Db.activeIndex*-1;Db.transformPanel={transform:"translateY("+a+"px) translateX(0px)"}}else Db.transformPanel={transform:"translateY(calc(((100vh - 115px) * "+Db.activeIndex+") * -1)) translateX(0px)"}},10)},10)}function Va(a){return!(Db.isOpenBanking&&!c.errorConsentData&&e.params&&e.params.isOpenBanking&&["app.navigation.openBanking.transmission","app.navigation.openBanking.transmission.resume"].indexOf(e.current.name)>-1)||(Db.countAbandonModal||(Db.countAbandonModal=0),Db.countAbandonModal++,ma(),a&&(a.preventDefault(),a.stopPropagation()),!1)}function Wa(a,b){a.preventDefault(),a.stopPropagation(),Db.editingAlias=!0,Db.view.editingAliasName=b.alias||b.title}function Xa(a,b){a.preventDefault(),a.stopPropagation(),_.forEach(Db.menuList,function(a){_.forEach(a.items,function(a){a.isEditing=!1})}),b.isEditing=!0,Db.view.editingAliasName=b.alias||b.title}function Ya(a){Db.editingAlias=!1}function Za(){_.forEach(Db.menuList,function(a){_.forEach(a.items,function(a){a.isEditing=!1})})}function $a(a){return!!Va()&&(a?(h.history.back(),!1):(Db.closeMobileMenu(),!Db.openBankingHasAlreadyBeenLoaded&&U.getInteractionId()?void(Db.openBankingHasAlreadyBeenLoaded=!0):void g(function(){var a=K.getFirstProduct();a||(a=y.checkFirstProduct(Db.productList)),a?(K.setFirstProduct(a),Ea(a.contractNumber),Ja(a)):e.go(j.HOME)},100)))}function _a(){e.go(Db.routeHome)}function ab(a,d){function f(f){var g=z.setRoutes(a),h=K.getCurrentProduct();Ka(f),J.permissioning(h).then(function(b){Db.permissioning.role=J.mappingPermissioningRoles(),_.forEach(t,function(a,c){var d=_.intersection(b,a);Db.permissioning.category&&(Db.permissioning.category[c]=!1,d.length>0&&(Db.permissioning.category[c]=!0))}),c.isCPRedirect?(c.isCPRedirect=!1,e.go(l.STATUS_TENDER_HOME)):d?e.go(g.HOME,{contractNumber:a.contractNumber,productName:a.alias||a.title||a.category,category:a.category}):Db.routeHome=z.setRoutes(h).HOME}).catch(function(a){b.error("Permissioning changeHome Error >>>> ",a)}).finally(hb("Navigation: permissinoningService()"))}function g(a){if(b.error("productdetail ERR >>> ",a),459===a.status)return jb(),void(1===Db.menuList.length&&"15"===Db.menuList[0].id?Ba():$a())}return K.getDetail(a).then(f).catch(g).finally(hb("Navigation: getProductDetail()"))}function bb(a){function b(a){var b=w.APIToViewModel(a.data);Db.view.hasEmailInvoice=b.receivingType,Db.view.hasEmailInvoiceHidden=!0}function c(a){Db.view.hasEmailInvoiceHidden=!0}a="0000"+a,a=a.substr(a.length-4),L.getMethod(a).then(b).catch(c)}function cb(a){Db.view.progressbar=100*a.availableCreditLimit/a.totalCreditLimit}function db(a,b){if(13===b.which||"click"==b.type)eb(Db.view.editingAliasName,a),b.preventDefault(),b.stopPropagation();else if(Db.view.editingAliasName.length>=Gb)return Db.view.editingAliasName=Db.view.editingAliasName.substring(0,Gb),b.preventDefault(),b.stopPropagation(),!1}function eb(a,c){function d(){fb(a,c),Ya(),Za()}function e(a){b.error("Erro ao salvar apelido do contrato. ",a)}F.post(c.contractNumber,c.productCode,a).then(d).catch(e)}function fb(a,b){Db.menuList=_.map(Db.menuList,function(c){return c.items=_.map(c.items,function(c){return c.contractNumber===b.contractNumber&&(c.alias=a),c}),c}),Db.productList=_.map(Db.productList,function(c){return c.contractNumber===b.contractNumber&&(c.alias=a),c}),D.setListCache(Db.productList)}function gb(){return""===Db.view.editingAliasName}function hb(a){Db.view.sidebarIsLoading=!1,Db.view.sidebarIsLoadingActive=!1}function ib(){c.isModal=!0,Db.modalStatus.open=!0,O.hasBeenInitialized()?Db.modalStatus.confirmIncome=!1:Db.modalStatus.confirmIncome=!0,Db.modalStatus.error=!0}function jb(){c.isModal=!0,Db.modalStatus.open=!0,Db.modalStatus.cart=!0}function kb(){c.isModal=!1,Db.modalStatus.open=!1,Db.modalStatus.cart=!1}function lb(){c.isModal=!0,Db.modalStatus.open=!0,Db.modalStatus.minhasPropostas=!0}function mb(){var a;if(Db.isInsertedMinhasPropostasMenu)return Db.menuList.findIndex(function(a){return"19"===a.id});var b=Db.menuList.findIndex(function(a){return"18"===a.id});return a="undefined"!==b&&-1!==b?b+1:Db.menuList.length,Db.menuList.splice(a,0,{id:"19",isActive:!1,isEditing:!1,isFocus:!1,isHidden:!1,isExpired:!1,showNewBadge:!0,name:"Minhas Propostas",order:8,shortName:"Minhas Propostas",slug:"minhas propostas",items:[]}),Db.isInsertedMinhasPropostasMenu=!0,Db.menuList.length-1}function nb(a){var b=mb(),c=Db.menuList[b].items;c.push(a),c=vb(c),Db.menuList[b].items=c}function ob(){function a(a){void 0!==a.data.cvg&&null!=a.data.cvg&&nb(wb(a.data.cvg.numeroProposta,a.data.cvg.statusProposta)),void 0!==a.data.refin&&null!=a.data.refin&&nb(xb()),void 0!==a.data.refin&&null!=a.data.cp&&nb(yb())}function c(a){b.error("MinhasPropostasService ERR >>> ",a)}Q.post().then(a).catch(c)}function pb(){D.getProductsListCached().filter(function(a){return 15===a.productCode&&3!==a.paymentSituationCode||12===a.productCode}).length&&Db.menuList.push({id:"16",isActive:!1,isEditing:!1,isFocus:!1,isHidden:!1,isExpired:!1,showNewBadge:!0,name:"Seguros",order:5,shortName:"Seguros",slug:"seguros"})}function qb(){Db.menuList.push({id:"17",isActive:!1,isEditing:!1,isFocus:!1,isHidden:!1,isExpired:!1,showNewBadge:!0,name:"Créditos para você",order:6,shortName:"Créditos para você",slug:"creditos-para-voce",items:ub()})}function rb(){Db.menuList||(Db.menuList=[]),Db.view||(Db.view={}),Db.view.isOpenBanking=!0,Db.menuList.push({id:"OB",isActive:!0,isEditing:!1,isFocus:!0,isHidden:!1,isExpired:!1,showNewBadge:!1,name:"Open Banking",order:1,shortName:"Open Banking",slug:"Open Banking",items:[]})}function sb(){var a={id:"CP",isActive:!1,isPrev:!1,isNext:!1,isEditing:!1,order:2,title:"Contrate Crédito Pessoal BV",subtitle:"",alias:"Contrate Crédito Pessoal BV",isExpired:!1,productCode:17};if(!B.hasBeenInitialized())return a;var b=B.get();return console.log("dataCp ====",b),_.isEmpty(b)?null:a}function tb(){return{id:"CVG",isActive:!1,isPrev:!1,isNext:!1,isEditing:!1,order:3,title:"Contrate Crédito com Veículo em Garantia BV",subtitle:"",alias:"Contrate Crédito com Veículo em Garantia BV",isExpired:!1,productCode:17}}function ub(){return vb([sb(),tb()].filter(function(a){return null!==a}))}function vb(a){return a.sort(function(a,b){return a.order-b.order})}function wb(a,b){return{id:"CVG",isActive:!1,isPrev:!1,isNext:!1,isEditing:!1,order:1,title:"Crédito com veículo em garantia",subtitle:"",alias:"Crédito com veículo em garantia",isExpired:!1,productCode:19,numeroProposta:a,statusProposta:b}}function xb(){return{id:"REFIN",isActive:!1,isPrev:!1,isNext:!1,isEditing:!1,order:2,title:"Refinanciamento Crédito Consignado",subtitle:"",alias:"Refinanciamento Crédito Consignado",isExpired:!1,productCode:19}}function yb(){return{id:"CP",isActive:!1,isPrev:!1,isNext:!1,isEditing:!1,order:3,title:"Crédito Pessoal",subtitle:"",alias:"Crédito Pessoal",isExpired:!1,productCode:19}}function zb(){var a="acceptCookies",b=new Date;b.setTime(b.getTime()+15768e7);var c="expires="+b.toUTCString();document.cookie=a+"=1;"+c+";domain=.bv.com.br;path=/"}function Ab(){$(".sidebar_item__progress").css("display","none"),$(".main_sidebar.small__sidebar.internal__page .main_sidebar__back_wrap").css("visibility","hidden"),$(".main_sidebar.small__sidebar .main_sidebar__breadcrumb_wrap").attr("style","display: flex !important"),$("div.main_sidebar__control").css("display","none"),h.bvResize.isMobile&&($(".main_sidebar__breadcrumb_wrap").css("top","unset"),$(".main_sidebar__breadcrumb_wrap").css("bottom","0"),$(".main_sidebar__breadcrumb_wrap").css("background-color","#ECECEC"),$(".main_sidebar__breadcrumb_wrap").css("height","48px"),$(".main_sidebar__breadcrumb_wrap").css("padding","14px 5px"),$(".main_sidebar__breadcrumb_wrap .breadcrumb_item").css("color","#545454"),$(".main_sidebar__breadcrumb_wrap .breadcrumb_separator").css("color","#545454"),$(".main_sidebar.small__sidebar .sidebar_item").css("padding","10px 20vw 40px 20vw"))}function Bb(){$(".sidebar_item__progress").css("display",""),$(".main_sidebar.small__sidebar.internal__page .main_sidebar__back_wrap").css("visibility","visible"),$(".main_sidebar.small__sidebar .main_sidebar__breadcrumb_wrap").css("display","initial"),$("div.main_sidebar__control").css("display","flex"),h.bvResize.isMobile&&($(".main_sidebar__breadcrumb_wrap").css("top","0"),$(".main_sidebar__breadcrumb_wrap").css("bottom","unset"),$(".main_sidebar__breadcrumb_wrap").css("background-color",""),$(".main_sidebar__breadcrumb_wrap").css("height",""),$(".main_sidebar__breadcrumb_wrap").css("padding","20px 50px"),$(".main_sidebar__breadcrumb_wrap .breadcrumb_item").css("color",""),$(".main_sidebar__breadcrumb_wrap .breadcrumb_separator").css("color",""),$(".main_sidebar.small__sidebar .sidebar_item").css("padding",""))}var Cb,Db=this,Eb=void 0,Fb=a("translate"),Gb=35,Hb=!!document.documentMode;Db.show_limit_bold=!1,Db.translate=Fb,Db.productList=null,Db.menuList=null,Db.userInfo=C,Db.commonRoutes=j,Db.commonUrls=k,Db.campaignRoutes=n,Db.userRoutes=E,Db.creditCardRoutes=m,Db.loanRoutes=l,Db.menuOpened=!1,Db.mobileMenuOpened=!1,Db.modalStatus={open:!1,abandon:!1,addCard:!1,session:!1,billet:!1,preAnalysis:!1,simulator:!1,confirmIncome:!1,minhasPropostas:!1,renegotiation:!1},Db.isUpgradeAddCard=!1,Db.activeIndex=void 0,Db.prevIndex=void 0,Db.nextIndex=void 0,Db.transformPanel=null,Db.editingAlias=!1,Db.internal_page=!1,Db.breadcrumb=[],Db.routeHome=void 0,Db.hideSidebar=!1,Db.permissioning={},Db.hideHeader=!1,Db.hideLoader=!1,Db.flagHeader=!1,Db.styleContent={},Db.view={userName:"",bestBuyDate:null,availableCreditLimit:null,totalCreditLimit:null,progressbar:0,editingAliasName:"",sidebarIsLoading:!1,sidebarIsLoadingActive:!1,showSubtitle:!0,stopWatch:!1,textModalMinhasPropostas:"",textModalBillet:""},Db.onModalSession=null,Db.showModalSession=!1,Db.showModalBillet=!1,Db.openBankingHasAlreadyBeenLoaded=!1,Db.simulatorClick=ha,Db.changePanelArea=Ua,Db.checkPermissions=Va,Db.toggleMenu=ua,Db.closeMenu=wa,Db.toggleMobileMenu=xa,Db.openMobileMenu=ya,Db.closeMobileMenu=za,Db.userMenuActivator={},Db.linkUserMenu=Aa,Db.logout=Ba,Db.closeModal=Ca,Db.closeModalAbandon=na,Db.goToAddCardForm=Da,Db.setPanelByClick=Fa,Db.setPanelByHeaderClick=Ga,Db.prevPanel=Ha,Db.nextPanel=Ia,Db.showEditingAlias=Wa,Db.showEditingAliasInline=Xa,Db.goToHome=$a,Db.changeRouteHome=_a,Db.breadcrumbRedirect=sa,Db.breadcrumbBack=ta,Db.editingAliasLimit=db,Db.saveEditingAlias=eb,Db.hideEditingAlias=Ya,Db.onDisabledButtonAlias=gb,Db.openModalSession=ja,Db.closeModalBillet=oa,Db.openCartModal=jb,Db.closeCartModal=kb,Db.userInfoService=D,Db.pre_analise={},Db.show_limit_option=!1,Db.formatReal=H.formatReal,Db.openMinhasPropostasModal=lb,Db.isInsertedMinhasPropostasMenu=!1,Db.showCarbonEmissionButton=!1,Db.carbonEmissionStatus=null,Db.goToDataUpdate=ba,Db.goToOpenBanking=ca,Db.submitCarbonEmission=Y,Db.onOpenCarbonEmissionModal=Z,Db.onAcceptCarbonEmissionModal=ea,Db.onCloseCarbonEmissionModal=fa,Db.onCloseCarbonEmissionUpdateModal=ga,Db.modalCarbonEmissionConfig=Db.modalCarbonEmissionSuccessConfig=Db.modalEmptyDataConfig={open:!1},c.$on("open-error-modal",function(){ib()}),c.$on("scroll-top",function(){angular.element(".main_content__inner, .main_wrap").scrollTop(0)}),c.$on("initOpenBankingMenu",function(){Db.sidebarText="Confirmação do compartilhamento",Db.isOpenBanking=!0,Db.menuList&&0!==Db.menuList.length||rb(),ia(),ra(),Db.hideSidebarContent=!0;try{Db.breadcrumb=e.current.data.breadcrumb?e.current.data.breadcrumb:[]}catch(a){Db.breadcrumb=toState.data&&toState.data.breadcrumb?toState.data.breadcrumb:[]}});var Ib=c.$on("open-carbon-emission-modal",function(){Z()});d.$on("$destroy",Ib);var Jb=c.$on("open-carbon-submit-emission-modal",function(){Y()});d.$on("$destroy",Jb);var Kb=c.$on(i.STATE_CHANGE_SUCCESS,function(a,b,c,d,e,f){Db.breadcrumb=b.data&&b.data.breadcrumb?b.data.breadcrumb:[],Db.hideSidebar=!(!b.data||!b.data.hideSidebar)&&b.data.hideSidebar,Db.hideSidebarContent=!(!b.data||!b.data.hideSidebarContent)&&b.data.hideSidebarContent,Db.hideHeader=!(!b.data||!b.data.hideHeader)&&b.data.hideHeader,Db.hideLoader=!(!b.data||!b.data.hideLoader)&&b.data.hideLoader,Db.sidebarText=b.data&&b.data.sidebarText,Db.hideHeader?Db.flagHeader=!0:Db.flagHeader&&(Db.styleContent={height:"auto"}),ra(),e.contractNumber!==c.contractNumber&&c.contractNumber&&W();try{Db.routeHome=z.setRoutes(K.getCurrentProduct().data).HOME}catch(g){Db.routeHome=void 0}});d.$on("$destroy",Kb),d.$watch(function(){return e.params&&e.params.isOpenBanking},function(a,b){Db.isOpenBanking=!!a}),d.$watch(function(){return h.bvResize.isMediumToSmall},function(a,b){Ua()}),V(),g(function(){function a(a){for(var b=a+"=",c=decodeURIComponent(document.cookie),d=c.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1);if(0==f.indexOf(b))return f.substring(b.length,f.length)}return""}function b(){if(!(jQuery(".lgpd-consent").size()>0)){jQuery("header").parent().prepend('<div class="lgpd-consent"><div><p>Este site usa cookies e outras tecnologias semelhantes de acordo com os nossos <a href="https://www.bv.com.br/site/termo-de-uso/" target="_blank">Termos de Uso</a> e <a href="https://www.bv.com.br/site/politica-de-privacidade/" target="_blank">Política de Privacidade</a>, o que pode acarretar no tratamento de dados pessoais. Ao continuar navegando, você declara estar ciente dessas condições.</p></div><div><button id="lgpd-consent-button">Entendi</button></div></div>'),R.customPageView({pageName:"BV|AL|navigation|lgpd-alerta"});try{jQuery("#lgpd-consent-button")[0].addEventListener("click",function(){zb(),jQuery(".lgpd-consent").remove(),R.customPageView({pageName:"BV|AL|navigation|lgpd-aceitou"})})}catch(a){}}}a("acceptCookies")||b()},8e3),c.$on("change-sidebar-css",function(){Ab()}),c.$on("reset-sidebar-css",function(){Bb()}),c.$on("open-modal-data-update-empty",function(){Db.modalEmptyDataConfig={open:!0},ta()}),c.$on("openModalSession",ja)}a.$inject=["$filter","$log","$rootScope","$scope","$state","$stateParams","$timeout","$window","commonEvents","commonRoutes","commonUrls","loanRoutes","creditCardRoutes","campaignRoutes","insuranceRoutes","loginRoutes","financingRoutes","mainProductCodes","paymentSituationCodes","rolesMapping","productsCache","inactiveProductFactory","invoiceReceiveMethodFactory","navigationFactory","productsListFactory","routeManagerFactory","insuranceCardsFactory","preAnalysisFactory","userInfo","userInfoService","userRoutes","aliasService","stopWatchService","storeUtilsService","statusTenderService","permissinoningService","productDetailService","invoiceReceiveMethodService","internalPageService","logoutServiceVII","pdecFactory","tokenCSFactory","minhasPropostasService","dataLayerFactory","dataUpdateService","carbonEmissionService","openBankingInteractionService"],angular.module("internetBanking.navigation").controller("NavigationController",a)}(),function(){"use strict";function a(){function a(a,b,c){function d(){b.addClass("active")}function e(){b.removeClass("active")}function f(){b.is(".active")?e():d()}a.config.open=d,a.config.close=e,a.config.toggle=f,b.on("click",f),b.on("blur",e)}return{restrict:"A",scope:{config:"=bvActivator"},link:a}}angular.module("internetBanking.navigation").directive("bvActivator",a)}();