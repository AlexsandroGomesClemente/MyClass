!function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(d,h,i){function j(){var e=null,g=null,h={},i={};C="mainChart-"+d.tab;var j=document.getElementById("contentCanvas");c.createCanvas(j,C),e=document.getElementById(C),g=c.createCTX(e),d.dateStart=d.collections.data.dateInitMoviments,d.dateEnd=d.collections.data.dateEndMoviments,d.lastFourNumber=d.collections.lastFourNumber,d.hasGraficPieCircle=k(d.status.additional,d.collections.data.detailsInvoiceCards);var n=a.orderMovimentInvoiceWithAdditional(d.collections.data,d.lastFourNumber,d.collections.name);if(d.hasGraficPieCircle&&(n[0].name="TITULAR"===n[0].name.toUpperCase()?d.collections.name:n[0].name),d.collections.data.detailsInvoiceCards=n,d.pointsMoviments=p(),d.graph=o(d.collections.data.detailsInvoiceCards),h=t(d.graph,g),i=angular.copy(b.createOptionsConfigChart()),null!==d.chart[C]&&d.chart[C].destroy(),d.chart[C]=new f(g,{type:"line",data:h,options:i}),d.graph.datasets=y(d.graph.datasets),A(d.graph),d.hasGraficPieCircle){for(var q=0,r=0,s=1,u=1;u<d.graph.datasets.length;u++)d.graph.datasets[u].porcentage=b.truncateDecimals(b.getPercentageByOwner(d.graph.datasets[u])),q=m(angular.copy(d.graph.datasets[u]),q,s,u),r+=d.graph.datasets[u].porcentage;if(r<100){d.graph.datasets[s].porcentage+=1,r++;for(var u=angular.copy(r);u<=100&&100!==r;u++)d.graph.datasets[s].porcentage+=1,r++}else if(r>100){for(var v=d.graph.datasets.length,w=1,x=0,u=1;u<v;u++)1!=u||0==d.graph.datasets[u].remaining?(0==x&&0!=d.graph.datasets[u].remaining&&(x=d.graph.datasets[u].remaining.toString().split("."),x=x[1].substring(0,2)),0===d.graph.datasets[u].remaining?w+=1:parseInt(l(d.graph.datasets[u].remaining),10)<parseInt(x,10)&&(x=l(d.graph.datasets[u].remaining),w=u)):(x=d.graph.datasets[u].remaining.toString().split("."),x=x[1].substring(0,2));d.graph.datasets[w].porcentage-=1}}d.hasGraficPieCircle&&z()}function k(a,b){return!!(a||b.length>1)}function l(a){if(0!=a){return a.toString().split(".")[1].substring(0,2)}return 0}function m(a,b,c,d){var e=100*a.sumTotalsTotal/a.sumTotals;return-1!=e.toString().indexOf(".")&&(e=e.toString().split(".")[1],parseInt(e,10)>b&&(b=parseInt(e,10),d)),b}function n(a){return a.movementNational.length>0&&(a.movementNational=a.movementNational.filter(function(a){return"PGTO EFETUADO DEB AUT"!==a.nameEstablishment})),a}function o(a){var b=q(a);return b=r(b),b=s(b)}function p(){var a=moment(new Date(d.datesMoviments.init)),b=moment(new Date(d.datesMoviments.end)),c=-1*parseInt(a.diff(b,"days"),10)+1;c<0&&(c*=-1);for(var e=new Array(c+1).join("0").split(""),f=0;f<e.length;f++)e[f]={dateMoviment:moment(a).add(f,"days").format("DD-MM-YYYY"),valueTotalDay:0,data:[]};return{countMoviments:c,mock:e}}function q(a){for(var c={datasets:[],labels:[]},e=a.length,f=b.getColors(),g=0;g<e;g++)c.datasets[g]={name:b.fixSizeCase(a[g].name),data:w(a[g]),colors:f[g+1],moviments:d.pointsMoviments};return c.datasets.unshift({name:"Total",data:[],colors:f[0],moviments:d.pointsMoviments}),c}function r(a){for(var b,c=a.datasets.length,e=[],f={},g=[],h=[],i=[],j=1;j<c;j++)1===j?(f=angular.copy(v(a.datasets[j].data,a.datasets[j].colors)),a.datasets[j].objMoviments=f,a.datasets[j].reset=f.reset,h=f.reset,e=a.datasets[j].data,g=f.values,b=f.values,i=f.dataMoviment):(f=angular.copy(v(a.datasets[j].data,a.datasets[j].colors)),a.datasets[j].objMoviments=f,a.datasets[j].reset=f.reset,h=f.reset,e=e.concat(a.datasets[j].data),b=f.values,g=f.values.map(function(a,b){return g[b]+=a,g[b]}),i=f.dataMoviment.map(function(a,b){return i[b].data=i[b].data.concat(a.data),i[b]})),a.datasets[j].values=angular.copy(b),b=[];var k=e.sort(x);return a.datasets[0].data=k,a.datasets[0].values=g,a.datasets[0].reset=h,a.datasets[0].dataMoviment=i,d.dataValues.unshift(h),a}function s(a){var b=a.datasets[0].values.map(function(a){return a>0?1:0});return a.labels=b,a}function t(a,b){var c={};a.datasets.length;c.datasets=[],c.labels=a.labels;for(var d=0;d<a.datasets.length;d++)c.datasets[d]={label:a.datasets[d].name,data:0===d?a.datasets[d].values:a.datasets[d].reset,radius:0,borderWidth:1,borderColor:a.datasets[0].colors.hex,backgroundColor:u(a.datasets[d].colors.rgb,a.datasets[d].colors.rgbaWithTransparent,b)};return c}function u(a,b,c){var d=c.createLinearGradient(0,0,0,200);return d.addColorStop(0,b),d.addColorStop(1,a),d}function v(a,b){var c=a.length,e=angular.copy(d.pointsMoviments),f=e.mock.length,g=0,h=[],i=[],j=[],k=a.filter(function(a){if(new Date(a.dateMovement)<new Date(d.dateStart))return a});if(k.length>0){g=k.length;for(var l=0;l<f;l++)for(var m=0;m<g;m++)k[m].colors=b,e.mock[l].dateMoviment.substr(0,2)===moment(new Date(k[m].dateMovement)).format("DD")&&("-"===k[m].sign?(e.mock[l].data.push(k[m]),e.mock[l].valueTotalDay+=k[m].valueAbsoluteMovementReal):d.collections.data.valueTotalInvoice+=k[m].valueAbsoluteMovementReal)}for(var l=0;l<f;l++){for(var m=0;m<c;m++)a[m].colors=b,e.mock[l].dateMoviment===moment(new Date(a[m].dateMovement)).format("DD-MM-YYYY")&&("-"===a[m].sign?(e.mock[l].data.push(a[m]),e.mock[l].valueTotalDay+=a[m].valueAbsoluteMovementReal):d.collections.data.valueTotalInvoice+=a[m].valueAbsoluteMovementReal);h.push(e.mock[l].valueTotalDay),j.push(e.mock[l]),i.push(0)}return d.dataValues.push(h),{periodMoviment:e,values:h,reset:i,dataMoviment:j}}function w(a){return _.union(a.movementNational,a.movementInternational).sort(x)}function x(a,b){return new Date(a.dateMovement)>=new Date(b.dateMovement)?1:-1}function y(a){var b=(a.length,d.collections.data.detailsInvoiceCards.length),c=0,e=0;a[0].sumTotalsTotal=d.collections.data.valueTotalInvoice,a[0].sumTotals=d.collections.data.valueTotalInvoice;for(var f=0;f<b;f++)c=d.collections.data.detailsInvoiceCards[f].valueSubTotalNationalMovement,e=d.collections.data.detailsInvoiceCards[f].valueSubTotalInternationalMovement,e>0&&(e*=d.collections.data.valuePriceQuoteDolarInvoice),a[f+1].sumTotalsTotal=c+e,a[f+1].sumTotals=d.collections.data.valueTotalInvoice;return a}function z(){var a,f=document.querySelector("#mainChart-legend"),h=d.graph.datasets;if(h.length<=2)return d.view.hasAdditionalGrafic=!0,c.showAddAddicionalCards(document.querySelector(".graph-legend__component")),c.showAddAddicionalCards(document.querySelector(".select-owner__component")),!1;var i=!0;for(document.querySelector("#selectGrafic").addEventListener("click",function(a){a.preventDefault(),i=!i,i?this.classList.remove("__open"):this.classList.add("__open")}),a=1;a<h.length;a++)if(!(h[a].porcentage<0)){var j=document.createElement("a");j.classList.add("graph-legend__item");var k="<div class='graph-legend__item__content'><div class=\"pie -"+h[a].colors.className+'" rel="'+h[a].porcentage+'"><section class="mask"></section><section class="one"></section><section class="two"></section><section class="three"></section><div class="content"><span><small>%</small></span></div></div><span class="graph-legend__owner">'+h[a].name+'</span><span class="graph-legend__value">R$ '+b.formatMoney(b.getTotalAmountByOwner(h[a]))+"</span></div>";j.innerHTML=k,j.href="#",j._i=a,j.addEventListener("mouseenter",function(){d.chart[C].config.data.datasets[this._i].data=d.dataValues[this._i],d.chart[C].config.data.datasets[this._i].borderColor=d.graph.datasets[this._i].colors.hex,d.chart[C].update()}),j.addEventListener("mouseleave",function(){this.locked||(d.chart[C].config.data.datasets[this._i].data=d.graph.datasets[this._i].reset,d.chart[C].config.data.datasets[this._i].borderColor=d.graph.datasets[0].colors.hex,d.chart[C].update())}),j.addEventListener("click",function(a){a.preventDefault(),this.locked?(this.locked=!1,d.chart[C].config.data.datasets[this._i].data=d.graph.datasets[this._i].reset,this.classList.remove("-active")):(this.locked=!0,d.chart[C].config.data.datasets[this._i].data=d.dataValues[this._i],this.classList.add("-active")),d.chart[C].update()}),f.appendChild(j)}if(h.length<7){var j=document.createElement("a");j.classList.add("graph-legend__item"),j.classList.add("-hire-aditional");var k='<div class="graph-legend__item__content"><div class="graph-legend__plus">+</div><div class="graph-legend-add__value">Solicitar<br/> cartão</div></div>';j.innerHTML=k,j.href="#",j.addEventListener("click",function(a){a.preventDefault(),g.go(e.SOLICITATION_ADDITIONAL_CARD)}),f.appendChild(j)}for(a=1;a<h.length;a++){var l=document.createElement("li"),m=document.createElement("a");l.classList.add("select__item"),m.classList.add("select__item__link"),m.innerHTML='<span class="select-owner__title -'+h[a].colors.className+'">'+h[a].name+'</span><span class="select-owner__value">R$ '+b.formatMoney(h[a].sumTotalsTotal)+"</span>",l.appendChild(m),m._i=a,m.addEventListener("click",function(a){a.preventDefault(),a.stopPropagation();for(var b=1;b<h.length;b++)d.chart[C].config.data.datasets[b].data=h[b].reset,d.chart[C].config.data.datasets[b].borderColor=d.graph.datasets[0].colors.hex;d.chart[C].config.data.datasets[this._i].data=d.dataValues[this._i],d.chart[C].config.data.datasets[this._i].borderColor=d.graph.datasets[this._i].colors.hex,d.chart[C].update(),document.querySelector(".select-owner__item-placeholder-value").innerHTML=this.innerHTML,i=!1,document.querySelector("#selectGrafic").classList.remove("__open")}),document.querySelector("#listSubItem").appendChild(l)}}function A(a){var b=document.getElementById("pointsContent");c.createToolTip(b,a,B)}function B(a,c,d){var e=[];e=a.dataMoviment[c].dateMoviment.split("-");var f="",g=5,h=0,i="invoice-tooltips-content";return h=d-6,c>=h?i="invoice-tooltips-content -fix-"+c:c<6&&(i="invoice-tooltips-content -fix-"+c),f='<div class="'+i+'"><div class="graph-tooltip__component"><div class="graph-tooltip__date">'+b.formatDayMoviment(e[2]+"/"+e[1]+"/"+e[0])+'</div><ul class="graph-tooltip__list">',f+=a.dataMoviment[c].data.map(function(a,c){if(c<5)return'<li class="graph-tooltip__item"><div class="graph-tooltip__item-color -'+a.colors.className+'"></div><div class="graph-tooltip__item-title">'+b.fixSizeCase(a.nameEstablishment)+'</div><div class="graph-tooltip__item-owner">'+b.fixSizeCase(a.name.split(" ")[0])+'</div><div class="graph-tooltip__item-value">R$ '+b.formatMoney(a.valueAbsoluteMovementReal)+"</div></li>"}).join(" "),a.dataMoviment[c].data.length>g&&(f+='<li class="graph-tooltip__item -plus-charges"><div class="graph-tooltip__item-plus-charges">+ '+parseInt(a.dataMoviment[c].data.length-g)+'</div><div class="graph-tooltip__item-value">...</div></li>'),f+='<li class="graph-tooltip__total"><div class="graph-tooltip__total-label">Total</div><div class="graph-tooltip__total-value">R$ '+b.formatMoney(a.values[c])+"</div></li>",f+="</ul></div></div>"}d.collections=angular.copy(d.collections),d.status=d.collections.statusInvoice,d.datesMoviments=d.collections.datesMoviments,d.dataValues=[],d.view={},d.view.additional=d.status.additional,d.view.open=d.status.open,d.view.close=d.status.close,d.view.hasAdditionalGrafic=!1,d.status.open&&d.collections.data.hasOwnProperty("valueParcialTotalInvoice")&&(d.collections.data.valueTotalInvoice=d.collections.data.valueParcialTotalInvoice),d.collections.data.valueBalancePrevious<0&&(d.collections.data.valueTotalInvoice+=-1*d.collections.data.valueBalancePrevious),d.collections.data.detailsInvoiceCards[0]=n(d.collections.data.detailsInvoiceCards[0]),d.tab=d.collections.tab,d.grafic={},d.chart={"mainChart-home":null,"mainChart-0":null,"mainChart-1":null,"mainChart-2":null};var C="";j()}return{link:j,templateUrl:d.GRAPHIC_TEMPLATE,restrict:"E",scope:{collections:"="}}}a.$inject=["movementExtractFactory","graphicFactory","graphicDOMFactory","creditCardTemplateUrls","creditCardRoutes","ChartInvoice","$state","$timeout","$window"],angular.module("internetBanking.creditCard").directive("bvGraphic",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(a){function c(){h(),i(b.INVOICE_BILLET)}function g(b){a.data.valueSelect=a.data.data[b].value,a.data.quantityInstallmentSelect=a.data.data[b].quantityInstallment}function h(){e.addValuesBilletActive("installment",a.data.valueSelect,a.data.quantityInstallmentSelect)}function i(a){f.go(a)}function j(){d.set("dueDate",a.data.dueDateInvoice),d.set("valueTotalInvoice",a.data.valueTotalInvoice),d.set("valueMinimumPayment",a.data.minimumValuePayment),i(b.TAXES_LIMIT_INSTALLMENT_OF_INVOICES)}a.data=a.data,a.index=a.index,a.dataView={valueSelect:a.data.valueSelect,quantityInstallmentSelect:a.data.quantityInstallmentSelect,data:a.data.data,index:a.index},a.onSendBillet=c,a.onRadio=g,a.onLink=j,console.log(a.dataView)}return{link:g,templateUrl:a.OPTIONS_INSTALLMENTS_TEMPLATE,restrict:"E",scope:{data:"=",index:"="}}}a.$inject=["creditCardTemplateUrls","creditCardRoutes","numberToCurrencyFactory","invoiceDetailCreditCardCurrentService","creditCardStateManagement","$state"],angular.module("internetBanking.creditCard").directive("bvOptionsInstallments",a)}(),function(){"use strict";function a(a,b,c){function d(a){a.data=a.data,a.dataView={value:b.numberToCurrency(a.data.valueAlternative,"R$ "),dueDateAlternative:c.format(a.data.dueDateAlternative,"@SITE-BILLET-GENERATED-DAY-FORMAT"),index:a.index}}return{link:d,templateUrl:a.ALTERNATIVE_DISCLAMER_TEMPLATE,restrict:"E",scope:{data:"=",index:"="}}}a.$inject=["creditCardTemplateUrls","numberToCurrencyFactory","formatDateFactory"],angular.module("internetBanking.creditCard").directive("bvAlternativeDisclamer",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(e){function g(){var a,b=d&&d.contractData&&d.contractData.servicesContracted||[],c=[];if(b&&b.length){for(var e=0;b.length>e;e++)a=b[e].descriptionService.toLowerCase(),a.indexOf("merece")>-1?c=[{name:"Ver extrato de pontos",route:"app.navigation.cc.deserveProgram.extractPoints",hash:""},{name:"Resgate de pontos",route:"app.navigation.cc.deserveProgram.rescuePoints",hash:""},{name:"Ver pontos a expirar",route:"app.navigation.cc.deserveProgram.seePointsExpiring",hash:""},{name:"Conheça o BV Merece",route:"app.navigation.cc.deserveProgram.knowTheProgramDeserves",hash:""},{name:"Como acumular pontos",route:"app.navigation.cc.deserveProgram.howToAccumulatePoints",hash:""},{name:"Conheça os detalhes",route:"app.navigation.cc.deserveProgram.discountAnnuity",hash:""}]:a.indexOf("netpoints")>-1&&(c=[{name:"Conheça o programa Netpoints",route:"app.navigation.cc.netpoints.knowTheProgramNetPoints",hash:""},{name:"Como acumular pontos",route:"app.navigation.cc.netpoints.howToAccumulatePoints",hash:""}]),c.map(function(a){j.push(a)});0===b.length&&(c=[{name:"Promoções",route:f.HOME,hash:"Beneficios"},{name:"Conheça promoções e benefícios",externalPage:"https://www.bv.com.br"}].map(function(a){j.push(a)})),j=_.sortByOrder(j,["name"],["asc"])}}function h(a){return a.length<2?i(""):(a=a.toLowerCase(),i(_.map(j,function(b){if(b.name.toLowerCase().indexOf(a)>-1)return b})))}function i(a){return a=_.remove(a,function(a){return void 0!==a}),e.data=a,a}var j=[{name:"Benefícios",route:f.HOME,hash:"Beneficios"},{name:"Segurança",route:f.HOME,hash:"Seguranca"},{name:"Bloqueio de cartão",route:f.HOME,hash:"Seguranca"},{name:"Histórico de faturas",route:f.HOME,hash:"HistoricoFatura"},{name:"Solicitações",route:f.HOME,hash:"Solicitacoes"},{name:"Limites de crédito e taxas",route:f.HOME,hash:"LimitesTaxas"},{name:"Atendimento",route:f.HOME,hash:"Atendimento"},{name:"Atualizar e-mail",route:f.SECURITY_UPDATE_EMAIL,hash:""},{name:"Fatura",route:f.INVOICE_NEXT,hash:"Fatura"},{name:"Alterar senha do cartão",route:"app.navigation.cc.security.changeCard.changeCardPassword",hash:""},{name:"Pagamento de contas",route:"app.navigation.cc.solicitation.payment.accountPayment",hash:""},{name:"Solicitar cartão adicional",route:"app.navigation.cc.solicitation.additionalCard",hash:""},{name:"Alterar recebimento de fatura",route:"app.navigation.cc.solicitation.changeInvoiceReceiveMethod",hash:""},{name:"Fatura por e-mail",route:"app.navigation.cc.solicitation.changeInvoiceReceiveMethod",hash:""},{name:"Aviso viagem",route:"app.navigation.cc.solicitation.travelNotification",hash:"",role:"IBBV_CARTAO_SERVICOS_AVISODEVIAGEM_SOLICITAR"},{name:"Sobre parcelamento de fatura",route:"app.navigation.cc.taxesLimits.installmentOfInvoices",hash:"",role:"IBBV_CARTAO_SERVICOS_PARCELAMENTOFATURA_SOLICITAR"},{name:"Consultar limites e tarifas",route:"app.navigation.cc.taxesLimits.installmentOfInvoices",hash:""},{name:"Aumento de limites",route:"app.navigation.cc.taxesLimits.limitIncrease",hash:""},{name:"Cadastrar limite do adicional",route:"app.navigation.cc.taxesLimits.registerAdditionalLimit",hash:""},{name:"Desconto de anuidade",route:f.DISCOUNT_ANNUITY,hash:""}];g(),e.close=function(){i(""),e.ngModel="",e.search=!1},e.getValue=function(){h(e.ngModel)},e.click=function(d){if(d.externalPage)return c.open(d.externalPage,"_blank"),e.close(),void i("");b.current.name!==d.route?b.go(d.route):a.hash(d.hash),e.close(),i("")},e.keyDown=function(){var a=h(e.ngModel);a.length>0&&e.click(a[0])}}return{link:g,require:"ngModel",templateUrl:e.SEARCH_MENU,restrict:"E",scope:{ngModel:"=?",text:"@?",search:"=?",list:"=?"}}}a.$inject=["$location","$state","$window","currentProductDetailsService","creditCardTemplateUrls","creditCardRoutes"],angular.module("internetBanking.creditCard").directive("bvSearchMenu",a)}(),function(){"use strict";function a(a,b,c,d){function e(a){function b(a,b,d){if(a&&0===a[b])return 0;var e=c.numberToCurrency(a&&a[b],d);return a&&"+"===a.sign?"-"+e:e}function d(b){""===a.accordionActive?a.accordionActive=b:a.accordionActive=""}if(a.data=angular.copy(a.colletions),a.data.limitShow){for(var e=[],f=0;f<a.data.limitShow;f++)e.push(a.data.list[f]),e[f].labelRealValue=b(e[f],"valueAbsoluteMovementReal","R$ "),e[f].labelDollarValue=b(e[f],"valueAbsoluteMovementDolar","US$ ");a.data.list=e}a.dataView={hasTitle:a.data.hasTitle,notop:a.data.notop,list:a.data.list},a.showAcordion=d,a.accordionActive="",a.value=""}return{link:e,templateUrl:a.LIST_EXTRACT_TEMPLATE,restrict:"E",scope:{colletions:"="}}}a.$inject=["creditCardTemplateUrls","creditCardRoutes","numberToCurrencyFactory","$state"],angular.module("internetBanking.creditCard").directive("bvListExtract",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(a){function g(){j(),k()}function h(b,c,d){a.dataView.inputDisabled=b,a.dataView.disabledButton=b,"minimum"==d?(a.dataView.inputModelInvoice=c,a.dataView.total.descriptionVisible=!0,a.dataView.minimum.descriptionVisible=!1,a.dataView.valueDisabled=!1):"total"==d?(a.dataView.inputModelInvoice=c,a.dataView.total.descriptionVisible=!1,a.dataView.minimum.descriptionVisible=!0,a.dataView.valueDisabled=!1):"outro"!=d&&"alternative"!=d||(a.dataView.total.descriptionVisible=!0,a.dataView.minimum.descriptionVisible=!0,"outro"==d?(a.dataView.inputModelInvoice=c,a.dataView.valueDisabled=!1):a.dataView.valueDisabled=!0),a.type=d,a.dataView.valueSelect=c}function i(){var b=c.currencyToNumber(a.dataView.inputModelInvoice,"R$ ");a.dataView.disabledButton=b>0}function j(){var b="alternative"===a.type?a.dataView.inputModelAlternative:a.dataView.inputModelInvoice,d="alternative"===a.type?"alternative":"billet";e.addValuesBilletActive(d,c.currencyToNumber(b,"R$ "))}function k(){f.go(b.INVOICE_BILLET)}a.type="alternative",a.data=a.data,a.dataView={inputDisabled:!0,disabledButton:!0,dueDateAlternative:d.format(a.data.alternativeDueDate,"@SITE-COMMON-SHORTDATE-MOMENT"),inputModelInvoice:c.numberToCurrency(a.data.totalValueInvoice,"R$ "),inputModelAlternative:c.numberToCurrency(a.data.totalValueAlternative,"R$ "),total:{value:c.numberToCurrency(a.data.totalValueInvoice,"R$ "),descriptionVisible:!0},minimum:{value:c.numberToCurrency(a.data.minimumValuePayment,"R$ "),descriptionVisible:!0},index:a.index,totalValueInvoiceAlternative:"",valueDisabled:!0,valueSelect:c.numberToCurrency(a.data.totalValueAlternative,"R$ ")},a.onRadio=h,a.onChange=i,a.onSendBillet=g,a.onOpenModalAlternative=a.data.onOpenModalAlternative}return{link:g,templateUrl:a.ALTERNATIVE_EXPIRATION_PAYMENT_TEMPLATE,restrict:"E",scope:{data:"=",index:"="}}}a.$inject=["creditCardTemplateUrls","creditCardRoutes","numberToCurrencyFactory","formatDateFactory","creditCardStateManagement","$state"],angular.module("internetBanking.creditCard").directive("bvAlternativeExpirationPayment",a)}(),function(){"use strict";function a(a){function b(a){function b(b){a.data.items[b].open=!a.data.items[b].open}a.data=a.colletions,console.log("collections",a.data),a.onClickTogge=b}return{link:b,templateUrl:a.LIST_ACCORDION_TEMPLATE,restrict:"E",scope:{colletions:"="}}}a.$inject=["creditCardTemplateUrls"],angular.module("internetBanking.creditCard").directive("bvAccordionInvoice",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(a){function h(){k(),l()}function i(b,c,d){a.dataView.inputDisabled=b,a.dataView.disabledButton=b,a.dataView.inputModel=c,"minimum"==d?(a.dataView.total.descriptionVisible=!0,a.dataView.minimum.descriptionVisible=!1):"total"==d?(a.dataView.total.descriptionVisible=!1,a.dataView.minimum.descriptionVisible=!0):d||(a.dataView.total.descriptionVisible=!0,a.dataView.minimum.descriptionVisible=!0)}function j(){var b=d.currencyToNumber(a.dataView.inputModel,"R$ ");a.dataView.disabledButton=b>0}function k(){g.$emit(c.SPINNING_START,{target:"billet-spinner"}),e.addValuesBilletActive("billet",d.currencyToNumber(a.dataView.inputModel,"R$ "))}function l(){f.go(b.INVOICE_BILLET)}a.data=a.data,console.log("invoice-payment",a.data),a.dataView={inputDisabled:!0,disabledButton:!0,inputModel:d.numberToCurrency(a.data.totalValueInvoice,"R$ "),total:{value:d.numberToCurrency(a.data.totalValueInvoice,"R$ "),descriptionVisible:!1},minimum:{value:d.numberToCurrency(a.data.minimumValuePayment,"R$ "),descriptionVisible:!0},index:a.index},a.onSendBillet=h,a.onRadio=i,a.onChange=j}return{link:h,templateUrl:a.INVOICE_PAYMENT_TEMPLATE,restrict:"E",scope:{data:"=",index:"="}}}a.$inject=["creditCardTemplateUrls","creditCardRoutes","commonEvents","numberToCurrencyFactory","creditCardStateManagement","$state","$rootScope"],angular.module("internetBanking.creditCard").directive("bvInvoicePayment",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(a){function h(){i(),j()}function i(){g.$emit(b.SPINNING_START,{target:"billet-spinner"}),e.addValuesBilletActive("loosePayment",d.currencyToNumber(a.dataView.inputModel,"R$ "))}function j(){f.go(c.INVOICE_BILLET)}function k(b,c){a.dataView.disabledButton=b,a.dataView.inputDisabled=b,a.dataView.inputModel=c}function l(){var b=d.currencyToNumber(a.dataView.inputModel,"R$ ");a.dataView.disabledButton=!(b>0)}a.dataView={inputDisabled:!1,disabledButton:!1,inputModel:d.numberToCurrency(a.data.valueTotalInvoice,"R$ "),invoiceValue:d.numberToCurrency(a.data.valueTotalInvoice,"R$ ")},a.disabledButton=!1,a.onSendBillet=h,a.onRadio=k,a.onChange=l}return{templateUrl:a.ANTICIPATED_PAYMENT_TEMPLATE,restrict:"E",scope:{data:"="},link:h}}a.$inject=["creditCardTemplateUrls","commonEvents","creditCardRoutes","numberToCurrencyFactory","creditCardStateManagement","$state","$rootScope"],angular.module("internetBanking.creditCard").directive("bvAnticipatedPayment",a)}(),function(){"use strict";function a(a,b){function c(a){function c(){function b(a){a.open=!a.open}h(),a.onClickTogge=b}function d(a){a.preventDefault(),f(),i&&(g(),i=!1),$(this).find(".list-accordion__item").addClass("-active"),$(this).find(".list-accordion__sub-item").addClass("-active"),$(this).off("click",d),$(this).on("click",e)}function e(a){a.preventDefault(),f(),g(),$(this).off("click",e),$(this).on("click",d)}function f(){$(".list-accordion__item.-with-subItems.-active").removeClass("-active"),$(".list-accordion__sub-item.-active").removeClass("-active")}function g(){$("#invoice-summary0").off("click",e),$("#invoice-summary0").on("click",d)}function h(){var c={totalNational:{text:b("translate")("@SITE-CARTAO-CREDITO-FATURA-RESUMO-TOTAL-NACIONAL")},totalInternational:{text:b("translate")("@SITE-CARTAO-CREDITO-FATURA-RESUMO-TOTAL-INTERNACIONAL")},totalIvoice:{text:b("translate")("@SITE-CARTAO-CREDITO-FATURA-RESUMO-TOTAL-FATURA-DESCRICAO")}};a.data.invoiceOpen&&(c={totalNational:{text:b("translate")("@SITE-CARTAO-CREDITO-FATURA-RESUMO-TOTAL-NACIONAL-PARCIAL")},totalInternational:{text:b("translate")("@SITE-CARTAO-CREDITO-FATURA-RESUMO-TOTAL-INTERNACIONAL-PARCIAL")},totalIvoice:{text:b("translate")("@SITE-CARTAO-CREDITO-FATURA-RESUMO-TOTAL-FATURA-DESCRICAO-PARCIAL")}}),angular.merge(a.data,c)}a.data=a.colletions,a.showSubItems=d,a.hiddenSubItems=e;var i=!0;c()}return{link:c,templateUrl:a.SUMMARY_TEMPLATE,restrict:"E",scope:{colletions:"="}}}a.$inject=["creditCardTemplateUrls","$filter"],angular.module("internetBanking.creditCard").directive("bvSummary",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(a,g,h){function i(b,e){var f=0,g=a.data.invoiceData;1===g.length?(f=2,b.tab=0):2===g.length?g[e].invoiceOpen?(f=2,b.tab=1):(f=1,b.tab=0):(f=e,b.tab=e),d.set("tabActive",null,f),d.set("indiceInvoicesActive",null,b.tab),c.setALL(j(b,e)),k(a.routesInvoice[f])}function j(b,c){return{tab:b.tab,index:c,openInvoice:b.invoiceOpen,lastFourNumber:a.data.lastFourNumber,dueDate:a.data.invoiceData[c].dateDesktop,lastInvoices:a.data.invoiceData,statusInvoice:a.data.statusInvoice,valueTotalInvoice:a.data.invoiceData[c].valueTotal,scroll:null,lineScroll:null}}function k(a){e.go(a)}a.data=angular.copy(a.collections),a.routesInvoice=[b.INVOICE_PREVIOUS,b.INVOICE_CURRENT,b.INVOICE_NEXT];var l=angular.copy(a.data.invoiceData);a.dataView={invoices:l.reverse()},a.onClickOpenInvoice=i,a.$watch(function(){return f.bvResize.isMediumToSmall},function(b,c){a.dataView.isMobile=b})}return{link:g,templateUrl:a.HISTORY_INVOICE_TEMPLATE,restrict:"E",require:"^bvResize",scope:{collections:"="}}}a.$inject=["creditCardTemplateUrls","creditCardRoutes","invoiceDetailCreditCardCurrentService","invoiceDataCurrentService","$state","$window"],angular.module("internetBanking.creditCard").directive("bvHistoryInvoices",a)}(),function(){"use strict";function a(a,b,c){function d(a){function d(){a.dataView=e(a.data),a.statusInvoice=a.data.status}function e(a){var b=[];return a.payments.length>0?b=a.payments.map(function(a,b){return{label:a.descriptionPayment,descriptionDesktop:g(a.dueDate),descriptionMobile:h(a.dueDate),value:f(a)}}):b.push({label:"Pagamento",descriptionDesktop:"",descriptionMobile:"",value:c.numberToCurrency(0,"R$ ")}),b.push({label:"Saldo anterior",descriptionDesktop:"Referente a diferença do valor pago e o valor da fatura",descriptionMobile:"Referente a diferença do valor pago e o valor da fatura",value:c.numberToCurrency(a.valueBalancePrevious,"R$ ")}),b}function f(a){var b=c.numberToCurrency(a.valueAbsolutePayment,"R$ ");return"+"===a.sign?"-"+b:b}function g(a){return b.format(a,"@SITE-COMMON-SHORTDATE-MOMENT-DAY")+" "+i(b.formatDateMonth(a))+" "+b.format(a,"@SITE-COMMON-SHORTDATE-MOMENT-YEAR")}function h(a){return moment(a).format("DD/MM/YYYY")}function i(a){return a.charAt(0).toUpperCase()+a.slice(1)}a.data=a.colletions,d()}return{link:d,templateUrl:a.PREVIOUS_PAYMENT_TEMPLATE,restrict:"E",scope:{colletions:"="}}}a.$inject=["creditCardTemplateUrls","formatDateFactory","numberToCurrencyFactory"],angular.module("internetBanking.creditCard").directive("bvPreviousPayment",a)}(),function(){"use strict";function a(a,b,c,d){function e(a){function e(){return[{label:g(0),valueReal:c.numberToCurrency(a.data.valueTotalNational,"R$ "),valueDolar:0,sup:!1},{label:g(1),valueReal:c.numberToCurrency(a.data.valueTotalInternationalMovement,"R$ "),valueDolar:c.numberToCurrency(a.data.valueTotalInternationalMovementDolar,"US$ "),sup:!0},{label:f(),valueReal:c.numberToCurrency(a.data.valuePriceQuoteDolarInvoice,"R$ "),valueDolar:0,sup:!0}]}function f(){return"Cotação do dólar em "+b.format(a.data.datePriceQuoteInvoice,"@SITE-BILLET-GENERATED-DAY-FORMATFULL")}function g(b){var c=[d("translate")("@SITE-CARTAO-CREDITO-FATURA-RESUMO-TOTAL-NACIONAL"),d("translate")("@SITE-CARTAO-CREDITO-FATURA-RESUMO-TOTAL-INTERNACIONAL")];return a.data.invoiceOpen&&(c=[d("translate")("@SITE-CARTAO-CREDITO-FATURA-RESUMO-TOTAL-NACIONAL-PARCIAL"),d("translate")("@SITE-CARTAO-CREDITO-FATURA-RESUMO-TOTAL-INTERNACIONAL-PARCIAL")]),c[b]}a.data=a.colletions.data,a.dataView=e()}return{link:e,templateUrl:a.TOTAL_PAYMENT_TEMPLATE,restrict:"E",scope:{colletions:"="}}}a.$inject=["creditCardTemplateUrls","formatDateFactory","numberToCurrencyFactory","$filter"],angular.module("internetBanking.creditCard").directive("bvTotalPayment",a)}(),function(){"use strict";function a(a,b){function c(a){a.data=a.colletions,a.data.annuity&&(a.data.annuity.futureDebit=b.numberToCurrency(a.data.annuity.futureDebit,"R$ "),a.data.annuity.nextPeriodDebit=b.numberToCurrency(a.data.annuity.nextPeriodDebit,"R$ ")),a.data.installment&&(a.data.installment.futureDebit=b.numberToCurrency(a.data.installment.futureDebit,"R$ "),a.data.installment.nextPeriodDebit=b.numberToCurrency(a.data.installment.nextPeriodDebit,"R$ ")),a.data.total&&(a.data.total.futureDebit=b.numberToCurrency(a.data.total.futureDebit,"R$ "),a.data.total.nextPeriodDebit=b.numberToCurrency(a.data.total.nextPeriodDebit,"R$ "))}return{link:c,templateUrl:a.FUTURE_CHARGES_TEMPLATE,restrict:"E",scope:{colletions:"="}}}a.$inject=["creditCardTemplateUrls","numberToCurrencyFactory"],angular.module("internetBanking.creditCard").directive("bvFutureCharges",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(a){function f(a){for(var b=a.length,c=[],d=0;d<b;d++)a[d].payments.length>0&&(c=c.concat(a[d].payments));return c}function g(a){a.open=!a.open}function h(b){""===a.accordionActive?a.accordionActive=b:a.accordionActive=""}function i(a,b,d){if(b){var e=["list-prices-item__title -magenta","list-prices-item__title -purple","list-prices-item__title -orange","list-prices-item__title -blue","list-prices-item__title -green","list-prices-item__title -yellow"];return{text:a.name+" - "+a.lastFourNumber,value:c.numberToCurrency(a.valueSubTotalNationalMovement,"R$ "),color:e[d]}}return a.detailsInvoiceCards[0].name+" - "+a.detailsInvoiceCards[0].lastFourNumber}function j(a,b){return[{label:p(0,b),valueReal:c.numberToCurrency(a.valueSubTotalNationalMovement,"R$ "),valueDolar:0,sup:!1},{label:p(1,b),valueReal:c.numberToCurrency(a.valueSubTotalNationalMovement,"R$ "),valueDolar:c.numberToCurrency(a.valueSubTotalInternationalMovement,"US$ "),sup:!0}]}function k(a){var b=[];return a.payments.length>0?b=a.payments.map(function(a,b){return{label:a.descriptionPayment,descriptionDesktop:m(a.dueDate),descriptionMobile:n(a.dueDate),value:l(a)}}):b.push({label:"Pagamento",descriptionDesktop:"",descriptionMobile:"",value:c.numberToCurrency(0,"R$ ")}),b.push({label:"Saldo anterior",descriptionDesktop:"Referente a diferença do valor pago e o valor da fatura",descriptionMobile:"Referente a diferença do valor pago e o valor da fatura",value:a.valueBalancePrevious}),b}function l(a){var b=c.numberToCurrency(a.valueAbsolutePayment,"R$ ");return"+"===a.sign?"-"+b:b}function m(a){return b.format(a,"@SITE-COMMON-SHORTDATE-MOMENT-DAY")+" "+o(b.formatDateMonth(a))+" "+b.format(a,"@SITE-COMMON-SHORTDATE-MOMENT-YEAR")}function n(a){return moment(a).format("DD/MM/YYYY")}function o(a){return a?a.charAt(0).toUpperCase()+a.slice(1):a}function p(a,b){var c=[e("translate")("@SITE-CARTAO-CREDITO-FATURA-RESUMO-SUBTOTAL-NACIONAL"),e("translate")("@SITE-CARTAO-CREDITO-FATURA-RESUMO-SUBTOTAL-INTERNACIONAL")];return b&&(c=[e("translate")("@SITE-CARTAO-CREDITO-FATURA-RESUMO-SUBTOTAL-NACIONAL-PARCIAL"),e("translate")("@SITE-CARTAO-CREDITO-FATURA-RESUMO-SUBTOTAL-INTERNACIONAL-PARCIAL")]),c[a]}function q(a){var b=angular.copy(a);return a<0?(b*=-1,a="-"+c.numberToCurrency(b,"R$ ")):a=0==a?c.numberToCurrency(b,"R$ "):"-"+c.numberToCurrency(b,"R$ "),a}var r=d.orderMovimentInvoiceWithAdditional(a.collections.data,a.collections.lastFourNumber,a.collections.name);r[0].name="TITULAR"===r[0].name.toUpperCase()?a.collections.name:r[0].name,a.collections.data.detailsInvoiceCards=r,a.dataView={},
a.dataView.title=i(a.collections.data);var s={};s.payments=f(a.collections.data.detailsInvoiceCards),s.valueBalancePrevious=q(a.collections.data.valueBalancePrevious),a.dataView.previousPayment=k(s);var t={},u=d.filterDataExtract(a.collections.data.detailsInvoiceCards[0]);t.extract=u,t.dataSubTotal=j(a.collections.data.detailsInvoiceCards[0],a.collections.invoiceOpen),a.dataView.cardHolder=t;var v={};v.data=[];for(var w=a.collections.data.detailsInvoiceCards,x=1;x<w.length;x++)v.data.push({title:i(w[x],!0,x),extracts:d.filterDataExtract(w[x]),open:!1,total:j(w[x],a.collections.invoiceOpen)});a.dataView.addicitionalCards=v,a.onAddCards=g,a.cacheClicked=!1,a.showAcordion=h,a.accordionActive="",a.value=""}return{link:f,templateUrl:a.LIST_ADDCIONAL_CARDS_TEMPLATE,restrict:"E",scope:{collections:"="}}}a.$inject=["creditCardTemplateUrls","formatDateFactory","numberToCurrencyFactory","movementExtractFactory","$filter"],angular.module("internetBanking.creditCard").directive("bvListAddicionalCards",a)}(),function(){"use strict";function a(a,b,c){function d(d,e,f){function g(){d.$watch(function(){return d.menuItems},function(){b(function(){h()},0)}),angular.element(a).bind(c.RESIZE,function(){i&&b.cancel(i),i=b(function(){h()},50)})}function h(){var a=angular.element(".list-submenu-wrapper").height();d.hasMoreButton=a>80}var i;g()}return{link:d,restrict:"A",scope:{hasMoreButton:"=hasMoreButton",menuItems:"=menuItems"}}}a.$inject=["$window","$timeout","commonEvents"],angular.module("internetBanking.creditCard").directive("bvMoreButtonInvoiceMenu",a)}(),function(){"use strict";function a(a,b,c){function d(a){function b(a,b,d){if(0===a[b])return 0;var e=c.numberToCurrency(a[b],d);return"+"===a.sign?"-"+e:e}if(a.data=angular.copy(a.collections),a.data.limitShow){for(var d=[],e=0;e<a.data.limitShow;e++)d.push(a.data.list[e]),d[e].labelRealValue=b(d[e],"valueAbsoluteMovementReal","R$ "),d[e].labelDollarValue=b(d[e],"valueAbsoluteMovementDolar","US$ ");a.data.list=d}a.dataView={hasTitle:a.data.hasTitle,notop:a.data.notop,list:a.data.list,resume:!!a.data.limitShow,value:""}}return{link:d,templateUrl:a.LIST_TRANSACTIONS,restrict:"E",scope:{collections:"="}}}a.$inject=["creditCardTemplateUrls","creditCardRoutes","numberToCurrencyFactory"],angular.module("internetBanking.creditCard").directive("bvListTransactions",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W){function X(){if(G=Z(G,"tab"),G=$(G),j.init(),j.set("invoices",null,G),Y(),null===b.getCreditCardCurrent().invoices.currentInvoice)_(aa);else{ba(b.getCreditCardCurrent().invoices.currentInvoice,!1);var a=1===G.length?"checkOnlyOneInvoice":"checkStatus";if(gb.statusInvoice=y[a](gb.invoiceActive),gb.additionalCards=b.getListAdditionalCreditCard(),gb.openRegisterAdditionalLimit=la,1===G.length)return ma(gb.statusInvoice.open),wa(),!1;gb.statusInvoice.open&&G.length>1?(y.setInvoiceActive(G[gb.indexInvoiceActive+1]),ba(b.getCreditCardCurrent().invoices.nextInvoice,!0,b.getCreditCardCurrent().invoices.currentInvoice),ma(gb.statusInvoice.open),wa()):(3===G.length&&ga(b.getCreditCardCurrent().invoices.previousInvoice,!0),ma(gb.statusInvoice.open),na())}gb.contract75Days=!1,gb.loaded75Days=!1,ab()}function Y(){gb.indexInvoiceActive=j.getIndexInvoice("current"),gb.currentProduct=J.getCurrentProduct(),y.init();try{y.set("lastFourNumber",gb.lastFourNumber),y.set("invoices",G),y.set("dateNow",gb.currentProduct.productDetail.dateNow),gb.dateNow=gb.currentProduct.productDetail.dateNow}catch(a){}y.setInvoiceActive(G[gb.indexInvoiceActive]),g.set("lastFourNumber",angular.copy(gb.lastFourNumber)),j.set("invoices",null,G),j.set("lastFourNumber",null,gb.lastFourNumber),j.set("name",null,gb.currentProduct.productDetail.embossingNameClient),j.set("indiceInvoicesActive",null,gb.indexInvoiceActive),gb.invoiceBefore={},gb.showSearchMenu=!1,gb.invoiceType={open:!1,close:!1,closeAlternative:!1},gb.notInstallmentsInvoice=!1,gb.hasInvoiceAlternative=!1,gb.modalConfig={open:!1,error:!1,alternative:!1,taxes:!1,isTaxes:{open:!1,modifierClass:"-taxes"},notInstallmentsInvoice:!1},gb.modalConfigRegisterAdditionalLimit={open:!1},gb.modalData={dueDateAlternative:"",valueDueDateAlternative:0},gb.creditCardRoutes=D,gb.showComponents={listExtractComponent:!1,anticipatedPayment:!1,grafic:!1},gb.productList=H.getProductsListCached().filter(function(a){return 15===a.productCode}),gb.debit={},gb.currentProduct.sidebar.totalCreditLimit<1&&(gb.debit.open=!0)}function Z(a,b){return a.map(function(a,c){return a[b]=c,a})}function $(a){var b=a.filter(function(a){return!!a.dueDate});return b=Z(b,"indexArray")}function _(a){function b(b){var c=s.APIToViewModel(b.data);a(c)}function c(){Da(),gb.modalConfig.error=!0,gb.modalConfig.open=!0}var d=y.getParams();f.get(d).then(b).catch(c)}function aa(a){ba(a,!1),ca()}function ba(a,c,d){var e,f=c?"invoices.nextInvoice":"invoices.currentInvoice",g=c?2:1,h=c?"next":"current";e=j.getIndexInvoice(h),gb.invoiceActive={},gb.invoiceActive=a,gb.invoiceActive.index=e,c?j.setDataInvoiceNext({invoiceClose:angular.copy(d),invoiceOpen:angular.copy(gb.invoiceActive),indexInvoiceOpen:j.getIndexInvoice("next"),indexInvoiceClose:j.getIndexInvoice("current")}):j.setDataInvoiceCurrent({indexInvoiceActive:j.getIndexInvoice("current"),invoiceActive:angular.copy(gb.invoiceActive)}),b.set(f,angular.copy(gb.invoiceActive)),b.set("invoiceDetailActive",angular.copy(gb.invoiceActive)),j.set("invoicesDetails",e,angular.copy(gb.invoiceActive)),j.set("invoiceActive",null,angular.copy(gb.invoiceActive)),j.set("tabActive",null,g),j.set("indiceInvoicesActive",null,e)}function ca(){var a=1===G.length?"checkOnlyOneInvoice":"checkStatus";if(gb.statusInvoice=y[a](gb.invoiceActive),1===G.length)return ma(gb.statusInvoice.open),void ha(wa);gb.statusInvoice.open?(y.setInvoiceActive(G[j.getIndexInvoice("next")]),_(da)):(0!==gb.indexInvoiceActive&&ea(),ma(gb.statusInvoice.open),ha(na))}function da(a){gb.invoiceBefore=angular.copy(gb.invoiceActive),ba(a,!0,gb.invoiceBefore),ma(gb.statusInvoice.open),ha(wa)}function ea(){function a(a){fa(a.data)}function b(){Da(),gb.modalConfig.error=!0,gb.modalConfig.open=!0}var c={lastFourNumber:gb.lastFourNumber,duedate:q.formatToAPI(G[0].dueDate),invoiceOpen:!1};f.get(c).then(a).catch(b)}function fa(a){ga(s.APIToViewModel(a),!1)}function ga(a,c){c||b.set("invoices.previousInvoice",angular.copy(a)),j.setDataInvoicePrevious({invoicePrevious:angular.copy(a),invoiceActive:angular.copy(gb.invoiceActive)})}function ha(b){function c(a){if(!a||204===a.status)return ja(),b(),!1;ia(a.data),b()}function d(){}a.listAdditionalCards(gb.lastFourNumber).then(c).catch(d)}function ia(a){y.checkHasAdditionalCards(a),gb.additionalCards=k.translateAdditionalCardToView(a),ka(gb.additionalCards,!0,!1)}function ja(){y.checkHasAdditionalCards([]),ka([],!1,!1)}function ka(a,c,d){gb.additionalCards=a,j.set("listAdditionalCard",null,gb.additionalCards),j.set("hasAdditionalCard",null,c),d||(b.set("additionalCards.hasAdditional",c),b.set("additionalCards.cards",gb.additionalCards)),gb.openRegisterAdditionalLimit=la,c&&(gb.invoiceActive.detailsInvoiceCards=v.orderMovimentInvoiceWithAdditional(gb.invoiceActive,gb.lastFourNumber,gb.currentProduct.productDetail.embossingNameClient))}function la(){gb.additionalCards.length>0?K.redirect(D.TAXES_LIMIT_REGISTER_ADDITIONAL_LIMIT):gb.modalConfigRegisterAdditionalLimit.open=!0}function ma(a){gb.notSubMenu=!1,gb.hasMoreButton=!1,gb.menu=u.getTextLinks(a),gb.menu.subMenuText.length>0&&(gb.notSubMenu=!0),gb.hiddenSubMenu=!0,gb.onOpenSubMenu=xa}function na(){y.checkInvoiceAlternative(gb.statusInvoice)?oa():qa(),va(1)}function oa(){pa(),ua()}function pa(){gb.invoiceType.closeAlternative=!0,gb.invoiceActive.valueParcialTotalInvoice=gb.invoiceActive.valueTotalInvoice,gb.invoiceActive.valueTotalInvoice=G[gb.indexInvoiceActive].valueTotalInvoice,Q.navigation.dueDateInvoice=Oa(angular.copy(gb.invoiceActive))}function qa(){ra(),ua()}function ra(){gb.invoiceType.close=!0,gb.invoiceActive.valueParcialTotalInvoice=gb.invoiceActive.valueTotalInvoice,gb.invoiceActive.valueTotalInvoice=G[gb.indexInvoiceActive].valueTotalInvoice,Q.navigation.dueDateInvoice=Oa(angular.copy(gb.invoiceActive))}function sa(){ta()}function ta(){gb.invoiceType.open=!0;var a=1===G.length?0:gb.indexInvoiceActive+1;gb.invoiceActive.valueParcialTotalInvoice=gb.invoiceActive.valueTotalInvoice,gb.invoiceActive.valueTotalInvoice=G[a].valueTotalInvoice,Q.navigation.dueDateInvoice=Oa(angular.copy(gb.invoiceActive)),ua()}function ua(){var a=gb.invoiceType.open?2:1;ya(),za(),Ea(),gb.linkInvoiceDetails=Ga({tab:a,invoiceOpen:gb.invoiceType.open,index:gb.indexInvoiceActive}),j.set("tabActive",null,a),j.set("linkInvoiceDetails",null,gb.linkInvoiceDetails),g.setALL(gb.linkInvoiceDetails),gb.onExtractDetails=Ia,gb.invoiceType.open&&Ha(),gb.invoiceType.closeAlternative&&(Ba(),gb.onSendOptionsPayment=Ka,Aa()),gb.invoiceType.close&&(La(),gb.onSendOptionsPayment=Ka,gb.onPayInvoiceUpTo12=Ja,Aa()),m.hasAnticipatedPayment()&&Wa();var b=angular.copy(J.getCurrentProduct());try{b.sidebar.loading=!1,J.updateSiderBar(b)}catch(c){}Pa()}function va(a){Qa(),Va(),Ma(a)}function wa(){sa(),va(2)}function xa(){gb.hiddenSubMenu=u.onClickButton(gb.hiddenSubMenu)}function ya(){n.init(gb.invoiceActive,gb.invoiceType,gb.statusInvoice),gb.invoiceInformationView=angular.copy(n.getView()),gb.invoiceType.closeAlternative&&(gb.modalData.dueDateAlternative=n.get("dueDateAlternative","date"),gb.modalData.valueDueDateAlternative=n.get("valueDueDateAlternative","money"),gb.openModalAlternative=Ca)}function za(){var a;a=gb.invoiceType.open&&1===G.length?0:gb.invoiceType.open?gb.indexInvoiceActive+1:gb.indexInvoiceActive,g.set("valueTotalInvoice",G[a].valueTotalInvoice),g.set("dueDateInvoice",G[a].dueDate),g.set("valueMinimumPayment",G[a].valueMinimumPayment)}function Aa(){gb.showComponents.listExtractComponent=!0,gb.modalFeesAndCharges=l.create(),gb.onClickShowModal=l.showModalFeesAndCharges}function Ba(){gb.paymentAlternativeComponent={},gb.paymentAlternativeComponent.lastFourNumber=gb.lastFourNumber,gb.paymentAlternativeComponent.totalValueInvoice=gb.invoiceActive.valueTotalInvoice,gb.paymentAlternativeComponent.minimumValuePayment=gb.invoiceActive.valueMinimumPayment,gb.paymentAlternativeComponent.dueDateInvoice=gb.invoiceActive.dueDateInvoice,gb.paymentAlternativeComponent.alternativeDueDate=gb.invoiceActive.dueDateAlternative,gb.paymentAlternativeComponent.totalValueAlternative=gb.invoiceActive.valueDueDateAlternative,gb.paymentAlternativeComponent.onOpenModalAlternative=Ca,gb.openModalAlternativeClick=Na,gb.listAccordion={},gb.listAccordion.isImg=!0,gb.listAccordion.index=0,gb.listAccordion.items=[{titleDescktop:"Pagar fatura",titleMobile:"Pagar fatura",open:!1,component:2,data:gb.paymentAlternativeComponent}]}function Ca(){Da(),gb.modalConfig.alternative=!0,gb.modalConfig.open=!0}function Da(){gb.modalConfig.alternative=!1,gb.modalConfig.error=!1,gb.modalConfig.taxes=!1,gb.modalConfig.isTaxes.open=!1}function Ea(){var a=gb.indexInvoiceActive;gb.statusInvoice.open&&G.length>1&&(a=gb.indexInvoiceActive+1),gb.invoiceActive.detailsInvoiceCards&&gb.invoiceActive.detailsInvoiceCards.length>0?Fa()?(gb.showComponents.grafic=!0,gb.grafic={},gb.grafic.name=gb.currentProduct.productDetail.embossingNameClient,gb.grafic.lastFourNumber=gb.lastFourNumber,gb.grafic.data=gb.invoiceActive,gb.grafic.statusInvoice=gb.statusInvoice,gb.grafic.datesMoviments={init:j.get("dateInitMoviments",a),end:j.get("dateEndMoviments",a)},gb.grafic.tab="home"):gb.notGrafic=!0:(gb.showComponents.grafic=!1,gb.notGrafic=!0)}function Fa(){for(var a=gb.invoiceActive.detailsInvoiceCards.length,b=!1,c=0;c<a;c++)if(gb.invoiceActive.detailsInvoiceCards[c].movementNational.length>0||gb.invoiceActive.detailsInvoiceCards[c].movementInternational.length>0){b=!0;break}return b}function Ga(a){return{tab:a.tab,index:a.index,openInvoice:a.invoiceOpen,lastFourNumber:gb.lastFourNumber,dueDate:gb.invoiceActive.dueDateInvoice,valueMinimumPayment:gb.invoiceActive.valueMinimumPayment,lastInvoices:G,statusInvoice:gb.statusInvoice,valueTotalInvoice:angular.copy(gb.invoiceActive.valueTotalInvoice),scroll:a.scroll?a.scroll:null,lineScroll:a.lineScroll?a.lineScroll:null}}function Ha(){if(gb.invoiceActive.detailsInvoiceCards&&gb.invoiceActive.detailsInvoiceCards.length>0&&Fa()){gb.showComponents.listExtractComponent=!0,gb.listExtractComponent={},gb.listExtractComponent.hasTitle=!0,gb.listExtractComponent.notop=!1,gb.listExtractComponent.limitShow=3;var a=v.orderMovimentInvoiceWithAdditional(gb.invoiceActive,gb.lastFourNumber,gb.currentProduct.productDetail.embossingNameClient);gb.invoiceActive.detailsInvoiceCards=a;var b=v.getExtract(gb.invoiceActive.detailsInvoiceCards,gb.statusInvoice);gb.listExtractComponent.list=b,gb.listExtractComponent.invoiceActive=gb.invoiceActive}}function Ia(){var a=gb.statusInvoice.open?D.INVOICE_NEXT:D.INVOICE_CURRENT;K.redirect(a)}function Ja(){gb.linkInvoiceDetails.scroll=!0,gb.linkInvoiceDetails.lineScroll=1,K.redirect(D.INVOICE_CURRENT)}function Ka(){gb.linkInvoiceDetails.scroll=!0,gb.linkInvoiceDetails.lineScroll=0,K.redirect(D.INVOICE_CURRENT)}function La(){gb.invoiceActive.valueTotalInvoice,gb.invoiceActive.valueMinimumPayment;gb.paymentComponent={},gb.paymentComponent.totalValueInvoice=gb.invoiceActive.valueTotalInvoice,gb.paymentComponent.minimumValuePayment=gb.invoiceActive.valueMinimumPayment,gb.paymentComponent.lastFourNumber=gb.lastFourNumber,gb.paymentComponent.dueDateInvoice=gb.invoiceActive.dueDateInvoice,gb.listAccordion={},gb.listAccordion.isImg=!0,gb.listAccordion.index=0,gb.listAccordion.items=[{titleDescktop:"Pagar fatura",titleMobile:"Pagar fatura",open:!1,component:1,data:gb.paymentComponent}],gb.quantityInstallmentsPaymentInvoice=gb.invoiceActive.quantityInstallmentsPaymentInvoice,gb.hasInvoiceAlternativeLink=gb.statusInvoice.hasAlternative&&0==gb.statusInvoice.hasPassedPeriodAlternative,gb.hasInvoiceAlternativeLink&&(gb.valueDueDateAlternative=gb.invoiceActive.valueDueDateAlternative,gb.openModalAlternative=Ca,gb.dueDateAlternative=q.format(gb.invoiceActive.dueDateAlternative,"@SITE-BILLET-GENERATED-DAY-FORMAT"),gb.modalData.dueDateAlternative=gb.dueDateAlternative,gb.modalData.valueDueDateAlternative=x.numberToCurrency(gb.invoiceActive.valueDueDateAlternative,"R$ ")),gb.hiddenLinksPayment=!0}function Ma(a){t.set("indexInvoiceActive",a),t.set("lastFourNumber",gb.lastFourNumber),t.set("statusInvoice",gb.statusInvoice),t.set("lastInvoices",G),gb.historyCollections=t.getALL()}function Na(){b.addValuesBilletActive("alternative",gb.invoiceActive.valueDueDateAlternative),K.redirect(D.INVOICE_BILLET)}function Oa(a){gb.invoiceType.close||gb.invoiceType.closeAlternative?a.dueDateInvoice.setMonth(a.dueDateInvoice.getMonth()+2):gb.invoiceType.open&&a.dueDateInvoice.setMonth(a.dueDateInvoice.getMonth()+1);var b=a.dueDateInvoice.getDate(),c=a.dueDateInvoice.getMonth(),d=c+1<10?"0"+(c+1):c+1,e=b<10?"0"+b:b;return{dayAndMonth:e+"/"+d,day:e}}function Pa(){gb.loadingPage=!1}function Qa(){gb.dataBenefits=q.format(gb.currentProduct.productDetail.dateNow,"@SITE-COMMON-SHORTDATE-MOMENT"),gb.benefits=[{nameBenefits:"Promoções",show:!1},{nameBenefits:"Programa Merece",show:!1},{nameBenefits:"Netpoints",show:!1}];var a=Ra();gb.benefits[a.codeService].show=!0,Sa(a.codeService)}function Ra(){for(var a=[],b=0;b<3;b++)if(a=o.checkProductContract(gb.currentProduct.productDetail.servicesContracted,b),a.length>0)return a[0];return{codeService:0}}function Sa(a){1===a?Ua():2===a&&Ta()}function Ta(){function a(a){var b=p.APIToViewModel(a.data);gb.balanceNetPoints=b.balancePoints}function b(a){}d.getBalanceNetpoints().then(a).catch(b)}function Ua(){function a(a){var b=r.translate(a.data);gb.balanceDeserveProgram=b.totalPoints}function b(a){}var d=c.contractData.dateNow,f=new Date(d);f.setMonth(f.getMonth()-5),e.get(q.formatToAPI(f),q.formatToAPI(d)).then(a).catch(b)}function Va(){function a(a){var b=w.APIToViewModel(a.data);gb.progressbarDescount=b.discountAnnuityProgress.toString(),gb.annuityType=b.discountAnnuityType}function b(a){Da(),gb.modalConfig.error=!0,gb.modalConfig.open=!0}h.getValueDiscount(gb.lastFourNumber).then(a).catch(b)}function Wa(){gb.showComponents.anticipatedPayment=!0,gb.anticipatedPayment=m.create()}function Xa(){gb.pageAssessory=!1,gb.assessoryCardView={},gb.modalConfig={open:!1,error:!1,alternative:!1,taxes:!1,isTaxes:{open:!1,modifierClass:"-taxes"},notInstallmentsInvoice:!1},Ya()}function Ya(){gb.pageAssessory=!0,Za(),Q.navigation.pageAssessory=!0;var a=angular.copy(J.getCurrentProduct());a.sidebar.loading=!1,a.sidebar.assessoryCard=!0,J.updateSiderBar(a),bb()}function Za(){function a(a){$a(z.APIToViewModel(a.data)),Pa()}function b(a){Pa(),Da(),gb.modalConfig.error=!0,gb.modalConfig.open=!0}i.get(gb.lastFourNumber).then(a).catch(b)}function $a(a){gb.assessoryCardView.socialReasoning=a.socialReasoning,gb.assessoryCardView.datesDelay=a.datesDelay;var b,c;a.phone&&a.phone.length>9?(b=a.phone.substring(0,2),c=a.phone.substr(2,a.phone.length-1)):(b="",c=a.phone||""),gb.assessoryCardView.phone=[b,c].join(" "),gb.assessoryCardView.city=a.advisoryAddress.city}function _a(){var a=!1,b=H.getProductsListCached(),c=[];return c=b.filter(function(a){if(parseInt(a.contractNumber,10)===parseInt(gb.lastFourNumber,10))return a}),c&&c.length>0&&parseInt(c[0].paymentSituationCode)===parseInt(I.ASSESSORY)&&(a=!0),a}function ab(){try{var a=b.getCreditCardCurrent().invoices,c=a.currentInvoice||a.nextInvoice||{},d={invoiceOpen:c.invoiceOpen,availableBillet:c.availableBillet,nextCutOffDate:c.nextCutOffDate,valueBalancePrevious:c.valueBalancePrevious,quantityInstallmentsPaymentInvoice:c.quantityInstallmentsPaymentInvoice,valueInstallmentsPaymentInvoice:c.valueInstallmentsPaymentInvoice,valuePriceQuoteDolarInvoice:c.valuePriceQuoteDolarInvoice,valueTotalInvoice:c.valueTotalInvoice,valueTotalInvoicePrevious:c.valueTotalInvoicePrevious,valueTotalNationalMovement:c.valueTotalNationalMovement,valueTotalInternationalMovement:c.valueTotalInternationalMovement,dueDateNextUnvoice:moment(c.dueDateNextUnvoice).format("YYYY-MM-DD"),dueDateInvoice:moment(c.dueDateInvoice).format("YYYY-MM-DD"),lastFourNumber:j.get("lastFourNumber"),indiceInvoicesActive:j.get("indiceInvoicesActive"),availableLimit:(jQuery(".sidebar_item__limite_value > span").html()||"").replace("R$ ","").split(",")[0].split(".").join(""),additionalCardsQtd:b.getListAdditionalCreditCard()&&b.getListAdditionalCreditCard().length||0};document.BVDatalayer.userInfo.profile.creditCard=d}catch(e){}}function bb(){function a(a){for(var b=String(gb.lastFourNumber).toString(),c=M.format(a.data),d=0;c.length>d;d++)if(c[d].numberCard.slice(-4)===b){gb.contract75Days=c[d],gb.contract75DaysActive=void 0;for(var d=0;d<c.length;d++)c[d].numberCard.slice(-4)===b&&"A"===c[d].status&&(gb.contract75DaysActive=c[d]);return document.BVDatalayer.formInfo||(document.BVDatalayer.formInfo={}),gb.contract75DaysActive?N.customPageView({pageName:"BV|AL|cartao|75dias-home|pagamentopendente"}):(document.BVDatalayer.formInfo.step=1,N.customPageView({pageName:"BV|AL|cartao|75dias-home"})),!0}return!1}function b(a){N.customPageView({pageName:"BV|AL|cartao|75dias-home-api-indisponivel"})}return gb.loaded75Days=!1,L.get().then(a).catch(b).finally(function(){gb.loaded75Days=!0,gb.contract75Days||N.customPageView({pageName:"BV|AL|cartao|75dias-cliente-nao-elegivel"})})}function cb(a){gb.contract75Days&&("novo"===a&&N.customPageView({pageName:"BV|AL|cartao|75dias-botao-novo-acordo"}),E.go(D.REGULARIZATION_HOME,{contract:gb.contract75DaysActive||gb.contract75Days}))}function db(a){a.stopPropagation();var b=S.defer(),c={identificadorAcordo:gb.contract75DaysActive.number};return U.get(c).then(function(a){var c;V.IS_IE?(c=new Blob([fb(a.data.base64)]),T.saveAs(c,"acordo-cartao.pdf")):(c=URL.createObjectURL(fb(a.data.base64)),Q.open(c,"_blank"));try{angular.merge(document.BVDatalayer.regularize,{pdfGenerated:!0}),N.customPageView({pageName:"BV|AL|cartao|75dias-boleto-reimpresso"})}catch(d){}b.resolve({data:c,response:a})}).catch(function(a){gb.modalConfig.open=!0,gb.modalConfig.errorGenerate=!0;try{angular.merge(document.BVDatalayer.regularize,{pdfGenerated:!1}),N.customPageView({pageName:"BV|AL|cartao|75dias-boleto-reimprimir-erro-lightbox"})}catch(c){}b.reject(a)}),b.promise}function Da(){gb.modalConfig={dueDates:!1,open:!1,errorGenerate:!1,success:!1,error:!1}}function eb(){angular.merge(document.BVDatalayer.regularize,{paymentCodeCopied:!0}),gb.isRegBarcodeCopied=!0}function fb(a){function b(a){for(var b=atob(a),c=[],d="application/pdf",e=512,f=0;f<b.length;f+=e){for(var g=b.slice(f,f+e),h=new Array(g.length),i=0;i<g.length;i++)h[i]=g.charCodeAt(i);var j=new Uint8Array(h);c.push(j)}return new Blob(c,{type:d})}return b(a)}var gb=this;gb.lastFourNumber=F.contractNumber,gb.loadingPage=!0,gb.watchEvent=!1,gb.openRegularization=cb,gb.generateRegBillet=db,gb.regBarcodeCopy=eb,_a()?Xa():X()}a.$inject=["additionalCardsService","creditCardStateManagement","currentProductDetailsService","balanceNetpointsService","extractPointsService","invoiceDetailService","invoiceDetailCreditCardCurrentService","discountAnnuityService","getAssessoryCardService","invoiceDataCurrentService","additionalCardsFactory","settingsOfTheModalFeesAndChargesFactory","settingsOfTheAnticipatedPaymentFactory","invoiceInformationDataFactory","productsCreditCardFactory","balanceNetpointsFactory","formatDateFactory","extractPointsFactory","invoiceDetailFactory","historyInvoiceDataFactory","menuInvoiceFactory","movementExtractFactory","discountAnnuityFactory","numberToCurrencyFactory","invoiceStatusFactory","getAssessoryCardFactory","settingsOfTheTransactionsFactory","biocatchFactory","biocatchService","creditCardRoutes","$state","$stateParams","lastInvoices","userInfoService","situationCodePaymentCreditCard","productDetailService","invoiceUtilsFactory","listContractService","listContractsFactory","dataLayerFactory","$timeout","$rootScope","$window","dataCard","$q","FileSaver","generateAgreementService","commonConstants","deviceDetector"],angular.module("internetBanking.creditCard").controller("CreditCardController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(a){g.setCardSelected(a),b.go(d.SECURITY_CHANGE_CARD_PASSWORD_EDIT)}function q(b){var c=4,d=e.open(a,[c,c],null,b);return x.view.cardCurrentPassword=!0,d.then(function(a){x.model.cardCurrentPassword=a,x.view.cardCurrentPassword=!1},function(a){x.view.cardCurrentPassword=!1}),d}function r(b){var c=4,d=e.open(a,[c,c],null,b);return x.view.cardNewPassword=!0,d.then(function(a){x.model.cardNewPassword=a,x.view.cardNewPassword=!1},function(a){x.view.cardNewPassword=!1}),d}function s(b){var c=4,d=e.open(a,[c,c],null,b);return x.view.confirmCardNewPassword=!0,d.then(function(a){x.model.confirmCardNewPassword=a,x.view.confirmCardNewPassword=!1}).catch(function(a){x.view.confirmCardNewPassword=!1}),d}function t(b){var c=3,d=e.open(a,[c,c],null,b);return x.view.confirmCardSecurityCode=!0,d.then(function(a){x.model.cardSecurityCode=a,x.view.confirmCardSecurityCode=!1}).catch(function(a){x.view.confirmCardSecurityCode=!1}),d}function u(){function a(a){function e(a){function e(a){i.contractNumber=g.getCardSelected().contractNumber;var c={successRoute:d.SECURITY_CHANGE_CARD_PASSWORD_SUCCESS,prefixEndpoint:h.tokenOperation().changeCardPassword,kindTokenTransaction:j.changeCardPassword,dataTransaction:{solicitacaoAlteracaoSenha:g.translateChangeCardPassword(i)}};f.setDataTransaction(c),b.go(d.AUTHENTICATION_TOKEN)}function k(a){x.view.modalConfig.open=!0,x.view.modalConfig.message=a&&a.data&&a.data.messages[1],c.isModal=!0}var l={cpfCnpj:a.name,ultimosQuatroDigitosCartao:g.getCardSelected().contractNumber,senha:i.cardCurrentPassword},m={payload:y.encrypt(JSON.stringify(l))};h.validateCardPassword(m).then(e).catch(k).finally(function(){w("confirm-change-card-password-spinner")})}function k(a){}y.setPublicKey(a.data.key),o.getUserCPF().then(e).catch(k).finally(function(){w("confirm-change-card-password-spinner")})}function e(a){}var i=x.model;v("confirm-change-card-password-spinner"),k.getPublicKey().then(a).catch(e).finally(function(){w("confirm-change-card-password-spinner")})}function v(a){c.$emit(l.SPINNING_START,{target:a})}function w(a){c.$emit(l.SPINNING_STOP,{target:a})}var x=this,y=new JSEncrypt;x.currentCard=m.getCurrentProduct(),x.model={contractNumber:null},x.view={cardCurrentPassword:!1,cardNewPassword:!1,confirmCardNewPassword:!1,confirmCardSecurityCode:!1,creditCardRoutes:d,listAdditionalCards:null,modalConfig:{open:!1},errorAdditionalCard:{open:!1,message:""}},x.onClickCardSelected=p,x.onFocusCardCurrentPassword=q,x.onFocusCardNewPassword=r,x.onFocusConfirmCardNewPassword=s,x.onFocusCardSecurityCode=t,x.onClickSuccess=u,x.view.listAdditionalCards=n.getListAdditionalCreditCard(),x.view.holder={title:x.currentCard.data.title,contractNumber:x.currentCard.data.contractNumber,name:i.user.nameUser||"Nome não encontrado"}}a.$inject=["$scope","$state","$rootScope","creditCardRoutes","VirtualKeyboard","authenticationTokenFactory","changeCardPasswordFactory","changeCardPasswordService","userInfoService","kindTokenTransaction","rsaPublicKeyService","commonEvents","productDetailService","creditCardStateManagement","userService"],angular.module("internetBanking.creditCard").controller("ChangeCardPasswordController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(a){if(32===a.originalEvent.keyCode)return a.preventDefault(),!1}function k(){if(p.formSubmitted=!0,!l())return!1;p.updateEmailForm.model={},p.updateEmailForm.model.cardEmail=jQuery.trim(p.model.cardEmail),p.updateEmailForm.model.confirmCardEmail=jQuery.trim(p.model.confirmCardEmail);var b={successRoute:c.SECURITY_UPDATE_EMAIL_SUCCESS,prefixEndpoint:e.getTokenOperation().changeCardEmail,kindTokenTransaction:f.updateEmailHp,receiveType:"SMS",dataTransaction:{solicitacaoAlteracaoEmail:{ultimosQuatroDigitosCartao:p.currentCard.data.contractNumber,email:jQuery.trim(p.model.cardEmail)}}};a.setDataTransaction(b),h.go(c.AUTHENTICATION_TOKEN)}function l(){return""==p.model.cardEmail||p.model.cardEmail!=p.model.confirmCardEmail?(p.view.matchEmail={cardEmail:!0,confirmCardEmail:!0},!1):(p.view.matchEmail={cardEmail:!1,confirmCardEmail:!1},!0)}function m(){if(p.stateForm.changeForm=!0,0==p.model.cardEmail.length)return p.stateForm.emailValid=!1,p.stateForm.error=!0,p.stateForm.emptyCardEmail=!0,!1;p.stateForm.emptyCardEmail=!1,p.model.cardEmail&&(p.view.validFunctionEmail=b.isValid(p.model.cardEmail),p.stateForm.error=!p.view.validFunctionEmail,p.stateForm.emailValid=p.view.validFunctionEmail)}function n(){p.stateForm.changeForm=!0,p.model.cardEmail===p.model.confirmCardEmail?(p.stateForm.error=!1,p.stateForm.confirmEmailValid=!0):(p.stateForm.error=!0,p.stateForm.confirmEmailValid=!1)}function o(){return 0!=p.stateForm.error||1!=p.stateForm.emailValid||1!=p.stateForm.confirmEmailValid}var p=this;p.currentCard=i.getCurrentProduct(),p.formSubmitted=!1,p.model={cardEmail:"",confirmCardEmail:""},p.stateForm={changeForm:!1,error:!1,emptyCardEmail:!1,emailValid:!1,confirmEmailValid:!1},p.onClickConfirm=k,p.onBlurEmail=m,p.onBlurEmailComfirm=n,p.onDisabledButton=o,p.checkKeyPressed=j,p.updateEmailForm={},p.view={creditCardRoutes:c,matchEmail:{cardEmail:!1,confirmCardEmail:!1},validFunctionEmail:!1,keyPressChange:!1,emailValid:!1,emailConfirmValid:!1,keyPressChangeConfirm:!1}}a.$inject=["authenticationTokenFactory","emailValidationFactory","creditCardRoutes","dataCard","emailCardService","kindTokenTransaction","$rootScope","$state","productDetailService"],angular.module("internetBanking.creditCard").controller("UpdateEmailController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(){}function u(){I.view.modalConfig.open=!0,k.isModal=!0}function v(){m.go("app.navigation.cc.home")}function w(){k.isModal=!1;var a={successRoute:e.SOLICITATION_ACCOUNT_PAYMENT_SANTANDER_ENV,prefixEndpoint:b.accountPaymentPrefix(),kindTokenTransaction:g.pagamentoConta,onlySMS:!0,dataTransaction:{solicitacaoURLServico:{ultimosQuatroDigitosCartao:I.currentCard.data.contractNumber,identificadorPagamento:"WEB"}}};p.sendEvent({ID:q.CARTAO_CREDITO.ACCOUNT_PAYMENT.BEFORE_TOKEN}),c.setDataTransaction(a),m.go(e.AUTHENTICATION_TOKEN)}function x(){0==d.currencyToNumber(I.model.accountValue,"R$ ")?I.classErrorAccountValue=!0:I.classErrorAccountValue=!1}function y(){return!(d.currencyToNumber(I.model.accountValue,"R$ ")>0&&null!==I.model.datePayment)}function z(){function c(b){I.view.simulateResult=a.translateSimulatePaymentToView(b.data),I.view.simulatedCalc=!0,p.sendEvent({ID:q.CARTAO_CREDITO.SIMULATE_PAYMENT})}function d(a){k.isModal=!0,I.view.modalConfig.simulatePayment.open=!0,I.view.modalConfig.simulatePayment.errorMessage=a&&a.data&&a.data.messages[1]}var e=parseFloat(I.view.variant.maxValuePerDay.replace("R$ ","").replace(".","").replace(",",".")),f=a.translateSimulatePaymentToAPI({contractNumber:J.contractNumber,accountValue:I.model.accountValue,datePayment:I.model.datePayment});if(f.valorPagamento>e)return k.isModal,I.view.modalMaxPayment.open=!0,I.view.simulatedCalc=!1,!1;var g=b.simulatePayment(f);return g.then(c).catch(d),g}function A(){return angular.element(".account-payment .use-terms > .use-terms__container").prop("scrollHeight")-angular.element(".account-payment .use-terms > .use-terms__container").outerHeight()-20}function B(){k.isModal=!0,I.view.modalConfig.open=!0}function C(){k.isModal=!0,I.view.modalConfig.acceptTerms.open=!0,H()}function D(){I.model.modal.acceptTerms=!I.model.modal.acceptTerms}function E(){I.model.datePayment=moment(I.selectedDate).format("L"),I.closeModal(I.view.modalConfig)}function F(){f.datepickerOptions.minDate=moment(),f.datepickerOptions.maxDate=null,I.datePickerOptions=f.datepickerOptions,I.selectedDate=new Date,I.rangeDates=null}function G(){function a(a){I.view.variant.maxValuePerDay=i("currency")(a.valorMaximo,"R$ ",2)}function c(a){k.isModal=!0,I.view.modalConfig.rulesPayment.errorMessage=a&&a.data&&a.data.messages[1],I.view.modalConfig.rulesPayment.open=!0}var d=b.rulesPayment(K.codeVariantTypeCard);return d.then(a).catch(c),d}function H(){angular.element(".account-payment .use-terms > .use-terms__container").scroll(function(){I.view.userTerms.currentScroll=this.scrollTop,I.view.userTerms.readUseTerms||(I.view.userTerms.readUseTerms=this.scrollTop>A()),l.$apply()})}var I=this;I.currentCard=o.getCurrentProduct();var J=I.currentCard.data,K=I.currentCard.productDetail.typeCard;I.model={acceptTerms:!1,accountValue:0,datePayment:null,modal:{acceptTerms:!1}},I.view={route:e,variant:{maxValuePerDay:0},modalConfig:{open:!1,datePayment:{open:!1},acceptTerms:{open:!1},rulesPayment:{errorMessage:"",open:!1},simulatePayment:{errorMessage:"",open:!1}},modalMaxPayment:{open:!1},userTerms:{maxScroll:A(),readUseTerms:!1,currentScroll:0},simulatedCalc:!1},I.classErrorAccountValue=!1,I.closeChooseDate=E,I.closeModal=h.closeModal,I.onClickGotoSantander=w,I.onClickModalCheckAcceptTerms=D,I.onClickOpenModalAcceptTerms=C,I.onClickSimulateCalc=z,I.onFocusOpenCalendar=u,I.onClickOpenModal=B,I.onDisabledCalc=y,I.onBlurAccountValue=x,I.backToHome=v,t(),F(),G(),H()}a.$inject=["accountPaymentFactory","accountPaymentService","authenticationTokenFactory","numberToCurrencyFactory","creditCardRoutes","datepickerManagerService","kindTokenTransaction","modalHelpersService","$filter","$log","$rootScope","$scope","$state","$timeout","productDetailService","dataLayerFactory","dataLayerSendEventCode","biocatchFactory","biocatchService"],angular.module("internetBanking.creditCard").controller("AccountPaymentController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){function b(a){q.view.listPaymentsVoucher=d.translateCheckPaymentToView(a.data),q.view.isVisibleListPayments=!0}function e(b){a.isModal=!0,
q.view.modalConfig.listPayments.errorMessage=b&&b.data&&b.data.messages&&b.data.messages[1],q.view.modalConfig.listPayments.open=!0}var f=d.translateCheckPaymentToAPI({checkPayments:q.model.checkPayments,contractNumber:g.getCurrentProduct().data.contractNumber,periodFrom:q.model.periodFrom,periodTo:q.model.periodTo});c.listPaymentsVoucher(f).then(b).catch(e)}function i(b){function d(b){q.view.modalConfig.checkPayment.open=!0;var c=b.data.descricao.split("\n"),d=void 0,e="",f={dadoscliente:[],dadosoperacao:[],autenticacao:[]};c.filter(function(a){return!_.isEmpty(a.trim())}).forEach(function(a){var b=a.trim().toLowerCase(),c=a.trim(),g=c.length,h=c.indexOf("  "),i={coluna1:c.substring(0,h).trim(),coluna2:c.substring(h,g).trim()};"dados do cliente"===b?d="dados do cliente":"dados da operação"===b?d="dados da operação":"autenticação"===b&&(d="autenticação"),(_.contains(c,"Atestamos ")||_.contains(c,"com os dados ")||_.contains(c,"Banco Votorantim ")||_.contains(c,"Em caso de ")||_.contains(c,"entral de Atendimento "))&&(e=e.concat(c," ")),"dados do cliente"!==d||"dados do cliente"===b||_.contains(b,"=======")?"dados da operação"!==d||"dados da operação"===b||_.contains(b,"=======")?"autenticação"===d&&"autenticação"!==b&&!_.contains(b,"=======")&&_.isEmpty(e)&&f.autenticacao.push(i):f.dadosoperacao.push(i):f.dadoscliente.push(i)}),f.message=e.trim(),q.view.voucher=f,a.isModal=!0}function e(b){a.isModal=!0,q.view.modalConfig.listPaymentsError.errorMessage=b&&b.data&&b.data.messages[1],q.view.modalConfig.listPaymentsError.open=!0}c.checkPaymentVoucher(b).then(d).catch(e)}function j(){window.innerWidth,window.innerHeight;q.view.hasPrint=!0,b(function(){window.print()},200)}function k(){p="periodFrom",e.datepickerOptions.minDate=moment().subtract(90,"days"),q.view.modalConfig.datepicker.open=!0,q.selectedDate=r}function l(){p="periodTo",e.datepickerOptions.minDate=moment(r),q.view.modalConfig.datepicker.open=!0,q.selectedDate=s}function m(){"periodFrom"==p?(q.model.periodFrom=moment(q.selectedDate).format("L"),r=q.selectedDate):(q.model.periodTo=moment(q.selectedDate).format("L"),s=q.selectedDate),q.closeModal(q.view.modalConfig.datepicker)}function n(){e.datepickerOptions.minDate=moment().subtract(90,"days"),e.datepickerOptions.maxDate=moment(),e.leftArrowDisabled=!1,e.rightArrowDisabled=!0,q.selectedDate=moment(),q.rangeDates=null,q.datePickerOptions=e.datepickerOptions}function o(){q.closeModal(q.view.modalConfig.checkPayment)}var p,q=this,r=null,s=moment();q.view={isVisibleListPayments:!1,listPaymentsVoucher:[],contractNumber:g.getCurrentProduct().data.contractNumber,modalConfig:{datepicker:{open:!1},checkPayment:{open:!1},listPayments:{open:!1,errorMessage:""},listPaymentsError:{open:!1,errorMessage:""}},hasPrint:!1},q.model={checkPayments:"1",periodFrom:null,periodTo:null},q.onClickConfirm=h,q.onClickLookPaymentVoucher=i,q.onCloseModalCheckPayment=o,q.onFocusOpenDatepickerFrom=k,q.onFocusOpenDatepickerTo=l,q.closeChooseDate=m,q.closeModal=f.closeModal,q.onClickPrintVoucher=j,n()}a.$inject=["$rootScope","$timeout","checkPaymentVoucherService","accountPaymentFactory","datepickerManagerService","modalHelpersService","productDetailService"],angular.module("internetBanking.creditCard").controller("CheckPaymentVoucherController",a)}(),function(){"use strict";function a(){}angular.module("internetBanking.creditCard").controller("UpgradeCardController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){m.modalConfig={open:!1,embossed:{open:!1,errorMessage:""}},m.confirmAdditionalCard=j,m.cpfValidation=i,m.isCpfValid=!1,m.openBenefits=k,m.currentProduct=e.getCurrentProduct(),m.updateShortName=l}function i(){m.isCpfValid=d.isValid(m.cpf,!0)}function j(c){if(c&&m.isCpfValid){var d={lastFourDigits:e.getCurrentProduct().data.contractNumber.toString(),firstName:m.firstName,lastName:m.lastName,shortName:m.shortName,cpf:m.cpf,motherName:m.motherName,birthDate:m.birthDate};b.setClientInfo(d),f.go(a.SOLICITATION_ADDITIONAL_CARD_CONFIRMATION)}}function k(){m.modalConfig.open=!0}function l(){if(_.isEmpty(m.firstName)||_.isEmpty(m.lastName))return m.shortName="",!1;var a={nomeCompleto:m.firstName+" "+m.lastName};c.getEmbossedName(a).then(function(a){m.shortName=a.data.nomeEmbossed}).catch(function(a){g.isModal=!0,m.modalConfig.embossed.open=!0,m.modalConfig.embossed.errorMessage=a&&a.data&&a.data.messages[1]})}var m=this;h()}a.$inject=["creditCardRoutes","additionalCardFactory","additionalCardService","cpfValidationFactory","productDetailService","$state","$rootScope"],angular.module("internetBanking.creditCard").controller("AdditionalCardController",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){i.modalConfig.open=!0}function h(){if(i.acceptTerms){j.cpf=j.cpf.replace(/\D/g,"");var g={successRoute:a.SOLICITATION_ADDITIONAL_CARD_SUCCESS,prefixEndpoint:c.tokenOperation().requestNewCard,kindTokenTransaction:e.solicitationAdditionalCard,dataTransaction:{solicitacaoCartaoAdicional:b.convertViewModelToAPI(j)}};d.setDataTransaction(g),f.go(a.AUTHENTICATION_TOKEN)}}var i=this,j=b.getClientInfo();i.lastFourDigits=j.lastFourDigits,i.firstName=j.firstName,i.lastName=j.lastName,i.shortName=j.shortName,i.cpf=j.cpf,i.motherName=j.motherName,i.birthDate=j.birthDate,i.acceptTerms=!1,i.modalConfig={open:!1},i.submitForm=h,i.openModalError=g}a.$inject=["creditCardRoutes","additionalCardFactory","additionalCardService","authenticationTokenFactory","kindTokenTransaction","$state"],angular.module("internetBanking.creditCard").controller("additionalCardConfirmationController",a)}(),function(){"use strict";function a(a){}a.$inject=["$log"],angular.module("internetBanking.creditCard").controller("ChangeExpirationDateController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){b.type("loadingCreditCard"),b.add({target:"loadingCreditCard",where:"travel-notification: init()"}),m()}function j(a){return w.isInvalidForm=w.travelNotificationForm["card_"+a].$invalid,w.isInvalidForm}function k(a){w.cardSelected=a;var b=_.map(angular.copy(w.cards),function(a){return a.startDate=a.startDate?a.startDate:"",a.endDate=a.startDate?a.startDate:"",a}),c=_.filter(w.travelNotificationForm,function(a,b){return b.indexOf("$")<0}).map(_.property("$name"));w.travelNotificationForm.$setPristine(),w.travelNotificationForm.$setUntouched(),angular.forEach(c,function(a,b){var c=_.filter(w.travelNotificationForm[a],function(a,b){return b.indexOf("$")<0});angular.forEach(c,function(b,c){("initialdate"===b.$name||"finaldate"===b.$name)&&b.$viewValue.length>0&&(w.travelNotificationForm[a][b.$name].$setViewValue(""),w.travelNotificationForm[a][b.$name].$render())})}),angular.equals(x,b)||(w.cards=angular.copy(x))}function l(a){var b=w.travelNotificationForm[a].destination.$viewValue,c=_.where(b,{checked:!0}),d=_.pluck(c,"description").join(", ");return d.length>=31&&(d=d.slice(0,31)+" ..."),0===d.length?"Destino *":d}function m(){function b(b){w.continents=a.translateContinentsToView(b.data),n()}function d(a){w.modalConfig.message=a&&a.data&&a.data.messages[1],w.modalConfig.open=!0}c.getContinents().then(b).catch(d)}function n(){o()}function o(){var a=e.getCurrentProduct().productDetail;w.cards.push({contractNumber:w.currentCard.contractNumber,startDate:"",endDate:"",continents:w.continents,name:a.embossingNameClient,variant:a.typeCard&&a.typeCard.descriptionVariantTypeCard}),p(d.getListAdditionalCreditCard())}function p(a){r(q(a)),s(),b.remove({target:"loadingCreditCard",where:"travel-notification: nextGetAdditionalCards()"})}function q(a){return a.map(function(a,b){return a.startDate="",a.endDate="",a.continents=angular.copy(w.continents),a})}function r(a){w.cards=w.cards.concat(a),x=angular.copy(w.cards)}function s(){w.lastFourDigits=w.currentCard.contractNumber}function t(){return _.filter(w.cards,function(a){return a.contractNumber===w.lastFourDigits})[0]||[]}function u(){var b=t(),c={contractNumber:b.contractNumber,startDate:b.startDate,endDate:b.endDate,continents:b.continents,title:w.currentCard.title};w.isInvalidForm||(a.setSelectedCard(c),h.go(f.SOLICITATION_TRAVEL_NOTIFICATION_CONFIRMATION))}function v(){h.go(f.HOME)}var w=this,x=[];w.modalConfig={open:!1,message:""},w.cardSelected=0,w.isInvalidForm=!0,w.cards=[],w.currentCard=e.getCurrentProduct().data,w.lastFourDigits=w.currentCard.contractNumber,w.continents=[],w.closeModalAndReturnToHome=v,w.confirm=u,w.getSelectedContinents=l,w.resetForm=k,w.checkForm=j,i()}a.$inject=["travelNotificationFactory","abstractLoadingFactory","travelNotificationService","creditCardStateManagement","productDetailService","creditCardRoutes","$rootScope","$state"],angular.module("internetBanking.creditCard").controller("TravelNotificationController",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){var g={lastFourDigits:h.selectedCard.contractNumber,travels:{continents:h.selectedCard.continents.map(function(a,b,c){return{code:a.code,description:a.description}}),period:{startDate:h.selectedCard.startDate,endDate:h.selectedCard.endDate}}},i={successRoute:b.SOLICITATION_TRAVEL_NOTIFICATION_SUCCESS,prefixEndpoint:d.tokenOperation().requestTravelNotification,kindTokenTransaction:f.solicitacaoAvisoViagem,dataTransaction:{solicitacaoAvisoViagem:c.translateTravelCardToAPI(g)}};e.setDataTransaction(i),a.go(b.AUTHENTICATION_TOKEN)}var h=this;h.selectedCard=c.getSelectedCard(),h.selectedCard.continents=_.filter(h.selectedCard.continents,function(a){return!!a.checked&&a}),h.confirm=g}a.$inject=["$state","creditCardRoutes","travelNotificationFactory","travelNotificationService","authenticationTokenFactory","kindTokenTransaction"],angular.module("internetBanking.creditCard").controller("TravelNotificationConfirmationController",a)}(),function(){"use strict";function a(a){function b(){c.selectedCard=a.getSelectedCard()}var c=this;b()}a.$inject=["travelNotificationFactory"],angular.module("internetBanking.creditCard").controller("TravelNotificationSuccessController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){function a(){return i.receivingType?"E-mail":"Correio"}D.formData={receiveType:"E-mail",email:null,conf_email:null},D.formDataMore={validade:null,dia_nascimento:null,mes_nascimento:null,ano_nascimento:null,cvv:null,senha:null},D.pageState=1,D.receiveMethodPrevious=i&&a()||"Correio",D.receiveMethodChexbox=i&&a()||"Correio",D.onDisabledButton=r}function r(a){return"Correio"===D.formData.receiveType?D.receiveMethodPrevious===D.formData.receiveType:!a.$valid}function s(){return D.pageState>1?(D.pageState--,!0):D.pageState}function t(){return++D.pageState}function u(a){return a?D.pageState=a:D.pageState++,D.pageState}function v(){q()}function w(a){var b=3,c=k.open(m,[b,b],null,a);return c.then(function(a){D.formDataMore.cvv=a}).catch(function(a){D.formDataMore.cvv=null}),c}function x(a){var b=4,c=k.open(m,[b,b],null,a);return c.then(function(a){D.formDataMore.senha=a}).catch(function(a){D.formDataMore.senha=null}),c}function y(c){c.preventDefault();var e={successRoute:d.SOLICITATION_CHANGE_INVOICE_RECEIVE_METHOD_SUCCESS,prefixEndpoint:g.CC_CHANGE_RECEIVE_METHOD,kindTokenTransaction:h.changeReceiveMethod,onlySMS:!0,dataTransaction:{solicitacaoAlteracaoRecebimentoFatura:{ultimosQuatroDigitosCartao:E.contractNumber,email:D.formData.email}}};return b.set("receivingType",D.formData.receiveType),a.setDataTransaction(e),n.go(d.AUTHENTICATION_TOKEN),!0}function z(c){function e(c){var e={successRoute:d.SOLICITATION_CHANGE_INVOICE_RECEIVE_METHOD_SUCCESS,prefixEndpoint:g.CC_CHANGE_RECEIVE_METHOD,kindTokenTransaction:h.changeReceiveMethod,dataTransaction:{ALTERACAO_RECEBIMENTO_FATURA:{}}};a.setDataTransaction(e),b.set("receivingType","Correio"),n.go(d.AUTHENTICATION_TOKEN)}function f(a){l.isModal=!0,D.modalErrorValidation.open=!0}function i(){C("validate_card_data")}c.preventDefault(),B("validate_card_data");var k=A();j.validate(k).then(e).catch(f).finally(i)}function A(){var a=o.contractNumber||e.currentProductDetails.contractNumber,b={ultimosQuatroDigitosCartao:parseInt(a),cvv:parseInt(D.formDataMore.cvv),mesValidade:parseInt(D.formDataMore.validade.substr(0,2)),anoValidade:parseInt(D.formDataMore.validade.substr(2,4)),senha:D.formDataMore.senha};return 0===D.randInputNascimento&&_.extend(b,{valorCampoDataNascimento:parseInt(D.formDataMore.dia_nascimento),tipoCampoDataNascimento:0}),1===D.randInputNascimento&&_.extend(b,{valorCampoDataNascimento:parseInt(D.formDataMore.mes_nascimento),tipoCampoDataNascimento:1}),2===D.randInputNascimento&&_.extend(b,{valorCampoDataNascimento:parseInt(D.formDataMore.ano_nascimento),tipoCampoDataNascimento:2}),b}function B(a){l.$emit(c.SPINNING_START,{target:a})}function C(a){l.$emit(c.SPINNING_STOP,{target:a,disabledBtn:!1})}var D=this,E=f.getCurrentProduct().data;q(),D.randInputNascimento=Math.ceil(3*Math.random())-1,l.isModal=!1,D.modalErrorValidation={open:!1},D.previousPageState=s,D.nextPageState=t,D.changePageState=u,D.resetForms=v,D.openKeyboardCVV=w,D.openKeyboardSenha=x,D.submitFormOne=y,D.submitFormTwo=z}a.$inject=["authenticationTokenFactory","invoiceReceiveMethodDataFactory","commonEvents","creditCardRoutes","currentProductDetailsService","productDetailService","endPoints","kindTokenTransaction","receiveMethod","validateCardSecurityDataService","VirtualKeyboard","$rootScope","$scope","$state","$stateParams","$timeout"],angular.module("internetBanking.creditCard").controller("ChangeInvoiceReceiveMethodController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){b.go(c.HOME)}var k=this;k.receiveMethod=e.get("receivingType"),k.redirectHome=j,i.$parent.navigation.invoiceReceive="E-mail"===k.receiveMethod}a.$inject=["$log","$state","creditCardRoutes","receiveMethod","invoiceReceiveMethodDataFactory","productDetailService","$rootScope","$window","$scope"],angular.module("internetBanking.creditCard").controller("ChangeInvoiceReceiveMethodSuccessController",a)}(),function(){"use strict";function a(a,b,c){function d(){e.view={urlRedirecionamento:b.urlRedirecionamento}}var e=this;d()}a.$inject=["$log","$stateParams","$window"],angular.module("internetBanking.creditCard").controller("AccountPaymentSantanderController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){p(),u(),q()}function p(){e.set("dueDate",b[1].dueDate),e.set("valueTotalInvoice",b[1].valueTotalInvoice),e.set("valueMinimumPayment",b[1].valueMinimumPayment),y.dataDueDateInvoice=d.format(e.getALL().dueDate,"@SITE-COMMON-SHORTDATE-MOMENT"),y.dataTotalInvoice=e.getALL().valueTotalInvoice,y.errorMessage="",y.installmentOfInvoicesForm={},y.minimumPayment=e.getALL().valueMinimumPayment+10,y.error={message:"Valor de entrada deve ser igual ou maior a "+j("currency")(y.minimumPayment),messageNotAllowed:"Solicitação não permitida. O valor do pagamento de entrada deve ser menor que o valor total da fatura a ser parcelada.",active:!1},y.model={minimumPaymentUser:r(y.minimumPayment),paymentDay:d.format(e.getALL().dueDate,"@SITE-COMMON-SHORTDATE-MOMENT")},y.modalConfig={dueDatesAnticipate:{open:!1,modifierClass:"-datepicker"}},y.modalInfo={open:!1},y.modalError={open:!1}}function q(){y.simulatePlot=s,y.openInstallmentInvoice=t,y.onFocusInputDate=v,y.convertIntoString=r}function r(a){return a=a%1!=0?1===a.toString().split(".")[1].length?a.toString().replace(".",",")+"0":a.toString().replace(".",","):a.toString()+",00"}function s(){function b(b){f.setInstallmentInvoice(b.data),l.go(a.TAXES_LIMIT_INSTALLMENT_OF_INVOICES_RESULT)}function c(a){y.errorMessage=a&&a.data&&a.data.messages[1],y.modalError.open=!0,n.isModal=!0}var d=y.installmentOfInvoicesForm.minimumPaymentUser.$viewValue,e=y.installmentOfInvoicesForm.paymentDay.$viewValue;y.error.active=!1;var h={ultimosQuatroDigitosCartao:i.getCurrentProduct().data.contractNumber.toString(),valorEntrada:d.replace("R$ ","").split(".").join("").replace(",","."),dataEntrada:e.split("/").reverse().join("-")};return y.error.isEqual=parseFloat(h.valorEntrada)>=y.dataTotalInvoice,parseFloat(h.valorEntrada)<y.minimumPayment||parseFloat(h.valorEntrada)>=y.dataTotalInvoice?(y.error.active=!0,!1):!y.installmentOfInvoicesForm.$invalid&&(f.setInputValues(h),void g.simulateInstallmentInvoice(h).then(b).catch(c))}function t(){y.modalInfo.open=!0}function u(){y.datePickerOptions=c.datepickerOptions,c.datepickerOptions.minDate=moment(),c.datepickerOptions.maxDate=new Date(e.get("dueDate")),y.selectedDate=new Date,y.rangeDates=null,y.openModal=h.openModal,y.closeModal=h.closeModal,y.openDates=w,y.closeChooseDate=x}function v(){y.openDates()}function w(){y.openModal(y.modalConfig.dueDatesAnticipate)}function x(){y.closeModal(y.modalConfig.dueDatesAnticipate),y.model.paymentDay=moment(y.selectedDate).format("L")}var y=this;o()}a.$inject=["creditCardRoutes","dataInvoiceLastMaturitis","datepickerManagerService","formatDateFactory","invoiceDetailCreditCardCurrentService","invoiceInstallmentFactory","invoiceInstallmentService","modalHelpersService","productDetailService","$filter","$log","$state","$stateParams","$rootScope"],angular.module("internetBanking.creditCard").controller("InstallmentOfInvoicesController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){k.backToSimulate=i,d.set("dueDate",b[1].dueDate),d.set("valueTotalInvoice",b[1].valueTotalInvoice),d.set("valueMinimumPayment",b[1].valueMinimumPayment),k.dataDueDateInvoice=c.format(d.get("dueDate"),"@SITE-COMMON-SHORTDATE-MOMENT"),k.dataTotalInvoice=d.get("valueTotalInvoice"),k.generateExtract=j,k.invoiceList=e.getInstallmentInvoice(),k.inputValues=e.getInputValues(),k.inputValuesDate=c.format(k.inputValues.dataEntrada,"@SITE-COMMON-SHORTDATE-MOMENT"),k.installmentOfInvoiceResultForm={},k.invoice=null,angular.element(".main_content__inner").scrollTo&&angular.element(".main_content__inner").scrollTo(1,1,200)}function i(){g.go(a.TAXES_LIMIT_INSTALLMENT_OF_INVOICES)}function j(b){if(b.preventDefault(),k.installmentOfInvoiceResultForm.$valid){var c=k.installmentOfInvoiceResultForm.invoice.$viewValue;e.setPaymentMethod(c),g.go(a.TAXES_LIMIT_INSTALLMENT_OF_INVOICES_EXTRACT)}}var k=this;h()}a.$inject=["creditCardRoutes","dataInvoiceLastMaturitis","formatDateFactory","invoiceDetailCreditCardCurrentService","invoiceInstallmentFactory","$log","$state"],angular.module("internetBanking.creditCard").controller("InstallmentOfInvoiceResultController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){j(),k()}function j(){n.dataTotalInvoice=c.get("valueTotalInvoice"),n.invoiceDate=b.format(c.get("dueDate"),"@SITE-COMMON-SHORTDATE-MOMENT"),n.paymentChoice=d.getPaymentMethod(),n.inputValues=d.getInputValues(),n.firstPayment=b.format(n.inputValues.dataEntrada,"@SITE-COMMON-SHORTDATE-MOMENT"),n.discountInvoice=n.paymentChoice.percentualDescontoParcelamento.toString().replace(".",",")+"%"}function k(){n.backToResult=l,n.generateSolicitation=m,angular.element(".main_content__inner").scrollTo&&angular.element(".main_content__inner").scrollTo(1,1,200)}function l(){f.go(a.TAXES_LIMIT_INSTALLMENT_OF_INVOICES_RESULT)}function m(){var b={ultimosQuatroDigitosCartao:c.get("lastFourNumber"),valorEntrada:n.paymentChoice.valorEntrada,dataEntrada:n.firstPayment,quantidadeParcelas:n.paymentChoice.quantidadeParcelas},d={successRoute:a.TAXES_LIMIT_INSTALLMENT_OF_INVOICES_SUCCESS,endPoint:g.CREDIT_CARD_INVOICE_PARCEL,dataTransaction:b};e.setDataTransaction(d),f.go(a.AUTHENTICATION)}var n=this;i()}a.$inject=["creditCardRoutes","formatDateFactory","invoiceDetailCreditCardCurrentService","invoiceInstallmentFactory","authenticationFactory","$state","endPoints","$rootScope"],angular.module("internetBanking.creditCard").controller("InstallmentOfInvoiceExtractController",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){c.go(a.HOME)}this.backToHome=f}a.$inject=["creditCardRoutes","$log","$state","commonEvents","$rootScope"],angular.module("internetBanking.creditCard").controller("InstallmentOfInvoiceSuccessController",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(a){b.getLastDatePay(a).then(function(a){k.view.lastDatePay=a.data.dataPagamento}).catch(function(a){k.view.modalConfig.open=!0,k.view.modalConfig.errorMessage=a&&a.data&&a.data.messages[1]})}function h(c){b.getLimits(c).then(function(b){var c=a.translateLimit(b.data);k.view.listLimits=c}).catch(function(a){k.view.modalConfig.open=!0,k.view.modalConfig.errorMessage=a&&a.data&&a.data.messages[1]})}function i(c){b.getTaxes(c).then(function(b){var c=a.translate(b.data);k.view.listTaxes=c}).catch(function(a){k.view.modalConfig.open=!0,k.view.modalConfig.errorMessage=a&&a.data&&a.data.messages&&a.data.messages[1]||"Informação indisponível"})}function j(){f.go(d.HOME)}var k=this;k.view={};var l=c.getCurrentProduct().data.contractNumber,m=c.getCurrentProduct().productDetail.typeCard.descriptionTypeCard;k.view.modalConfig={open:!1,errorMessage:""},k.view.descriptionVariantTypeCard=c.getCurrentProduct().productDetail.typeCard.descriptionVariantTypeCard.toLowerCase(),k.currentCard=c.getCurrentProduct().data,k.view.contractNumber=l,k.view.descriptionTypeCard=m,k.view.dateNow=new Date,k.view.typeCard=1===_.filter(c.getCurrentProduct().productDetail.servicesContracted,function(a){return"Netpoints"===a.descriptionService}).length?"Netpoints":"BV",k.closeModalAndReturnToHome=j,g(l),i(l),h(l)}a.$inject=["checkLimitAndRatesFactory","checkLimitAndRatesService","productDetailService","creditCardRoutes","$rootScope","$state"],angular.module("internetBanking.creditCard").controller("CheckLimitAndRatesController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l){function m(){n(),u.getExtract()}function n(){u.currentCard=l.getCurrentProduct().data,u.view={modalConfig:{getExtract:{open:!1,errorMessage:""}},messageEmpty:!1,cardCategoryName:[u.currentCard.title||u.currentCard.alias,u.currentCard.subtitle].join(" ")},u.extract=[],u.userInfo=d.$parent.navigation.view.userName,u.getExtract=o,u.closeModalAndReturnToHome=t,u.onClickPrintFareExtract=s}function o(){function a(a){p(a.data)}function b(a){r(a)}h.getExtract(u.currentCard.contractNumber).then(a).catch(b)}function p(a){var b=q(a);b||(u.view.extract=g.APIToViewModel(a)),u.view.messageEmpty=b}function q(a){return 0===a.length}function r(a){b.isModal=!0,u.view.modalConfig.getExtract.open=!0,u.view.modalConfig.getExtract.errorMessage=a&&a.data&&a.data.messages?a.data.messages[1]:a.data.message}function s(){window.innerWidth,window.innerHeight;a(function(){document.title="BV Cartões Extrato anual de tarifas, juros e encargos",window.print()},200)}function t(){c.go(f.HOME)}var u=this;m()}a.$inject=["$timeout","$rootScope","$state","$scope","commonEvents","creditCardRoutes","fareExtractFactory","fareExtractService","userInfoService","currentProductDetailsService","modalHelpersService","productDetailService"],angular.module("internetBanking.creditCard").controller("FareExtractController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(a){a.preventDefault();var b={successRoute:d.TAXES_LIMIT_LIMIT_INCREASE_SUCCESS,prefixEndpoint:f.TAXES_LIMITS_LIMIT_INCREASE,kindTokenTransaction:g.taxesLimitsIncrease,dataTransaction:{solicitacaoAumentoLimiteCartao:{ultimosQuatroDigitosCartao:l.contractNumber}}};e.setDataTransaction(b),c.go(d.AUTHENTICATION_TOKEN)}function j(a){a.preventDefault(),c.go(d.HOME)}var k=this,l=h.getCurrentProduct().data;k.confirmIncrease=i,k.cancelIncrease=j}a.$inject=["$log","$scope","$state","creditCardRoutes","authenticationTokenFactory","endPoints","kindTokenTransaction","productDetailService"],angular.module("internetBanking.creditCard").controller("LimitIncreaseController",a)}(),function(){"use strict";function a(a,b,c,d){function e(a){a.preventDefault(),g.modalStatus.instruction=!0,g.modalStatus.open=!0,c.isModal=!0}function f(c){c.preventDefault(),a.go(b.HOME)}var g=this;g.showModal=e,g.redirectHome=f,g.modalStatus={open:!1,instruction:!1},g.typeCard=1===_.filter(d.getCurrentProduct().productDetail.servicesContracted,function(a){return"Netpoints"===a.descriptionService}).length?"Netpoints":"BV"}a.$inject=["$state","creditCardRoutes","$rootScope","productDetailService"],angular.module("internetBanking.creditCard").controller("LimitIncreaseInstructionController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j){function k(){l(),m()}function l(){var a=angular.copy(j.getListAdditionalCreditCard());t.cards=_.map(a,function(a){return a.limit.newValue=0,a}),t.lastFourDigits=t.cards[0].contractNumber}function m(){t.isDisabledCard=p,t.isDisabledConfirm=q,t.confirmRegister=r,t.closeModalAndReturnToHome=s}function n(){return _.filter(t.cards,function(a){return a.contractNumber===t.lastFourDigits})[0]||[]}function o(){return _.reduce(t.cards,function(a,b){return b.contractNumber!==t.lastFourDigits?a-b.limit.value:a},t.totalCreditLimit)}function p(a){return t.cards[a].contractNumber!==t.lastFourDigits&&(t.cards[a].limit.newValue="R$ 0,00"),t.cards[a].contractNumber!==t.lastFourDigits}function q(){var a=n(),b=c.currencyToNumber(a.limit.newValue,"R$ ");return!(b>0&&b<=t.totalCreditLimit)}function r(){var b=n(),i=(o(),0===b.length?0:c.currencyToNumber(b.limit.newValue,"R$")),j={ultimosQuatroDigitosCartao:t.currentCard.data.contractNumber,limitesCartoesAdicionais:[{ultimosQuatroDigitosCartao:b.contractNumber,novoLimite:i}]};if(i<=t.totalCreditLimit){var k={successRoute:e.TAXES_LIMIT_REGISTER_ADDITIONAL_LIMIT_SUCCESS,prefixEndpoint:g.TAXES_LIMITS_LIMIT_INCREASE_ADDITIONAL_CARDS,kindTokenTransaction:h.additionalLimitCard,dataTransaction:{solicitacaoAumentoLimiteCartaoAdicional:j}};d.setAdditionalLimit(b),f.setDataTransaction(k),a.go(e.AUTHENTICATION_TOKEN)}}function s(){a.go(e.HOME)}var t=this;t.view={modalConfig:{aditionalCard:{open:!1}}},t.cards=[],t.currentCard=i.getCurrentProduct(),t.totalCreditLimit=t.currentCard.productDetail.totalCreditLimit,b.isInvoiceDetailsPage=!0,t.view.creditCardName="Cartão "+t.currentCard.productDetail.cardCategory.descriptionCardCategory+" "+t.currentCard.productDetail.typeCard.descriptionVariantTypeCard,k()}a.$inject=["$state","$rootScope","numberToCurrencyFactory","registerAdditionalLimitFactory","creditCardRoutes","authenticationTokenFactory","endPoints","kindTokenTransaction","productDetailService","creditCardStateManagement"],angular.module("internetBanking.creditCard").controller("RegisterAdditionalLimitController",a)}(),function(){"use strict";function a(a,b,c,d){var e=this;e.currentCard=c.getCurrentProduct(),e.currentAdditionalCard=a.getAdditionalLimit(),e.view={creditCardName:"Cartão "+e.currentCard.productDetail.cardCategory.descriptionCardCategory+" "+e.currentCard.productDetail.typeCard.descriptionVariantTypeCard};var f=d.getListAdditionalCreditCard(),g=f.map(function(a){return a.contractNumber===e.currentAdditionalCard.contractNumber&&(a.limit.value=e.currentAdditionalCard.limit.newValue.split(",")[0].replace(/\D+/g,""),a.limit.value=parseInt(a.limit.value)),a});d.set("additionalCards.cards",g)}a.$inject=["registerAdditionalLimitFactory","currentProductDetailsService","productDetailService","creditCardStateManagement"],angular.module("internetBanking.creditCard").controller("registerAdditionalLimitSuccessController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(){n.go(f.HOME)}function r(a){var b=4,c=l.open(m,[b,b],null,a);return x.model.password="",c.then(function(a){x.model.password=a}),c}function s(){function b(b){function c(b){function c(b){w=a.getDataTransaction();var c={data:w.dataTransaction,successRoute:w.successRoute,endpoint:w.endPoint};return c.data.dataEntrada=c.data.dataEntrada.split("/").reverse().join("-"),g.resolve(b.data),t(c)}var d={cpfCnpj:b.name,ultimosQuatroDigitosCartao:i.getCurrentProduct().data.contractNumber,senha:x.model.password},h={payload:y.encrypt(JSON.stringify(d))};e.validateCardPassword(h).then(c).catch(f).finally(v("confirm-authentication-spinner"))}y.setPublicKey(b.data.key),k.getUserCPF().then(c).catch(d)}function c(a){v("confirm-authentication-spinner"),g.reject(a)}function d(a){v("confirm-authentication-spinner"),g.reject(a)}function f(a){x.view.modalConfig.open=!0,x.view.modalConfig.message=a&&a.data&&a.data.messages[1],x.model.password="",o.isModal=!0,g.reject(a)}var g=p.defer();return u("confirm-authentication-spinner"),j.getPublicKey().then(b).catch(c),g.promise}function t(a){function c(){n.go(w.successRoute)}function d(a){x.view.modalConfig.open=!0,x.view.modalConfig.message=a&&a.data&&a.data.messages[1],o.isModal=!0}var e=b.confirm(a);return e.then(c).catch(d),e}function u(a){o.$emit(c.SPINNING_START,{target:a})}function v(a,b){o.$emit(c.SPINNING_STOP,{target:a,disabledBtn:b})}var w,x=this,y=new JSEncrypt;x.view={modalConfig:{open:!1,message:""}},x.model={password:""},x.cancel=q,x.openKeyboard=r,x.validatePassword=s}a.$inject=["authenticationFactory","authenticationService","commonEvents","commonRoutes","changeCardPasswordService","creditCardRoutes","invoiceInstallmentFactory","invoiceInstallmentService","productDetailService","rsaPublicKeyService","userService","VirtualKeyboard","$scope","$state","$rootScope","$q"],angular.module("internetBanking.creditCard").controller("AuthenticationController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){var a=e.getDataTransaction();x.receiveType=a.onlySMS?"SMS":"DEFAULT",x.model.receive=x.receiveType,x.view.disabledBtnSendToken=k.countTokenAttempts>4&&"SMS"==x.receiveType}function q(){var a=e.getDataTransaction();A={data:{tipoDeEnvio:x.model.receive,tipoTransacaoToken:a.kindTokenTransaction,nome:g.user.user,ultimosQuatroDigitosCartao:B.contractNumber},prefixEndpoint:a.prefixEndpoint,successRoute:a.successRoute};for(var b in a.dataTransaction)A.data[b]=a.dataTransaction[b];return A}function r(a){var b=6,d=c.open(l,[b,b],null,a);return x.view.disabledToken=!0,x.model.token="",d.then(function(a){x.model.token=a,x.view.disabledToken=!1,x.view.disabledConfirm=!1},function(a){x.view.disabledToken=!1}),d}function s(){function a(a){x.resend=!0,o(function(){x.view.disabledBtnSendToken=k.countTokenAttempts>4&&"SMS"==x.receiveType,x.view.labelBtnSendToken=C.resend},z),x.view.modalMessage=t(a.data.destinoDeEnvio),x.view.modalConfig.open=!0,x.view.disabledToken=!1}function b(a){x.view.modalMessage=a&&angular.equals(a.status,422)?a.data.messages[1]:C.sendTokenError,x.view.modalErrorConfig.open=!0,x.view.disabledBtnSendToken=!1}v("send-token-spinner"),x.view.disabledBtnSendToken=!0;var c,e=q();return c=x.resend?d.resend(e):d.send(e),c.then(a).catch(b).finally(function(){w("send-token-spinner",!1)}),c}function t(a){return("EMAIL"===x.model.receive?"Código enviado via E-mail para ":"Código enviado via SMS para o número ")+a}function u(){function a(a){k.countTokenAttempts=0,"app.navigation.cc.solicitation.santanderEnv"==c.successRoute?(i.sendEvent({ID:j.CARTAO_CREDITO.ACCOUNT_PAYMENT.AFTER_TOKEN}),m.go(c.successRoute,{urlRedirecionamento:a.data.urlRedirecionamento})):m.go(c.successRoute)}function b(a){var b=a&&a.data&&a.data.messages&&a.data.messages[1]||"Falha na autenticação. O token informado esta incorreto.",c="";"SMS"===x.receiveType&&(k.countTokenAttempts+=1),c=k.countTokenAttempts>4?C.confirmTokenError:C.confirmTokenWarning,x.view.modalErrorConfig.open=!0,x.view.disabledConfirm=!0,x.view.disabledToken=!0,x.model.token="",x.view.disabledBtnSendToken=k.countTokenAttempts>4&&"SMS"==x.receiveType,x.view.modalMessage=k.countTokenAttempts<4?b:c,x.resend=!1}v("confirm-token-spinner");var c=q();c.token=x.model.token;var e=d.confirmOperation(c);return e.then(a).catch(b).finally(function(){w("confirm-token-spinner",!0)}),e}function v(a){k.$emit(h.SPINNING_START,{target:a})}function w(a,b){k.$emit(h.SPINNING_STOP,{target:a,disabledBtn:b})}var x=this,y=n("translate"),z=1e4,A={},B=f.getCurrentProduct().data,C={sendNow:y("@SITE-CARTAO-CREDITO-LINK-SEGURANCA-ENVIAR-AGORA"),resend:y("@SITE-CARTAO-CREDITO-LINK-SEGURANCA-REENVIAR-AGORA"),
sendTokenError:y("@SITE-CARTAO-CREDITO-SEGURANCA-AUTENTICACAO_TOKEN-ENVIAR-MODAL-ERRO"),confirmTokenWarning:y("@SITE-CARTAO-CREDITO-SEGURANCA-AUTENTICACAO_TOKEN-CONFIRMAR-MODAL-AVISO"),confirmTokenError:y("@SITE-CARTAO-CREDITO-SEGURANCA-AUTENTICACAO_TOKEN-CONFIRMAR-MODAL-ERRO")};x.resend=!1,k.countTokenAttempts=_.isNumber(k.countTokenAttempts)?k.countTokenAttempts:0,x.view={creditCardRoutes:b,disabledToken:!0,disabledConfirm:!0,disabledBtnSendToken:!1,modalConfig:{open:!1},modalErrorConfig:{open:!1},labelBtnSendToken:C.sendNow},x.model={receive:""},x.receiveType="",x.onFocusTokenValue=r,x.onConfirmSendToken=s,x.onConfirmToken=u,p()}a.$inject=["modalHelpersService","creditCardRoutes","VirtualKeyboard","authenticationTokenService","authenticationTokenFactory","productDetailService","userInfoService","commonEvents","dataLayerFactory","dataLayerSendEventCode","$rootScope","$scope","$state","$filter","$timeout"],angular.module("internetBanking.creditCard").controller("AuthenticationTokenController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){p.listPeriods=m(),j(!1)}function j(a){function c(b){var c=e.translate(b.data);if(!Object(c).hasOwnProperty("totalPoints")||!isNaN(c.totalPoint))throw new Error;n(c.totalPoints),a&&(k(c.events),p.view.showTableDescription=a)}function f(a){var c;a&&a.data?(c=a.data.messages[1]||a.data.messages[0],b.isModal=!0,p.view.modalConfig.extractPoints.open=!0,p.view.modalConfig.extractPoints.errorMessage=c):(p.listEvents=[],p.view.showTableDescription=angular.isDefined(p.period.startDate))}a||(p.period=p.listPeriods[0],p.period.startDate=p.listPeriods[1].startDate,p.period.endDate=p.listPeriods[1].endDate),d.get(p.period.startDate,p.period.endDate).then(c).catch(f)}function k(a){Array.isArray(a)&&(p.listEvents=a)}function l(a){p.period=a}function m(){for(var a=6,b=[{label:""}],c=Date.now(),d=1;d<=a;d++)b.push({value:d,label:d>1?"Últimos {0} meses".replace("{0}",d):"Mês atual",startDate:d>1?moment(c).subtract(d-1,"months").startOf("month").format("YYYY-MM-DD"):moment(c).startOf("month").format("YYYY-MM-DD"),endDate:moment(c).format("YYYY-MM-DD")});return l(b[0]),b}function n(a){p.totalPoints=a}function o(){c.go(g.HOME)}var p=this;p.view={buttonActive:!0,showTableDescription:!1,modalConfig:{extractPoints:{open:!1,errorMessage:""}}},p.period={},p.totalPoints=void 0,p.listEvents=void 0,p.listPeriods=[],p.getTotalPointsByPeriod=j,p.closeModalAndReturnToHome=o,i()}a.$inject=["$filter","$rootScope","$state","extractPointsService","extractPointsFactory","commonEvents","creditCardRoutes","currentProductDetailsService"],angular.module("internetBanking.creditCard").controller("ExtractPointsController",a)}(),function(){"use strict";function a(a){function b(){c.view.dataCard=a;var b=a.typeCard.descriptionVariantTypeCard,d="@SITE-AREA-CLIENTE-PROGRAMA-MERECE-PONTOS-CONVERSAO_TEXTO_DOLAR1";"Gold"===b?d="@SITE-AREA-CLIENTE-PROGRAMA-MERECE-PONTOS-CONVERSAO_TEXTO_DOLAR12":"Platinum"===b&&(d="@SITE-AREA-CLIENTE-PROGRAMA-MERECE-PONTOS-CONVERSAO_TEXTO_DOLAR17");var e="Gold"===b||"Platinum"===b;c.view.pointsAcculate={cardType:b,cardTextConversion:d,cardShowText:e}}var c=this;c.view={},b()}a.$inject=["dataCard"],angular.module("internetBanking.creditCard").controller("HowToAccumulatePointsController",a)}(),function(){"use strict";function a(){this.view={}}angular.module("internetBanking.creditCard").controller("KnowTheProgramDeservesController",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){a.getPointsExpiring().then(function(a){var c=b.translate(a.data);j.view.deservePrograms=c||[]}).catch(function(a){e.isModal=!0,j.view.modalConfig.open=!0,j.view.modalConfig.message=a&&a.data?a.data.messages[1]:"Pontuação indisponível"})}function h(){new Date(2020,4,31)>=new Date&&(j.view.date=!0)}function i(){f.go(c.HOME)}var j=this;j.view={date:!1,deservePrograms:{},modalConfig:{open:!1}},j.model={},j.closeModalAndReturnToHome=i,g(),h()}a.$inject=["seePointsExpiringService","seePointsExpiringFactory","creditCardRoutes","commonEvents","$rootScope","$state"],angular.module("internetBanking.creditCard").controller("SeePointsExpiringController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){k().finally(function(){})}function k(){function b(a){if(!a.data)throw new Error("Pontuação indisponível");for(var b=e.translate(a.data),c=0;b.rewards.length>c;c++)3===b.rewards[c].cod&&(b.rewards[c].imageBase64=p.latamPassLogo,b.rewards[c].rewardName=p.latamPassName);l(b)}function c(b){var c;c=b&&b.data?b.data.messages[1]:"Não há pontos a serem exibidos",p.view.modal.loadProgramErr.open=!0,a.isModal=!0,p.view.modal.loadProgramErr.message=c}return f.getCatalogProgramPoints().then(b).catch(c)}function l(a){m(a);p.view.totalPoints=a.totalPoints,p.view.listRewards=a.rewards,p.view.linkWebPrizes="https://www.bvprogramamerece.com.br/"}function m(a){for(var b=a.rewards.length,c=0;c<b;c++)a.rewards[c].maxPointsRescue=0,a.rewards[c].minPointsRescue=0,a.rewards[c].lotePointsAmount=0,a.rewards[c].condictions.length>0&&(a.rewards[c].maxPointsRescue=d("number")(a.rewards[c].condictions[0].maxPointsRescue),a.rewards[c].minPointsRescue=a.rewards[c].condictions[0].minPointsRescue,a.rewards[c].lotePointsAmount=d("number")(a.rewards[c].condictions[0].lotePointsAmount));return a}function n(a){var d=a;return d.totalPoints=e.getDataTransaction().totalPoints,e.setDataTransaction(d),a.cod!==i.OUTROS_BENEFICIOS.COD?a.cod!==i.DESCONTO_FINANCIAMENTO_VEICULO.COD&&(b.go(g.DESERVE_PROGRAM_RESCUE_POINTS_REWARD),!0):(c.open(p.view.linkWebPrizes),!1)}function o(){b.go(g.HOME)}var p=this;p.view={modal:{loadProgramErr:{open:!1}}},p.onClickRewards=n,p.modalClose=o,p.latamPassLogo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHIAAAAmCAYAAAAYws+cAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAcqADAAQAAAABAAAAJgAAAAC97fsdAAAWbElEQVR4Ae2bCXQWVZaA76t/SViyYhLABVRExA2wFdzauLQLSEiCsdVxn3Y5LmNr245rN7Yeu9uxdew5akuPo62OrawSUGm1HWDcFUVtFINL0BBZAlmAJP9SVfPdqr/Cn+QPCTRKnzO+nEpVvXffrfvu9u677/1GMpSmkqn7iNgnJWxrflHDnG8ygPxdVYVScaQj1gRXEnXNUj2zN2QFMnkvV0KVIhagyfeapHpJ0Ie2s10JDxZx3aCu692ImwiJ+3iDVG/StnwpH2OJVeqIcY04f22UuX/r2kff86T8xJBYBzs8u5JcDq0vaf1WekSM2GsbpX6WyNKEtu2qEs70Ycd1h2Sb0MOu5dzRXFyx0HbMjKQJLS5eP3NzJvjtrbPFKQtJ9o22JN+mb6+CdMX80kj0YmWnK876Iqk6ZL3MXON/17rRSOQQbfOLz3aRUOpdW+JOUpILqECQpYzZfQDFOMpQgYCWipx2tMgLsY4O/oNBAe4C7gju1Jjm3aTygAaZ8w30/MSS6G2u2NRbCHyP9c2y9OUu/b/TV1XxbgUC3Zhro21SHDHW+WFLFkRNcmlTccXdDSVTxrtStZVL3Xr3XqEWAgMVf3tv0IOk4gAj1o9diTUikPeNhIsSErsi6AeOsx1JnEgbFpu4GrwtCJvm+G8diZ1J2ymOOBOaZIDnWQqk4FQjoSOBX4VHWAm+wwokUhHgC+6FUrk7z6McibcD10CfPBSwlDo+aaZQn+Rb4ORV5Hj9tytLRkGG3fB6dDChjW0INAFjIHdklrF+HnKt15qLk6+2FFf+rLlo6n7fNvEw7zqRyAC+Pwt3eCVCQkrW5btJ2VD99kaZ93GzzH2lSebNbZTII0bMFmWuJaHZ6rab5dkXW2T+Oxh+XK2R/jdgraAzv8Me71RYLIy607LSx4Lwf4CQcwH8EF48rBaOPzg1Xyqwfusg+n5E/f3aHwxYNLddWCyI6UZA7vrZnzHj/JyGtf1MSBAgTsSVVoTKYEIhYyZEjLnHMc7SxpKKBc3FleetLS4r2dnjGCRTR8Gms9GpLZaE790oc99gTnoJV4pVmiu7fi9XpB8M9sbjiJ3dtb1Ack/Bso7BGr/qL/YjTRL9b6ytBoGNLZDo1M7wznH+nCzvhMV5Ejj1oz8UcX4KvOr4fIQ9D6uk3hxSJBN3+vg707PtN6uxuHwO1jWzsbiisjG/PF/B4YQ7aP2z97c79rikuD9Juu6LMLS1P0INI9SE63hCBTQnKtaksDGPRyX0Prge3VhUftqakvMGbPuzHa3qA3ssjiSxxtAArKiV538ukCl3o3hYjrp9c8kgOV3dXx9LVci3PMPcJ21tzLsFkriLzlgqAxb5uciFKeHr1GFhZfQQ940NMn8FAiQgsoYDegFCTdL27CbZ9Bn3WpSjwJbwGMWzqwoTvxkfNdYQ3OcZyajUNpZULsCTzqwvDr1ZtHxmPYQ9oteGwVNGx1xT7rruVBgxFks1cQTajpVqCYkZEjWhC7HSC3PM5k9X7FY+46SGyK/rZGabB9DtH6wTKUI4kzs3mWSjNL2UI7n7wkasUfGbXKCv9+EM8yvhF3MlSnYVdTd17p/5rUDip4DvWJ2bKcPBiTv1aIhrHcIYky9NVU0iT+RJ6zCR8IF4gnZcuwZkQFpPWWJGIEy8mP12k2R9KLII4qa8yej3tcU+FrCFCrsrCkS5tWphKhT8xfBsMVeJcRYNXZ94s7Gk/NZNg6cyIJFBa+Z9nL92zl3564omuK75Ybs4v4cNX6AEks0VNhpR2rLGduXpNtn/6ma5rVlie2UaFAyN6MyCMMAdqQ4uI9nV4LyWucxBMW4B80BYuNQW6xCWGAhWrxDu1r1G/QaMvSZXymCuXxAIOib9EYraUlpAVpoN3tstJgn6zgDP6K34wgfQ5z7cNTf3l3tIVT+ej+bb/enzeYts/lKxN0vTvQROLEWsg5hgzmDO9TSYUS/2KBE5WWRaxphD+3/bJRwy7i+YDxdiYaFYymXCDRMWa2xEzNh2x7kZl/kaDmlGNBl+3myYvlrWy6sQ9qpbOP42iZYcW2eHLn8/YSZWxxxrUUxktYP+4rKyJZRxYDp4XGU0ZREdY1RFYJ34uMhyPIV8CePuBWbeJplb0wHEA8x+ZLPEi7CEXATOGlJwcfh5Sba1Sug+rDgHgX+ldVp2k9xCbI5vxpfwhembZPYXfov/f4BMvBtiMFUrvFnsYkfcdbjSe+EDS5NFngnrvRma0vvpM99fSHSsdLbsIcuz6nDbXWG+i3fVYFnHvJZlmctZP5ayfszFZXnzIBqJ3ouo1aH9wpKkIcvIi/0se85SI4t/UG+G01LGxFKBDRyYAFz1OmUKcWbUQzfIbOaX78u3zQFPkMFH1hWVjciyQpOx0Cqs5nCEGlaXi4YiTIUyUmdbLJ0deaTV/abWdovCEtKQnjYVuxZ1merakg1JsQ7cLHPR7u/Lt80BwwL/JNc2jUUNz+JG/OLi61uHvDeuvxuaTCRQXm/LQYvirrUg5sobxHgbkFk0JS7toSLU0E9FaIm7mojwOeaiJ5My73+1/fvy7XOAGMV6LGKZYtaDr4ddM2OgiS2UtdNWDfjm0g9wugP3NmY0QAfWMe9pUdfJYo2C++W/TiAFWGspDeXZRiZEzZpREXuJhL/+3HytcN+X74IDpqm4/EuCmuHZls6BRt6OOxvv2uK8+Xpc9gmLGUX0h+N0gnkPmtTHapTqyDjWxacQDx4fdWVfJkbkKKT0iICNPNFmf3FNi3VMK7nJ72Ig/9+/Ea4nlHNg/MJWW54j4vwoaQrxohPDnsNUMRL/8d9zmn7d5wh2PoJ74YkC99BiI5VY5cHtIgNW8PByHDy8LEvIsGyxC1pFvhfkd6Bl5qhQ2aTVjvXva10zQgVGOsoTnv9tjVVVlHYDIiU1Zp4BYlGjkMJMlcOkcsgR/dxbGhz3sjfifpJWo1bCeaJWa8wGmftJABvcc+T0I0n8HeEv9oPabd5JAEgj3qCWXYwVm2R+wzahuzQOlcn9mbfJyFiQJc3kheazpNnQBWw7X0uzC6TwMAJBdlHc0VxD4BEZLQ38rDbewW++YkJi/M4HAyVrRc/JEf/TBXJSniMDxzPW8Uxd+1NbwqUzmY5/C/jX87wKOSxnXffBBmlcqcsi6pCSV07LzZdIKa9ncp2M9bFGs8n6m1chZCYCeX6jzGGJ5BdlzBZylnQG3j2VQGd3nUF1/ty6cDQJLHd0i1R/lurWccuTKb8OSfRGf93YUd3rg0bHfJNtJHmZ7O+DG2U+WZXeC9+7zJLIH3wmq2ImFudL4am18hi+Y3tLVbRAYhejFJfT81D1VFo0HZJe1ACCwjjJVFifQf8M8ru/CpIJQTv7o5oavZrrAq59+4LTl4/1Md99mI2B6brwprzQQmqKDItUa/7SlohqxcomefYjr9n/Z/KkciwkT20Tt5x2tJAYFeZGOwah5Gud/tkv50rW6pY0BMEjrNQ0m8JQ5fcJ2nq6B4yCXUP4xnkoWVU+CtEkY+8ko6JmkLEUymm5NF7vf8sHw6sc1yRNZ9HhsYydeqgcIGUlUYnTJ3yqis6/fGAdRUBjZyEqHPkVschI2aMQYidaC2XygVQ8qSlCn0Yfn/4PcPoqka4YisIQkoTGkUYcrLApQeqjXzbIgtU8zQne82Ty3jBuMh2r0GgEbEWUNNXurYLwtnioc1dhhSw91Pdmvd7sbR15wD38U+LcDexUvNQDgFfNgHCJLm7G7MdV7K9bNbYK3Z4vy1yU8I6e+jsSuQi4EQGtCucrmnsDG9Sz2KDe3FPf9PrhJNQR/hOkO36Uys0qHlZi9hLoewd+fA1tuD+NC102Yqyh9Mc9uodSjwDVYVmPcffZxwMZpcGEkXPg6citOJ06xreI5mUIvp4+7fgh+rr5hJ17gIuUojmEdvokbEfCf+a5uyC10ned1mQ+8GMQHM8939e2QHgK1TF/suHrvIKFPONK219b5C8btbVvxdO5GvYSSY73XmD84LjEp+DMpvG9wSpQ7OBm9girm2Quy6XOJVeqCtHYa33Bqwt0EIScwLU7+5UHJCV+Ps8PcvVaEGIVfPCEqGMH55/oNA3aa7fduSqaLwlyu4kT2Dd6LR02KpGfIndPiAgniUL/1pb4/ZvlBZ0Leywqn1Yx7Jeag1tktjd1dbNI7d3O0QkY9LTHZtU7zwVqSyA8h2nReZP3GRCyoEnmrNLWHSzK4T6V1PGOh3NlyjI6/YVOeXwfy7TP5bmbII3EL8Uah/mCdNai9deQEL8Ogdzq15mfMT89xRSCUfdW3AofwlOIRbj0i5FjJzeZGcPMOMiX0aZXWrkUz7Z2kno2aKTe+S+U4tY0gB4f62V+K41LUpcHp1RlKLo5u9X6/A95bvBvMIA5Scbz0eM4tPTA3ynEDN/uvapF5r2Fp1CX5KkZ1nl4114DpYKVkXD0Qxmlw3QfapbnGonKH6LOSxtSvw/Pl3Ttm+kdf4gH4EvqA0Re75sQM2Hy6/Jl3QCeBkFXCshd3DN07y09CNIxvvC85joipD8yiB8NlMgRaO9tXF20q/cPfQsQaYGYkw9jO42FdfAVjEHnKVhl1ycl9JA+c5KOecf9g68EKmRzzUCpIkrfdkEpNgYeCr90vLq3bffYdmuTxFiiSCoW9FTktG332HZrp8EHoKyzyKra1Uyu/8SG6dhGmXdps8x7WddBGioXytQz2QckctuVxTD/+QU7wdVMC1QbNfdODlwRWCMMeyA9eZ8Q90HG9432Rti7h9MOc6VQdruB4wWF9j2VOZLtsucLpHJSgVTh3nek6NaD+4oajNJJObdAymew0X7sjihJxjmyWca8D2OmbCVPJ+zYBOZEIlc5HcYNRwP+xPPCrTDf5dOlRHHrJgauji+v4OoQJJu//4LFFSmDEFgdu/zT06nbItVrYdgDjOdOn4nWlQj/P1MRezpoxzPsfpxkxDksXY7SCJO+x9H3OAS7imUQ87P5EKf7CV+s4artS9ICGu8G1ySEybldXYqF2HWyz2gTqwb6lsFnpjL5xBKHhX/WqvRETAdhqYeMggz8P5bHGsdmkk9UQugYPsw5ANUedUn+WZeuCHfgvQ8BQzrWaVaBvH8XC/JxSgcM5XKfDSDwGMMRMPOePzeygf37TExNivMwIcZljGtPFTrLgGvAcUOAp+tdDzdzcq8qKfbDfPP0wM0CNwxBDONepn3wYg5ufR10fAzMK0xL8xul+kNt61qYomrz5fQyBDYdHEeoYoIBHsv+0MQlumrgz6A58Xpwgse8RM1zJAE+T8en4VK3ki+V5ElHzgLJHSA8GYAhPIPX+xCsg1QOJbXLCtzN9pds2V+XNMel8EWzZP9NWbJfS0yGtojUZhQsTMyJyAGl/WUNR0ysC3xBeetXjkJGbxf5WFVawP0rmJLC7ayCkZfFZGV7VyrjUtOaJaM4whA62VdOOTBLRs6ICauhHkqrfLqpXc56JlvWwlCXYMVlbrU4GgJrKL4g9MVwRMXsTf0J3C/KlgPG9JN9P2mXld32ZtulZm2h7PcUy4BaOuKm3SJ4E6VfOhVoq8mjfiQ4mUvd8/vJqGEDZeT7SpMCdoIOeuZwpB8JE5ml87Rj6aEdF4Hw5p6O2gd4errnSxnMDqdOaisbNPq0t0DOZxBUA0MIsNzNaKIqGgthGcZ9NO17+ySrtXlzC27MmRSkAaF7JLXvApsDVrbE3cs1fdUTHXqWlWOQ6sJGpWggCp93Vc/wnVs4xLwHtJKR0UszXe5+0Ke0qjAYk/IP7D6tDdScyzlcXTb1WPQMEvBj4T3pP138uyMA3guFgQ8aMfsy8XHaNaQqK0lVLs8oSNZp41EB1okBkx0bFO9A0ixcUDWLUHz2jpeugvSFAyu872UkKW0A/pIDqOdwm5zxmv9lQAnzCkILXeLPN95JrNkwucfMDaPT087kjJVhXtlMcHc4rljn3B0o06wB8l5RRCzFdyJXJWNCAZX5agjOGug+AmF+3XfkpeFCySMhLwfDf/WOldC7pwo0Jcx3+zNXZ+Rajkw5ikT5a2hDDQKcRxQ7q0UiS7sme/tOTGfIrYLUATpkMaxaCDkIQjvcVOceqteeJuqOgtL1aJOMqQ7mcoUtkIqDqH+LAbMsUKVQtVCD3nYJrEahUox5DKu8aNu9+tZKJmpgQhLMu+Zmxsnxdt1bsv8VL3F33zB0h9J8L/vH9LfOVwVRy2e8bDtmKBFOoBFNnR6WrMV9zUVmQNOHKrV4s5Kj/j/MkZhuo41GXPtCWgn3/rRxLsFt4YBXPUKuiYi93F8HKuqO+Mb7DgK5AUEgRD283LsAA+J8RqjovQiXvnIWQcX9O2OtnOLdL4hqj4Hxx+tX8Ce4zR0vGnGXyMlXxKTfsSjI3ooJys/NKMjUlhXzlIjuHsQlOzt9Hab1O7HA9Zk2E++n4NRruwuJ/XEM6kzfpeo8Yj+OQGq2D5G5GBz7wHBSfsmb6EvEuHMK/mGdOtZU6XgIKrb3vlZe3IJyNEOv1xXc4YyCFCkN50rh2BCnz5kTK8OSXEQPQvp/zELkeSMCyMJ6GZrzaZ4UXFa7nXuNWOFqrPNRXxmsCgKZCSg0cYJfaD8Pj/Fupo3yACbTPUfKWEaY49Xi/QDI/cSHq4rmSeyCiIQX6E/1MvXtqY4Y5hSEyDys040X9D2dUZB5kkPS3CZqDYVV5jDorZ6Q7up6/0ezUh64VNzM77ZXiDoG0o/PcOj5WhSCsZsIcxnzmmhShD0p3UWJ34fTDvPj1+dYoD9Pyu8dDkTXpRLYiqJT0bRfhJ/0YY3TYHqxchEa23H7sxUwX9oQRHg669l6grT5qOBCqpeRukOo3X6rqV3wjlP2RB2m8qjJ9SxoVe/zFSfxl2QUJJ/UY6xh1U6doAMT5uEfrXAEzLkJ5rCT4A1qeba0P4XP2e6i6ccCKdMg5EnfKs1EgrJSfh39PyFJTESpB6lVMV+fAwPPCYmtp9rrcHF1vuv08qYaBevSZ3d2XvaHpsG+ANVTaFBi3xks2TgJdRaeRAUxFNyXAcflbMqXKBFt+WqMZz0jSkXchiMgshdC1ERBodKRKkngrtdjKxkFCaHQ5q8bQd4K8OKg5066+84dZHyo43l7cSujoXPSVrdl7tH5Y3vxBPCNkpiVL3IdjB2HMPj1loPmVy3hfFo7YvgKJu6lsD4jTT8eWTda+6XNf5644JeOy4P03amzCYW7k3z1v3nV/j82pZ0NtA/yX7WHyeEazcNoPdufXnTm1y/rnx/M2Rw3Tl7Pbz9nKlxn6I6eqljue2jQLcw5h/OD0T92NO2cB1JOXoovDoHxHUNZihKan3GBix+GifOOuscdwxX0eoHNAvkNmtWOpcRg2FH89O5kBDArKYnDYOIFKDaMc7/06UfcKT30RafMhhqvzvuZmp7T+Q/ej0otOXwAYMB5j0jsMPBdzfU8OFdzedmpzjg9lKl/boyHD8FJQsWdgBD/HLT2YA36613csUxPBIA7854jk3eLSnQ3xcnJnbYd29MsDedIzgg9r0c+S2LibNw5kfU0K0c+GMHvPlFyh1O6scb18vya9PFrutD286vDmZOHwsQSBHk0AlA4MkVSjwGsjEjWyr4u33QeJi4ZzkXuVlOiFgfa3AngI2crn4KzDldbs1GinxHld1P+/wPxm79DbT2PmgAAAABJRU5ErkJggg==",p.latamPassName="LATAM Pass",j()}a.$inject=["$rootScope","$state","$window","$filter","rescuePointsFactory","rescuePointsService","creditCardRoutes","commonEvents","deserveProgram"],angular.module("internetBanking.creditCard").controller("RescuePointsController",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){h.view.dataReward=c.getDataTransaction();var a=h.view.dataReward.codAirCompany,b=[{codigo:2,produto:"TAM",texto1:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-MULTIPLUS-TEXTO1",mostrarTexto1:!0,texto2:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-MULTIPLUS-TEXTO2",mostrarTexto2:!0,disclimer1:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-MULTIPLUS-DISCLIMER1",mostrarDisclimer1:!0,disclimer2:"",mostrarDisclimer2:!1,disclimer3:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-MULTIPLUS-DISCLIMER3",mostrarDisclimer3:!0,resgateTexto:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-MULTIPLUS-RESGATE-TEXTO",mostrarResgateTexto:!0,resgateInput1:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-MULTIPLUS-RESGATE-INPUT1",mostrarResgateInput1:!0,resgateInput2:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-MULTIPLUS-RESGATE-INPUT2",mostrarResgateInput2:!0,resgateCancelarBtn:"@SITE-CARTAO-CREDITO-CANCELAR",mostrarResgateCancelarBtn:!0,resgateContinuarBtn:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-MULTIPLUS-RESGATE-CONTINUAR-BTN",mostrarResgateContinuarBtn:!0},{codigo:0,produto:"CB",texto1:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-CASHBACK-TEXTO1",mostrarTexto1:!0,texto2:"",mostrarTexto2:!0,disclimer1:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-CASHBACK-DISCLIMER",mostrarDisclimer1:!0,disclimer2:"",mostrarDisclimer2:!1,disclimer3:"",mostrarDisclimer3:!1,resgateTexto:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-CASHBACK-SIMULAR-TEXTO",mostrarResgateTexto:!0,resgateInput1:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-CASHBACK-SIMULAR-INPUT",mostrarResgateInput1:!0,resgateInput2:"",mostrarResgateInput2:!1,resgateCancelarBtn:"@SITE-CARTAO-CREDITO-CANCELAR",mostrarResgateCancelarBtn:!1,resgateContinuarBtn:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-CASHBACK-SIMULAR-BTN",mostrarResgateContinuarBtn:!0},{codigo:6,produto:"AZUL",texto1:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-TUDO-AZUL-TEXTO1",mostrarTexto1:!0,texto2:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-TUDO-AZUL-TEXTO2",mostrarTexto2:!0,disclimer1:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-TUDO-AZUL-DISCLIMER1",mostrarDisclimer1:!0,disclimer2:"",mostrarDisclimer2:!1,disclimer3:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-TUDO-AZUL-DISCLIMER3",mostrarDisclimer3:!0,resgateTexto:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-TUDO-AZUL-RESGATE-TEXTO",mostrarResgateTexto:!0,resgateInput1:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-TUDO-AZUL-RESGATE-INPUT1",mostrarResgateInput1:!0,resgateInput2:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-TUDO-AZUL-RESGATE-INPUT2",mostrarResgateInput2:!0,resgateCancelarBtn:"@SITE-CARTAO-CREDITO-CANCELAR",mostrarResgateCancelarBtn:!0,resgateContinuarBtn:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-TUDO-AZUL-RESGATE-CONTINUAR-BTN",mostrarResgateContinuarBtn:!0},{codigo:1,produto:"SMI",texto1:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-SMILES-TEXTO1",mostrarTexto1:!0,texto2:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-SMILES-TEXTO2",mostrarTexto2:!0,disclimer1:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-SMILES-DISCLIMER1",mostrarDisclimer1:!0,disclimer2:"",mostrarDisclimer2:!1,disclimer3:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-SMILES-DISCLIMER3",mostrarDisclimer3:!0,resgateTexto:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-SMILES-RESGATE-TEXTO",mostrarResgateTexto:!0,resgateInput1:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-SMILES-RESGATE-INPUT1",mostrarResgateInput1:!0,resgateInput2:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-SMILES-RESGATE-INPUT2",mostrarResgateInput2:!0,resgateCancelarBtn:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-SMILES-RESGATE-CANCELAR-BTN",mostrarResgateCancelarBtn:!0,resgateContinuarBtn:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-SMILES-RESGATE-CONTINUAR-BTN",mostrarResgateContinuarBtn:!0}],d=_.find(b,function(b){return b.codigo===a});h.view.rewardPrize=d}function g(){function c(a,b){h.view.modalMessage=a,h.view.modalConfig.open=b}var f=h.view.dataReward.codAirCompany,g="",i="",j=parseInt(h.view.rescuePoints),k=h.view.dataReward.minPointsRescue,l=h.view.dataReward.lotePointsAmount,m=j%(1e3*parseFloat(l))==0;if(j<h.view.dataReward.minPointsRescue||!m)return i=a("translate")("@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-RESGATE-MINIMO-PONTOS-RESGATE",{minPointsRescue:k,lotePointsAmount:l}),c(i,!0),!1;if(j>parseFloat(h.view.dataReward.totalPoints))return i=a("translate")("@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-RESGATE-MAIOR-QUE-TOTAL",{minPointsRescue:k,lotePointsAmount:l}),c(i,!0),!1;if(0!==f){switch(f){case 2:g=a("translate")("@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-MULTIPLUS-RESGATE-INPUT2");break;case 1:g=a("translate")("@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-SMILES-RESGATE-INPUT2");break;case 6:g=a("translate")("@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-RESGATAR-TUDO-AZUL-RESGATE-INPUT2")}if(0===h.view.numberDocument.length)return h.view.modalMessage="O "+g+" deve ser preenchido.",h.view.modalConfig.open=!0,!1}var n={dataReward:h.view.dataReward,rescuePoints:h.view.rescuePoints,numberDocument:h.view.numberDocument||"Indisponível"};d.setDataTransaction(n),b.go(e.DESERVE_PROGRAM_RESCUE_POINTS_EXTRACT)}var h=this;h.view={buttonActive:!0,modalConfig:{open:!1},modalMessage:"",onClickContinueReward:g},h.view.dataReward={},h.view.rescuePoints="",h.view.numberDocument="",f()}a.$inject=["$filter","$state","rescuePointsFactory","rescuePointsRewardFactory","creditCardRoutes"],angular.module("internetBanking.creditCard").controller("RescuePointsRewardController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){p(i.getCurrentProduct().data.contractNumber),k(),jQuery(".main_content__inner, .main_wrap").scrollTop(0)}function k(){var a=l(d.typeCard.codeVariantTypeCard);r.view.listExemptionAnnuity=m(a),r.view.listExemptionAnnuityMonthly=n(a)}function l(a){return a<=2?2:a}function m(a){return o([{code:4,cardType:"Gold",monthlySpending:"A partir de R$ 750,00",monthDiscount:"2,09%",annualDiscount:"25%"},{code:4,cardType:"Gold",monthlySpending:"A partir de R$ 1.500,00",monthDiscount:"4,17%",annualDiscount:"50%"},{code:4,cardType:"Gold",monthlySpending:"A partir de R$ 2.250,00",monthDiscount:"6,25%",annualDiscount:"75%"},{code:4,cardType:"Gold",monthlySpending:"A partir de R$ 3.000,00",monthDiscount:"8,34%",annualDiscount:"100%"},{code:2,cardType:"Nacional Básico",monthlySpending:"A partir de R$ 150,00",monthDiscount:"2,09%",annualDiscount:"25%"},{code:2,cardType:"Nacional Básico",monthlySpending:"A partir de R$ 300,00",monthDiscount:"4,17%",annualDiscount:"50%"},{code:2,cardType:"Nacional Básico",monthlySpending:"A partir de R$ 450,00",monthDiscount:"6,25%",annualDiscount:"75%"},{code:2,cardType:"Nacional Básico",monthlySpending:"A partir de R$ 600,00",monthDiscount:"8,34%",annualDiscount:"100%"},{code:3,cardType:"Internacional",monthlySpending:"A partir de R$ 450,00",monthDiscount:"2,09%",annualDiscount:"25%"},{code:3,cardType:"Internacional",monthlySpending:"A partir de R$ 900,00",monthDiscount:"4,17%",annualDiscount:"50%"},{code:3,cardType:"Internacional",monthlySpending:"A partir de R$ 1.350,00",monthDiscount:"6,25%",annualDiscount:"75%"},{code:3,cardType:"Internacional",monthlySpending:"A partir de R$ 1.800,00",monthDiscount:"8,34%",annualDiscount:"100%"},{code:5,cardType:"Platinum",monthlySpending:"A partir de R$ 1.250,00",monthDiscount:"2,09%",annualDiscount:"25%"},{code:5,cardType:"Platinum",monthlySpending:"A partir de R$ 2.500,00",monthDiscount:"4,17%",annualDiscount:"50%"},{code:5,cardType:"Platinum",monthlySpending:"A partir de R$ 3.750,00",monthDiscount:"6,25%",annualDiscount:"75%"},{code:5,cardType:"Platinum",monthlySpending:"A partir de R$ 5.000,00",monthDiscount:"8,34%",annualDiscount:"100%"}],a)}function n(a){return o([{code:2,cardType:"Nacional Básico",monthlySpending:"A partir de R$ 500,00",annualDiscount:"100% - Anuidade grátis"},{code:3,cardType:"Internacional",monthlySpending:"A partir de R$ 1.000,00",annualDiscount:"50% de desconto"},{code:3,cardType:"Internacional",monthlySpending:"A partir de R$ 1.500,00",annualDiscount:"100% - Anuidade grátis"},{code:4,cardType:"Gold",monthlySpending:"A partir de R$ 1.200,00",annualDiscount:"50% de desconto"},{code:4,cardType:"Gold",monthlySpending:"A partir de R$ 2.500,00",annualDiscount:"100% - Anuidade grátis"},{code:5,cardType:"Platinum",monthlySpending:"A partir de R$ 2.000,00",annualDiscount:"50% de desconto"},{code:5,cardType:"Platinum",monthlySpending:"A partir de R$ 4.500,00",annualDiscount:"100% - Anuidade grátis"},{code:6,cardType:"Mais",monthlySpending:"A partir de R$ 1.200,00",annualDiscount:"50% de desconto"},{code:6,cardType:"Mais",monthlySpending:"A partir de R$ 2.500,00",annualDiscount:"100% - Anuidade grátis"},{code:7,cardType:"Grafite",monthlySpending:"A partir de R$ 2.000,00",annualDiscount:"50% de desconto"},{code:7,cardType:"Grafite",monthlySpending:"A partir de R$ 4.500,00",annualDiscount:"100% - Anuidade grátis"},{code:8,cardType:"Unico",monthlySpending:"A partir de R$ 5.000,00",annualDiscount:"50% de desconto"},{code:8,cardType:"Unico",monthlySpending:"A partir de R$ 10.000,00",annualDiscount:"100% - Anuidade grátis"}],a)}function o(a,b){return a.filter(function(a){return a.code===b})}function p(a){function d(a){var b=c.APIToViewModel(a.data);r.view.annualProgressiveDiscount=b.discountAnnuityProgress,r.view.annuityType=b.discountAnnuityType}function e(a){r.view.modalConfig.message=a&&a.data&&a.data.messages[1],r.view.modalConfig.open=!0,r.view.annualProgressiveDiscount=0}b.getValueDiscount(a).then(d).catch(e)}function q(){h.go(e.HOME)}var r=this;r.view={},r.view.modalConfig={open:!1,message:""},r.view.annualProgressiveDiscount=0,r.view.dataCard=i.getCurrentProduct().productDetail,r.view.endFourNumbersCreditCard=i.getCurrentProduct().data.contractNumber,r.closeModalAndReturnToHome=q,r.view.cardCategoryName=[i.getCurrentProduct().data.title||i.getCurrentProduct().data.alias,i.getCurrentProduct().data.subtitle].join(" "),j()}a.$inject=["$filter","discountAnnuityService","discountAnnuityFactory","dataCard","creditCardRoutes","commonEvents","$rootScope","$state","productDetailService"],angular.module("internetBanking.creditCard").controller("DiscountAnnuityController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){o.view.extract=i.getDataTransaction(),o.view.imageBase64=o.view.extract.dataReward.imageBase64;var a=o.view.extract.dataReward.codAirCompany;m(a),l(a)}function k(a){var c=parseInt(o.view.extract.dataReward.condictions[0].conversionFactor),d=parseInt(o.view.extract.dataReward.minPointsRescue),e=a/d*c;return b("currency")(e,"R$",2)}function l(a){var b=parseInt(o.view.extract.dataReward.totalPoints),c=parseInt(o.view.extract.rescuePoints),d=b-c;o.view.balanceRescue=d,o.view.totalPoints=b,o.view.numberDocument=o.view.extract.numberDocument,0===a&&(o.view.numberDocument=k(c))}function m(a){var b=[{codigo:2,produto:"TAM",quantidadePontos:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-QTDE-PONTOS-RESGATADO",numeroFidelidade:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-NUMERO-MULTIPLUS",disclimer1:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-MULTIPLUS-PONTOS-RESGATADO-DISCLIMER",mostrarDisclimer1:!0,efetivar:"",mostrarEfetivar:!1,resultadoSimulacao:"",mostrarResultadoSimulacao:!1,resgateCancelarBtn:"@SITE-CARTAO-CREDITO-CANCELAR",mostrarResgateCancelarBtn:!0,resgateContinuarBtn:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-CONTINUAR-BTN",mostrarResgateContinuarBtn:!0},{codigo:0,produto:"CB",quantidadePontos:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-CASH-BACK-QTDE-PONTOS-RESGATADO",numeroFidelidade:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-CASH-BACK-VALOR",disclimer1:"",mostrarDisclimer1:!1,efetivar:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-CASH-BACK-EFETIVAR",mostrarEfetivar:!0,resultadoSimulacao:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-CASH-BACK-RESULTADO",mostrarResultadoSimulacao:!0,resgateCancelarBtn:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-CASH-BACK-SIMULACAO-BTN",mostrarResgateCancelarBtn:!0,resgateContinuarBtn:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-CASH-BACK-CONTINUAR-BTN",mostrarResgateContinuarBtn:!0},{codigo:6,produto:"AZUL",quantidadePontos:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-QTDE-PONTOS-RESGATADO",numeroFidelidade:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-NUMERO-TUDO-AZUL",disclimer1:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-TUDO-AZUL-PONTOS-RESGATADO-DISCLIMER",mostrarDisclimer1:!0,efetivar:"",mostrarEfetivar:!1,resultadoSimulacao:"",mostrarResultadoSimulacao:!1,resgateCancelarBtn:"@SITE-CARTAO-CREDITO-CANCELAR",mostrarResgateCancelarBtn:!0,resgateContinuarBtn:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-CONTINUAR-BTN",mostrarResgateContinuarBtn:!0},{codigo:1,produto:"SMI",quantidadePontos:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-QTDE-PONTOS-RESGATADO",numeroFidelidade:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-NUMERO-SMILES",disclimer1:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-SMILES-PONTOS-RESGATADO-DISCLIMER",mostrarDisclimer1:!0,efetivar:"",mostrarEfetivar:!1,resultadoSimulacao:"",mostrarResultadoSimulacao:!1,resgateCancelarBtn:"@SITE-CARTAO-CREDITO-CANCELAR",mostrarResgateCancelarBtn:!0,resgateContinuarBtn:"@SITE-CARTAO-CREDITO-PROGRAMA-MERECE-PONTOS-EXTRATO-CONTINUAR-BTN",mostrarResgateContinuarBtn:!0}],c=_.find(b,function(b){return b.codigo===a});o.view.extractData=c}function n(){o.view.extract=i.getDataTransaction();var b=d.DESERVE_PROGRAM_RESCUE_POINTS_SUCCESS,j={miles:[e.TUDO_AZUL.COD,e.MULTIPLUS.COD,e.SMILES.COD],cashback:[e.DESCONTO_FATURA.COD]},k={ultimosQuatroDigitosCartao:h.getCurrentProduct().data.contractNumber,senhaCartao:"",codigoPremio:o.view.extract.dataReward.cod,tipoPremio:o.view.extract.dataReward.rewardKind,sequencialCondicao:o.view.extract.dataReward.condictions[0].condictionSequence,codigoCategoria:o.view.extract.dataReward.codCategory,codigoProdutoCredito:o.view.extract.dataReward.totalPoints,numeroProgramaFidelidade:o.view.extract.numberDocument,quantidadePontos:o.view.extract.rescuePoints};_.contains(j.cashback,o.view.extract.dataReward.cod)?b=d.DESERVE_PROGRAM_RESCUE_POINTS_CASHBACK:_.contains(j.miles,o.view.extract.dataReward.cod)&&(b=d.DESERVE_PROGRAM_RESCUE_POINTS_MILES);var l={successRoute:b,prefixEndpoint:f.CREDIT_CARD_DESERVE_PROGRAM_RESCUE_POINTS_SUCCESS,kindTokenTransaction:g.rescuePoints,dataTransaction:{solicitacaoResgate:k}};c.setDataTransaction(l),a.go(d.AUTHENTICATION_TOKEN)}var o=this;o.view={buttonActive:!0,extract:{}},o.onClickContinue=n,j()}a.$inject=["$state","$filter","authenticationTokenFactory","creditCardRoutes","deserveProgram","endPoints","kindTokenTransaction","productDetailService","rescuePointsRewardFactory"],angular.module("internetBanking.creditCard").controller("RescueExtractPointsController",a)}(),function(){"use strict";function a(a,b,c,d){function e(){var a=b.getDataTransaction();if(a){var c=a.dataTransaction.solicitacaoResgate,d=c.codigoCompanhiaAerea,e=(c.nomePremio,c.ultimosQuatroDigitosCartao),h=c.numeroProgramaFidelidade;g.view.rescuePoints=c.quantidadePontos,g.view.balanceRescue=c.codigoProdutoCredito,g.view.numberDocument=h,g.view.lastDigitsCard=e,g.view.codAirCompany=d,angular.merge(g.view,f(c))}}function f(a){var b={premios:[],totalPontos:0};return b.premios.push(a),d.translate(b)}var g=this;g.view={destination:"",rescuePoints:"",balanceRescue:""},e()}a.$inject=["$state","authenticationTokenFactory","creditCardRoutes","rescuePointsFactory"],angular.module("internetBanking.creditCard").controller("RescuePointsSuccessController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){l.view.extract=c.getDataTransaction();var a=d.getDataTransaction()&&d.getDataTransaction().dataTransaction,h={ultimosQuatroDigitosCartao:a&&a.solicitacaoResgate.ultimosQuatroDigitosCartao,senhaCartao:l.view.password,codigoPremio:l.view.extract.cod,tipoPremio:l.view.extract.dataReward.rewardKind,codigoCompanhiaAerea:l.view.extract.dataReward.codAirCompany,sequencialCondicao:l.view.extract.condictionSequence,codigoCategoria:l.view.extract.codCategory,codigoProdutoCredito:l.view.extract.dataReward.totalPoints,numeroProgramaFidelidade:l.view.extract.numberDocument,quantidadePontos:l.view.extract.rescuePoints},i={successRoute:e.DESERVE_PROGRAM_RESCUE_POINTS_SUCCESS,prefixEndpoint:g.CREDIT_CARD_DESERVE_PROGRAM_RESCUE_POINTS_SUCCESS,kindTokenTransaction:f.rescuePoints,dataTransaction:{RESGATE:h}};d.setDataTransaction(i),b.go(e.AUTHENTICATION_TOKEN)}function k(b){var c=4,d=i.open(a,[c,c],null,b);return d.then(function(a){l.view.password=a,l.view.disabledToken=!1}).catch(function(){l.view.disabledToken=!0}),d}var l=this;l.view={extract:{},password:"",disabledToken:!0},l.onClickContinue=j,l.onFocusPasswordValue=k}a.$inject=["$scope","$state","rescuePointsRewardFactory","authenticationTokenFactory","creditCardRoutes","kindTokenTransaction","endPoints","dataCard","VirtualKeyboard"],angular.module("internetBanking.creditCard").controller("RescuePointsPasswordController",a)}(),function(){"use strict";function a(a,b){function c(){d()}function d(){function c(a){var c=b.APIToViewModel(a.data);e.balanceNetPoints=c.balancePoints}function d(a){e.error=!0}a.getBalanceNetpoints().then(c).catch(d)}var e=this;e.view={},e.error=!1,c()}a.$inject=["balanceNetpointsService","balanceNetpointsFactory"],angular.module("internetBanking.creditCard").controller("ExtractPointsNetpointsController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){function z(){S.loadingPage=!0,S.watchEvent=!1,d.validate(),A(),c.hasDataInvoiceCache()||o.redirect(S.creditCardRoutes.HOME),B(),f.getLastValue().then(function(a){S.value=a.data.historicoTaxas[0].taxaConversao.replace(".",",")})}function A(){S.statusInvoice={
previous:!1,current:!1,next:!1,hasAdditionalCard:c.getALL().hasAdditionalCard,periodAlternative:!1},S.modalConfig={open:!1,error:!1,alternative:!1,taxes:!1,isTaxes:{open:!1,modifierClass:"-taxes"}},S.showComponents={loosePayment:!1,summary:!1,grafic:!1,previousPaymentComponent:!1,listExtractComponent:!1,totalPaymentComponent:!1,futureChargesComponent:!1,listExtractAdditionalCardsComponent:!1},S.tabsComponent={},S.lastFourNumber=c.getALL().lastFourNumber,S.activeTab=0,S.creditCardRoutes=r,S.statusInvoiceActive=b.get("statusInvoice"),S.statusInvoice.periodAlternative=S.statusInvoiceActive&&S.statusInvoiceActive.periodAlternative}function B(){var a=g.create();S.tabsComponent.data=a.data,S.tabsComponent.onClickTabs=g.onClickTabs,S.indiceInvoicesActive=a.indiceInvoicesActive,null===c.getALL().invoicesDetails[S.indiceInvoicesActive]?C(S.indiceInvoicesActive):(S.invoiceActive={},S.invoiceActive=c.getALL().invoicesDetails[S.indiceInvoicesActive],c.set("invoiceActive",null,S.invoiceActive),S.invoiceActive.index=c.getIndexInvoice("previous"),D())}function C(d){function f(a){S.invoiceActive=e.APIToViewModel(a.data),S.invoiceActive.valueParcialTotalInvoice=S.invoiceActive.valueTotalInvoice,S.invoiceActive.valueTotalInvoice=b.getALL().lastInvoices[S.indiceInvoicesActive].valueTotalInvoice,c.set("invoiceActive",null,S.invoiceActive),S.invoiceActive.index=S.activeTab,null===c.getALL().invoicesDetails[d]&&c.setDataInvoicePrevious({invoicePrevious:angular.copy(S.invoiceActive)}),D()}function g(){R(),S.modalConfig.error=!0,S.modalConfig.open=!0}a.get(c.getParamsInvoice(d)).then(f).catch(g)}function D(){c.set("statusInvoice",null,S.statusInvoice),E(),F(),G(),H(),K(),L(),S.statusInvoice.hasAdditionalCard||S.invoiceActive.detailsInvoiceCards&&S.invoiceActive.detailsInvoiceCards.length>1?N():(O(),M()),P(),Q(),S.statusInvoice.previous=!0,R()}function E(){S.statusInvoice.previous=!1,S.statusInvoice.current=!1,S.statusInvoice.next=!1}function F(){p.setTab(S.activeTab),S.invoiceTitle=p.create()}function G(){h.setTab(S.activeTab),S.informationInvoice=h.create()}function H(){I(S.lastFourNumber),S.modalFeesAndCharges=i.create(),S.onClickShowModal=i.showModalFeesAndCharges}function I(a){y.getTaxes(a).then(function(a){var b=x.translate(a.data);S.listTaxes=b}).catch(function(a){console.error(a)})}function J(){u.isPrint=!0;var a=w.get(T);angular.element("body").append(s(a)(t)),v.go(r.INVOICE_PREVIOUS_PRINT)}function K(){S.showComponents.summary=!0,j.setTab(S.activeTab),S.summary=j.create()}function L(){var a=n.create();return S.invoiceInformationView=a.creditCardTransactions,n.hasInvoiceDetails()&&n.hasCreditCardTransactions()?(S.showComponents.grafic=!0,void(S.grafic=a.graphic)):(S.notGrafic=!0,!1)}function M(){if(S.invoiceActive.detailsInvoiceCards.length>0){S.showComponents.listExtractComponent=!0,S.listExtractComponent={},S.listExtractComponent.notop=!0,S.listExtractComponent.hasTitle=!1,S.listExtractComponent.limitShow=0;var a=q.getExtract(S.invoiceActive.detailsInvoiceCards,S.statusInvoice);S.listExtractComponent.list=a}}function N(){S.invoiceActive.detailsInvoiceCards.length>0&&(S.showComponents.listExtractAdditionalCardsComponent=!0,S.listExtractAdditionalCardsComponent={},S.listExtractAdditionalCardsComponent.name=c.get("name"),S.listExtractAdditionalCardsComponent.lastFourNumber=S.lastFourNumber,S.listExtractAdditionalCardsComponent.data=S.invoiceActive,S.listExtractAdditionalCardsComponent.invoiceOpen=S.statusInvoice.next)}function O(){k.setTab(S.activeTab),k.hasDetailsInvoice()&&(S.showComponents.previousPaymentComponent=!0,S.previousPayment=k.create())}function P(){S.showComponents.totalPaymentComponent=!0,l.setTab(S.activeTab),S.totalPaymentComponent=l.create()}function Q(){S.showComponents.futureChargesComponent=!0,m.setTab(S.activeTab),S.futureChargesComponent=m.create()}function R(){S.loadingPage=!1}var S=this,T="modules/common/extra/print-template/invoice.html";S.onClickShowPrint=J,S.value="",z()}a.$inject=["invoiceDetailService","invoiceDetailCreditCardCurrentService","invoiceDataCurrentService","inactivityService","invoiceDetailFactory","getForeing","settingsOfTheTabsFactory","settingsOfTheInvoiceInformationFactory","settingsOfTheModalFeesAndChargesFactory","settingsOfTheInvoiceSummaryFactory","settingsOfTheInvoicePreviousPaymentFactory","settingsOfTheInvoiceTotalPaymentFactory","settingsOfTheInvoiceFutureChargesFactory","settingsOfTheGraphicFactory","invoiceUtilsFactory","settingsOfTheInvoiceTitleFactory","movementExtractFactory","creditCardRoutes","$compile","$scope","$rootScope","$state","$templateCache","checkLimitAndRatesFactory","checkLimitAndRatesService"],angular.module("internetBanking.creditCard").controller("InvoicePreviousController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D){function E(){ca.loadingPage=!0,ca.watchEvent=!1,d.validate(),F(),e.hasDataInvoiceCache()||v.redirect(ca.creditCardRoutes.HOME),G(),ca.cardType=t.getCurrentProduct(),ca.cardType.data.alias=ca.cardType.data.alias.toLowerCase(),g.getLastValue().then(function(a){ca.value=a.data.historicoTaxas[0].taxaConversao.replace(".",",")})}function F(){ca.lastFourNumber=e.getALL().lastFourNumber,ca.activeTab=1,ca.statusInvoice={previous:!1,current:!1,next:!1,hasAdditionalCard:e.getALL().hasAdditionalCard,periodAlternative:!1},ca.modalConfig={open:!1,error:!1,alternative:!1,taxes:!1,isTaxes:{open:!1,modifierClass:"-taxes"}},ca.modalData={dueDateAlternative:"00/00",valueDueDateAlternative:0},ca.showComponents={loosePayment:!1,summary:!1,grafic:!1,previousPaymentComponent:!1,listExtractComponent:!1,totalPaymentComponent:!1,futureChargesComponent:!1,listExtractAdditionalCardsComponent:!1,listAccordionComponents:!1,listAccordionComponentsTwo:!1},ca.tabsComponent={},ca.creditCardRoutes=u,ca.statusInvoiceActive=c.getALL().statusInvoice,ca.statusInvoice.periodAlternative=ca.statusInvoiceActive&&ca.statusInvoiceActive.periodAlternative}function G(){var a=h.create();ca.tabsComponent.data=a.data,ca.tabsComponent.onClickTabs=h.onClickTabs,ca.indiceInvoicesActive=a.indiceInvoicesActive,null===e.getALL().invoicesDetails[ca.indiceInvoicesActive]?H(ca.indiceInvoicesActive):(ca.invoiceActive={},ca.invoiceActive=e.getALL().invoicesDetails[ca.indiceInvoicesActive],e.set("invoiceActive",null,ca.invoiceActive),ca.invoiceActive.index=e.getIndexInvoice("current"),I())}function H(b){function d(a){ca.invoiceActive=f.APIToViewModel(a.data),ca.invoiceActive.valueParcialTotalInvoice=ca.invoiceActive.valueTotalInvoice,ca.invoiceActive.valueTotalInvoice=c.getALL().lastInvoices[ca.activeTab].valueTotalInvoice,e.set("invoiceActive",null,ca.invoiceActive),ca.invoiceActive.index=ca.activeTab,I()}function g(a){aa(),ca.modalConfig.error=!0,ca.modalConfig.open=!0}a.get(e.getParamsInvoice(b)).then(d).catch(g)}function I(){e.set("statusInvoice",null,ca.statusInvoice),J(),K(),L(),M(),Q(),ca.statusInvoiceActive.pay||U(),ca.statusInvoiceActive.periodAlternative&&X(),P(),ca.statusInvoiceActive.pay||V(),S(),ca.statusInvoice.hasAdditionalCard||ca.invoiceActive.detailsInvoiceCards&&ca.invoiceActive.detailsInvoiceCards.length>1?Z():R(),T(),W(),ca.statusInvoice.current=!0,aa(),c.getALL().scroll&&x(function(){var a=[118,120],b="#line-"+c.getALL().lineScroll,d=jQuery(b).offset().top;d-=a[c.getALL().lineScroll],jQuery(".main_content__inner").animate({scrollTop:d+"px"},"slow"),c.set("scroll",null)},600)}function J(){ca.statusInvoice.previous=!1,ca.statusInvoice.current=!1,ca.statusInvoice.next=!1}function K(){i.setTab(ca.activeTab),ca.invoiceTitle=i.create()}function L(){j.setTab(ca.activeTab),ca.informationInvoice=j.create()}function M(){N(ca.lastFourNumber),ca.showComponents.listAccordionComponents=!0,ca.modalFeesAndCharges=k.create(),ca.onClickShowModal=k.showModalFeesAndCharges}function N(a){D.getTaxes(a).then(function(a){var b=C.translate(a.data);ca.listTaxes=b}).catch(function(a){console.error(a)})}function O(){A.isPrint=!0;var a=B.get("modules/common/extra/print-template/invoice.html");angular.element("body").append(y(a)(z)),w.go(u.INVOICE_CURRENT_PRINT)}function P(){var a=q.create();return ca.invoiceInformationView=a.creditCardTransactions,q.hasInvoiceDetails()&&q.hasCreditCardTransactions()?(ca.showComponents.grafic=!0,void(ca.grafic=a.graphic)):(ca.notGrafic=!0,!1)}function Q(){ca.showComponents.summary=!0,l.setTab(ca.activeTab),ca.summary=l.create()}function R(){if(ca.invoiceActive.detailsInvoiceCards.length>0){ca.showComponents.listExtractComponent=!0,ca.listExtractComponent={},ca.listExtractComponent.notop=!0,ca.listExtractComponent.hasTitle=!1,ca.listExtractComponent.limitShow=0;var a=s.getExtract(ca.invoiceActive.detailsInvoiceCards,ca.statusInvoice);ca.listExtractComponent.list=a}}function S(){m.setTab(ca.activeTab),m.hasDetailsInvoice()&&(ca.showComponents.previousPaymentComponent=!0,ca.previousPayment=m.create())}function T(){ca.showComponents.totalPaymentComponent=!0,n.setTab(ca.activeTab),ca.totalPaymentComponent=n.create()}function U(){ca.showComponents.listAccordionComponents=!0;var a=[];if(ca.paymentComponent={},ca.paymentComponent.totalValueInvoice=ca.invoiceActive.valueTotalInvoice,ca.paymentComponent.minimumValuePayment=ca.invoiceActive.valueMinimumPayment,ca.paymentComponent.lastFourNumber=ca.lastFourNumber,ca.paymentComponent.dueDateInvoice=ca.invoiceActive.dueDateInvoice,ca.paymentComponent.nextInterest=ca.invoiceActive.nextMonthInterest,ca.paymentComponent.maxInterest=ca.invoiceActive.maxInterestCalculated,ca.paymentComponent.taxRate=ca.invoiceActive.iofTaxRate,ca.paymentComponent.additionalTaxRate=ca.invoiceActive.iofAdditionalTaxRate,ca.paymentComponent.monthCET=ca.invoiceActive.nextRevolvingMonthlyCET,ca.paymentComponent.annualCET=ca.invoiceActive.nextRevolvingAnnualCET,a.push({titleDescktop:"Pagar fatura",titleMobile:"Pagar fatura",open:!1,component:1,data:ca.paymentComponent}),ca.invoiceActive.optionInstallments.length>0&&0==ca.statusInvoiceActive.invoiceExpired){var b=ca.invoiceActive.optionInstallments.map(function(a,b){return{label:"<strong> 1 + "+a.quantityInstallment+"x</strong> de "+r.numberToCurrency(a.valueInstallment,"R$ "),value:a.valueInstallment,quantityInstallment:a.quantityInstallment,monthTax:a.monthTax,annualTax:a.annualTax,annualCET:a.annualCET,totalInstallment:a.totalInstallment,checked:0===b}});ca.optionsInstallmentsComponents={},ca.optionsInstallmentsComponents.data=b,ca.optionsInstallmentsComponents.valueSelect=ca.invoiceActive.optionInstallments[0].valueInstallment,ca.optionsInstallmentsComponents.quantityInstallmentSelect=ca.invoiceActive.optionInstallments[0].quantityInstallment,a.push({titleDescktop:"Pague sua fatura em até 1 + "+ca.invoiceActive.quantityInstallmentsPaymentInvoice+" vezes",titleMobile:"Pague sua fatura em até 1 + "+ca.invoiceActive.quantityInstallmentsPaymentInvoice+" vezes",open:!1,component:4,data:ca.optionsInstallmentsComponents})}if(ca.listAccordion={},ca.listAccordion.isImg=!1,ca.listAccordion.index=0,ca.statusInvoiceActive.hasAlternative&&0==ca.statusInvoiceActive.hasPassedPeriodAlternative&&(ca.alternativeDisclamer={},ca.alternativeDisclamer.valueAlternative=ca.invoiceActive.valueDueDateAlternative,ca.alternativeDisclamer.dueDateAlternative=ca.invoiceActive.dueDateAlternative,ca.alternativeDisclamer.index=0,a.push({titleDescktop:"Tenha mais dias para pagar com o vencimento alternativo",titleMobile:"Tenha mais dias para pagar com o vencimento alternativo",open:!1,component:3,data:ca.alternativeDisclamer})),c.getALL().scroll){a[c.getALL().lineScroll].open=!0}ca.listAccordion.items=a}function V(){ca.showComponents.listAccordionComponentsTwo=!0;var a=[];if(ca.paymentComponentTwo={},ca.paymentComponentTwo.totalValueInvoice=ca.invoiceActive.valueTotalInvoice,ca.paymentComponentTwo.minimumValuePayment=ca.invoiceActive.valueMinimumPayment,ca.paymentComponentTwo.lastFourNumber=ca.lastFourNumber,ca.paymentComponentTwo.dueDateInvoice=ca.invoiceActive.dueDateInvoice,ca.paymentComponentTwo.nextInterest=ca.invoiceActive.nextMonthInterest,ca.paymentComponentTwo.maxInterest=ca.invoiceActive.maxInterestCalculated,ca.paymentComponentTwo.taxRate=ca.invoiceActive.iofTaxRate,ca.paymentComponentTwo.additionalTaxRate=ca.invoiceActive.iofAdditionalTaxRate,ca.paymentComponentTwo.monthCET=ca.invoiceActive.nextRevolvingMonthlyCET,ca.paymentComponentTwo.annualCET=ca.invoiceActive.nextRevolvingAnnualCET,a.push({titleDescktop:"Pagar fatura",titleMobile:"Pagar fatura",open:!1,component:1,data:ca.paymentComponentTwo}),ca.invoiceActive.optionInstallments.length>0){var b=ca.invoiceActive.optionInstallments.map(function(a,b){return{label:"<strong> 1 +"+a.quantityInstallment+"x</strong> de "+r.numberToCurrency(a.valueInstallment,"R$ "),value:a.valueInstallment,quantityInstallment:a.quantityInstallment,monthTax:a.monthTax,annualTax:a.annualTax,annualCET:a.annualCET,totalInstallment:a.totalInstallment,checked:0===b}});ca.optionsInstallmentsComponentsTwo={},ca.optionsInstallmentsComponentsTwo.data=b,ca.optionsInstallmentsComponentsTwo.valueSelect=ca.invoiceActive.optionInstallments[0].valueInstallment,ca.optionsInstallmentsComponentsTwo.quantityInstallmentSelect=ca.invoiceActive.optionInstallments[0].quantityInstallment,ca.optionsInstallmentsComponentsTwo.lastFourNumber=ca.lastFourNumber,ca.optionsInstallmentsComponentsTwo.dueDateInvoice=ca.invoiceActive.dueDateInvoice,a.push({titleDescktop:"Pague sua fatura em até 1 + "+ca.invoiceActive.quantityInstallmentsPaymentInvoice+" vezes",titleMobile:"Pague sua fatura em até 1 + "+ca.invoiceActive.quantityInstallmentsPaymentInvoice+" vezes",open:!1,component:4,data:ca.optionsInstallmentsComponentsTwo})}if(ca.listAccordionTwo={},ca.listAccordionTwo.isImg=!1,ca.listAccordionTwo.index=1,ca.statusInvoiceActive.hasAlternative&&(ca.alternativeDisclamerTwo={},ca.alternativeDisclamerTwo.valueAlternative=ca.invoiceActive.valueDueDateAlternative,ca.alternativeDisclamerTwo.dueDateAlternative=ca.invoiceActive.dueDateAlternative,ca.alternativeDisclamerTwo.index=0,a.push({titleDescktop:"Tenha mais dias para pagar com o vencimento alternativo",titleMobile:"Tenha mais dias para pagar com o vencimento alternativo",open:!1,component:3,data:ca.alternativeDisclamerTwo})),c.getALL().scroll){a[c.getALL().lineScroll].open=!0}ca.statusInvoiceActive.periodAlternative&&(a=[],ca.paymentAlternativeComponent={},ca.paymentAlternativeComponent.lastFourNumber=ca.lastFourNumber,ca.paymentAlternativeComponent.totalValueInvoice=ca.invoiceActive.valueTotalInvoice,ca.paymentAlternativeComponent.minimumValuePayment=ca.invoiceActive.valueMinimumPayment,ca.paymentAlternativeComponent.dueDateInvoice=ca.invoiceActive.dueDateInvoice,ca.paymentAlternativeComponent.alternativeDueDate=ca.invoiceActive.dueDateAlternative,ca.paymentAlternativeComponent.totalValueAlternative=ca.invoiceActive.valueDueDateAlternative,a.push({titleDescktop:"Pagar fatura",titleMobile:"Pagar fatura",open:!1,component:2,data:ca.paymentAlternativeComponent})),ca.listAccordionTwo.items=a}function W(){ca.showComponents.futureChargesComponent=!0,o.setTab(ca.activeTab),ca.futureChargesComponent=o.create()}function X(){ca.dueDateAlternative=p.format(ca.invoiceActive.dueDateAlternative,"@SITE-BILLET-GENERATED-DAY-FORMAT"),ca.valueDueDateAlternative=ca.invoiceActive.valueDueDateAlternative,ca.openModalAlternative=$,ca.modalData.dueDateAlternative=ca.dueDateAlternative,ca.modalData.valueDueDateAlternative=r.numberToCurrency(ca.invoiceActive.valueDueDateAlternative,"R$ "),Y()}function Y(){ca.paymentAlternativeComponent={},ca.paymentAlternativeComponent.lastFourNumber=ca.lastFourNumber,ca.paymentAlternativeComponent.totalValueInvoice=ca.invoiceActive.valueTotalInvoice,ca.paymentAlternativeComponent.minimumValuePayment=ca.invoiceActive.valueMinimumPayment,ca.paymentAlternativeComponent.dueDateInvoice=ca.invoiceActive.dueDateInvoice,ca.paymentAlternativeComponent.alternativeDueDate=ca.invoiceActive.dueDateAlternative,ca.paymentAlternativeComponent.totalValueAlternative=ca.invoiceActive.valueDueDateAlternative,ca.paymentAlternativeComponent.onOpenModalAlternative=$,ca.openModalAlternativeClick=ba,ca.listAccordion={},ca.listAccordion.isImg=!0,ca.listAccordion.index=0;var a=[{titleDescktop:"Pagar fatura",titleMobile:"Pagar fatura",open:!1,component:2,data:ca.paymentAlternativeComponent}];if(c.getALL().scroll){a[c.getALL().lineScroll].open=!0}ca.listAccordion.items=a}function Z(){ca.invoiceActive.detailsInvoiceCards.length>0&&(ca.showComponents.listExtractAdditionalCardsComponent=!0,ca.listExtractAdditionalCardsComponent={},ca.listExtractAdditionalCardsComponent.name=e.get("name"),ca.listExtractAdditionalCardsComponent.lastFourNumber=ca.lastFourNumber,ca.listExtractAdditionalCardsComponent.data=ca.invoiceActive,ca.listExtractAdditionalCardsComponent.invoiceOpen=ca.statusInvoice.next)}function $(){_(),ca.modalConfig.alternative=!0,ca.modalConfig.open=!0}function _(){ca.modalConfig.alternative=!1,ca.modalConfig.error=!1}function aa(){ca.loadingPage=!1}function ba(){b.addValuesBilletActive("alternative",ca.invoiceActive.valueDueDateAlternative),v.redirect(ca.creditCardRoutes.INVOICE_BILLET)}var ca=this;ca.onClickShowPrint=O,ca.value="",ca.cardType={},E()}a.$inject=["invoiceDetailService","creditCardStateManagement","invoiceDetailCreditCardCurrentService","inactivityService","invoiceDataCurrentService","invoiceDetailFactory","getForeing","settingsOfTheTabsFactory","settingsOfTheInvoiceTitleFactory","settingsOfTheInvoiceInformationFactory","settingsOfTheModalFeesAndChargesFactory","settingsOfTheInvoiceSummaryFactory","settingsOfTheInvoicePreviousPaymentFactory","settingsOfTheInvoiceTotalPaymentFactory","settingsOfTheInvoiceFutureChargesFactory","formatDateFactory","settingsOfTheGraphicFactory","numberToCurrencyFactory","movementExtractFactory","productDetailService","creditCardRoutes","invoiceUtilsFactory","$state","$timeout","$compile","$scope","$rootScope","$templateCache","checkLimitAndRatesFactory","checkLimitAndRatesService"],angular.module("internetBanking.creditCard").controller("InvoiceCurrentController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(){O.loadingPage=!0,O.watchEvent=!1,d.validate(),x(),e.hasDataInvoiceCache()||p.redirect(O.creditCardRoutes.HOME),y(),a.getLastValue().then(function(a){O.value=a.data.historicoTaxas[0].taxaConversao.replace(".",",")})}function x(){O.statusInvoice={previous:!1,current:!1,next:!1,hasAdditionalCard:e.getALL().hasAdditionalCard,periodAlternative:!1},O.modalConfig={open:!1,error:!1,alternative:!1,taxes:!1,isTaxes:{open:!1,modifierClass:"-taxes"}},O.showComponents={anticipatedPayment:!1,summary:!1,grafic:!1,previousPaymentComponent:!1,listExtractComponent:!1,totalPaymentComponent:!1,futureChargesComponent:!1,listExtractAdditionalCardsComponent:!1},O.lastFourNumber=e.getALL().lastFourNumber,O.activeTab=2,O.tabsComponent={},O.creditCardRoutes=q,O.statusInvoiceActive=c.getALL().statusInvoice}function y(){var a=g.create();O.tabsComponent.data=a.data,O.tabsComponent.onClickTabs=g.onClickTabs,O.indiceInvoicesActive=a.indiceInvoicesActive,null===e.getALL().invoicesDetails[O.indiceInvoicesActive]?z(O.indiceInvoicesActive):(O.invoiceActive={},O.invoiceActive=e.getALL().invoicesDetails[O.indiceInvoicesActive],e.set("invoiceActive",null,O.invoiceActive),O.invoiceActive.index=e.getIndexInvoice("next"),A())}function z(a){function d(a){if(O.invoiceActive=f.APIToViewModel(a.data),O.invoiceActive.valueParcialTotalInvoice=O.invoiceActive.valueTotalInvoice,O.invoiceActive.valueTotalInvoice=c.getALL().lastInvoices[O.indiceInvoicesActive].valueTotalInvoice,e.set("invoiceActive",null,O.invoiceActive),2===e.getIndexInvoice("next")){var b=e.getALL().invoicesDetails[1];e.set("dateInitMoviments",e.getIndexInvoice("next"),b.dateEndMoviments)}else e.set("dateInitMoviments",e.getIndexInvoice("next"),O.invoiceActive.dateInitMoviments);e.set("dateEndMoviments",e.getIndexInvoice("next"),O.invoiceActive.dateEndMoviments),O.invoiceActive.index=O.indiceInvoicesActive,A()}function g(){O.modalConfig.error=!0,O.modalConfig.open=!0,M()}b.get(e.getParamsInvoice(a)).then(d).catch(g)}function A(){e.set("statusInvoice",null,O.statusInvoice),B(),C(),D(),G(),F(),J(),O.statusInvoice.hasAdditionalCard||O.invoiceActive.detailsInvoiceCards&&O.invoiceActive.detailsInvoiceCards.length>1?L():I(),K();var a=0==O.activeTab?0:O.activeTab-1,b=e.getALL().invoices[a];k.hasAnticipatedPayment()&&N(b)&&H(),O.statusInvoice.next=!0,M()}function B(){O.statusInvoice.previous=!1,O.statusInvoice.current=!1,O.statusInvoice.next=!1}function C(){h.setTab(O.activeTab),O.invoiceTitle=h.create()}function D(){i.setTab(O.indiceInvoicesActive),O.informationInvoice=i.create()}function E(){t.isPrint=!0;var a=u.get(P);angular.element("body").append(r(a)(s)),v.go(q.INVOICE_NEXT_PRINT)}function F(){var a=n.create();return O.invoiceInformationView=a.creditCardTransactions,n.hasInvoiceDetails()&&n.hasCreditCardTransactions()?(O.showComponents.grafic=!0,void(O.grafic=a.graphic)):(O.notGrafic=!0,!1)}function G(){O.showComponents.summary=!0,j.setTab(O.indiceInvoicesActive),O.summary=j.create()}function H(){O.showComponents.anticipatedPayment=!0;var a=e.getALL(),b=a.invoices.length;O.anticipatedPayment=k.create()}function I(){if(O.invoiceActive.detailsInvoiceCards.length>0){O.showComponents.listExtractComponent=!0,O.listExtractComponent={},O.listExtractComponent.notop=!0,O.listExtractComponent.hasTitle=!1,O.listExtractComponent.limitShow=0;var a=o.orderMovimentInvoiceWithAdditional(O.invoiceActive,O.lastFourNumber,e.getALL().name);O.invoiceActive.detailsInvoiceCards=a;var b=o.getExtract(O.invoiceActive.detailsInvoiceCards,O.statusInvoice);O.listExtractComponent.list=b}}function J(){l.setTab(O.indiceInvoicesActive),l.hasDetailsInvoice()&&(O.showComponents.previousPaymentComponent=!0,O.previousPayment=l.create())}function K(){O.showComponents.totalPaymentComponent=!0,m.setTab(O.indiceInvoicesActive),O.totalPaymentComponent=m.create()}function L(){O.invoiceActive.detailsInvoiceCards.length>0&&(O.showComponents.listExtractAdditionalCardsComponent=!0,O.listExtractAdditionalCardsComponent={},O.listExtractAdditionalCardsComponent.name=e.getALL().name,O.listExtractAdditionalCardsComponent.lastFourNumber=O.lastFourNumber,O.listExtractAdditionalCardsComponent.data=O.invoiceActive,O.listExtractAdditionalCardsComponent.invoiceOpen=O.statusInvoice.next)}function M(){O.loadingPage=!1}function N(a){return e.getALL().invoices[O.indiceInvoicesActive].valuePay>=a.valueMinimumPayment&&a.valueMinimumPayment>0}var O=this,P="modules/common/extra/print-template/invoice-next.html";O.onClickShowPrint=E,O.value="",w()}a.$inject=["getForeing","invoiceDetailService","invoiceDetailCreditCardCurrentService","inactivityService","invoiceDataCurrentService","invoiceDetailFactory","settingsOfTheTabsFactory","settingsOfTheInvoiceTitleFactory","settingsOfTheInvoiceInformationFactory","settingsOfTheInvoiceSummaryFactory","settingsOfTheAnticipatedPaymentFactory","settingsOfTheInvoicePreviousPaymentFactory","settingsOfTheInvoiceTotalPaymentFactory","settingsOfTheGraphicFactory","movementExtractFactory","invoiceUtilsFactory","creditCardRoutes","$compile","$scope","$rootScope","$templateCache","$state"],angular.module("internetBanking.creditCard").controller("InvoiceNextController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(){s(),jQuery(".main_content__inner").scrollTop(0),t(),p.changeContext("BILL_PAYMENT"),q.sendServer("BILL_PAYMENT")}function s(){Q.dataBillet={},Q.advancePayment=!1,Q.modalConfig={open:!1,billet:!1,error:!1,errorMessage:""},Q.hiddenPDF=!1,Q.onOpenPDF=O}function t(){if(d.hasBilletCache())return v(),!1;var b=d.getDateBillet();b=a.formatToAPI(b);var c=d.getCreditCardCurrent().lastFourNumber,e=d.getCreditCardCurrent().billet.dataActive.valueTotal;if(u(e))return!1;w({fourLastDigits:c,dueDate:b,valueInvoice:e})}function u(a){return!!isNaN(a)&&(P(),Q.modalConfig.open=!0,Q.modalConfig.error=!0,Q.closeModal=N,M(),!0)}function v(){Q.dataBillet={},Q.dataBillet.codeBar=d.getCreditCardCurrent().billet.dataCache.codeBar,y(),Q.loadingLink=!1,d.getCreditCardCurrent().billet.dataCache.valueTotal===d.getCreditCardCurrent().billet.dataActive.valueTotal?A(d.getCreditCardCurrent().billet.dataCache.pdf):z(),M()}function w(a){function b(a){Q.dataBillet=g.APIToViewModel(a.data),x()}function c(a){422==a.status&&(P(),Q.modalConfig.open=!0,Q.modalConfig.billet=!0,Q.modalConfig.errorMessage=a&&a.data&&a.data.messages[1],Q.closeModal=N)}f.get(a.fourLastDigits,a.dueDate,a.valueInvoice).then(b).catch(c)}function x(){y(),z()}function y(){Q.fourLastDigits=B(),Q.dueDateInvoice=C(),Q.valueInvoice=D(),Q.monthAndYear=E(),G(),Q.loadingLink=!0}function z(){function b(a){Q.loadingLink=!1,A(a.data),d.addBillet(Q.dataBillet.codeBar,a.data,d.getCreditCardCurrent().billet.dataActive.valueTotal),M()}function c(a){Q.loadingLink=!1,Q.modalConfig.open=!0,Q.modalConfig.billet=!0,Q.modalConfig.errorMessage=a&&a.data&&a.data.messages[1],Q.closeModal=N}var f=a.formatToAPI(d.getDateBillet());e.get(d.getCreditCardCurrent().lastFourNumber,f,d.getCreditCardCurrent().billet.dataActive.valueTotal).then(b).catch(c)}function A(a){if(R){var b=new o([a]);n.saveAs(b,"Boleto-fatura.pdf")}else{var c=URL.createObjectURL(a);Q.link=c}}function B(){return"•••• •••• •••• "+d.getCreditCardCurrent().lastFourNumber}function C(){var b=d.getCreditCardCurrent().invoiceDetailActive.dueDateInvoice;return a.format(b,"@SITE-COMMON-SHORTDATE-MOMENT")}function D(){return d.getCreditCardCurrent().billet.dataActive.valueTotal}function E(){var e=d.getCreditCardCurrent().invoiceDetailActive.dueDateInvoice,f=new Date(e),g=a.formatDateMonth(e),h=f.getFullYear(),i=F();if(d.getCreditCardCurrent().billet.dataActive.type===b.LOOSE_PAYMENT){Q.advancePayment=!0;var j=new Date(e);j.setMonth(j.getMonth()+1),g=a.formatDateMonth(j),h=j.getFullYear(),Q.hiddenPDF=!0}return c.capitalizeFirstLetter(g)+" "+h+" "+i}function F(){var a="";return d.getCreditCardCurrent().billet.dataActive.type===b.INSTALLMENT?a=" - Parcelamento de fatura "+d.getCreditCardCurrent().billet.dataActive.quantInstallment+"x":d.getCreditCardCurrent().billet.dataActive.type===b.ALTERNATIVE?a=" - Vencimento Alternativo":d.getCreditCardCurrent().billet.dataActive.type===b.LOOSE_PAYMENT&&(a=" - Pagamento Antecipado"),a}function G(){Q.isCopied=!1,Q.copyHelperText=!1,Q.inputIdonError=null,Q.onSuccess=H,Q.onError=I,Q.actionOnCopy=J,Q.notIsCopiedAndNotCopyHelperText=K,Q.broadcastBlurEvent=L,Q.codeBar=Q.dataBillet.codeBar,Q.processingDate=Q.dataBillet.processingDate,Q.date=a.format(Q.processingDate,"@SITE-BILLET-GENERATED-DAY-FORMAT"),Q.time=a.format(Q.time,"@SITE-BILLET-GENERATED-TIME-FORMAT")}function H(a){Q.broadcastBlurEvent(a),Q.isCopied=!0,j.cancel(),j(function(){Q.isCopied=!1},2500)}function I(a){Q.copyHelperText=!0,Q.inputIdonError=a}function J(a){Q.copyHelperText=!1,Q.isCopied=!0,j.cancel(),j(function(){Q.broadcastBlurEvent(a),Q.isCopied=!1,Q.inputIdonError=null},2500),i.$digest()}function K(){return!Q.isCopied&&!Q.copyHelperText}function L(a){i.$broadcast(h.BLUR,a)}function M(){Q.loadingPage=!1}function N(){j(function(){window.history.back()})}function O(){k.open(Q.link),l.sendEvent({ID:m.CARTAO_CREDITO.BILLET})}function P(){Q.modalConfig={open:!1,billet:!1,error:!1,errorMessage:""}}var Q=this;Q.loadingPage=!0,Q.watchEvent=!1;var R=!!document.documentMode;r()}a.$inject=["formatDateFactory","typeBillet","invoiceUtilsFactory","creditCardStateManagement","getPDFBilletCreditCardService","getCodeBarbilletCreditCardService","codeBarsFactory","commonEvents","$rootScope","$timeout","$window","dataLayerFactory","dataLayerSendEventCode","FileSaver","Blob","biocatchFactory","biocatchService"],angular.module("internetBanking.creditCard").controller("InvoiceBilletController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){function l(a){y.errorListProposals=!1,y.loadingList=!0;var c={id:j.contract&&j.contract.id,dueDate:y.formattedSelectDate};return c=e.formatRequest(c),d.get(c).then(function(a){var c=e.formatResponse(a.data),d=c.proposals[0];y.totalSemDescontos=d.valorPrincipal+d.valorMulta+d.valorMora+d.valorEncargos,y.installmentOptions=c;try{angular.merge(document.BVDatalayer.regularize,{bestDate:y.formattedSelectDate,paymentOptions:c,paymentOpenValue:y.totalSemDescontos}),c.onStart&&(document.BVDatalayer.formInfo.step=2,b.customPageView({pageName:"BV|AL|cartao|75dias-ofertas"}))}catch(f){}}).catch(function(){y.errorListProposals=!0,y.modalConfig.open=!0,y.modalConfig.error=!0;try{a.onStart&&b.customPageView({pageName:"BV|AL|cartao|75dias-ofertas-erro-lightbox"})}catch(c){}}).finally(function(){y.loadingList=!1})}function m(){l({onStart:!1})}function n(){return y.selectedDate&&!y.selectedDateFlag}function o(a,b){delete y.installmentSelected,y.installmentOptions.proposals.map(function(a){a.numeroParcelas===b.numeroParcelas?a.selected=!b.selected:a.selected=!1}),y.installmentSelected=b,y.installmentChecked=_.find(y.installmentOptions.proposals,{selected:!0})||{selected:!1}}function p(a,b,c){var d="installment-line-"+b;y.installmentOptions.proposals.map(function(a,c){angular.equals(c,b)?(a.showDetails=!a.showDetails,q(d)):a.showDetails=!1}),c.stopPropagation()}function q(a){setTimeout(function(){document.getElementById(a).scrollIntoView({block:"start",behavior:"smooth"})},300)}function r(){y.modalConfig={dueDates:{open:!1,modifierClass:"-datepicker"},open:!1,confirmation:!1,errorGenerate:!1,success:!1,error:!1}}function s(){if(y.alternativeDueDates)return c.datepickerOptions.minDate=y.alternativeDueDates[0].expiryDate,c.datepickerOptions.maxDate=y.alternativeDueDates[y.alternativeDueDates.length-1].expiryDate,y.selectedDate=y.selectedDateFlag?y.selectedDate:y.alternativeDueDates[0].expiryDate,y.openDatePicker=!0,y.dueDate=y.selectedDate,y.selectedDateFlag=!0,y.openModal(y.modalConfig.dueDates),void a.$broadcast(h.CHECK_DATES,{maxDate:c.datepickerOptions.maxDate})}function t(){if(y.selectedDateFlag=!0,!y.formattedSelectDate)return!1;y.formattedSelectDate=moment(y.selectedDate).format("DD/MM/YYYY"),y.installmentSelected&&m(),y.closeModal(y.modalConfig.dueDates)}function u(){if(!y.modalConfig.confirmation)return v();var a={id:j.contract.id,dueDate:y.formattedSelectDate,numeroParcelas:_.find(y.installmentOptions.proposals,{selected:!0}).numeroParcelas},c=f.formatRequest(a);g.get(c).then(function(c){angular.merge(document.BVDatalayer.regularize,{bestDate:a.dueDate,numeroParcelas:a.numeroParcelas}),k.go("app.navigation.cc.solicitation.regularization.billet",{dueDate:a.dueDate,option:_.find(y.installmentOptions.proposals,{selected:!0}),proposal:f.formatResponse(c.data),numberParcels:a.numeroParcelas}).then(function(){try{document.BVDatalayer.formInfo.step=3,b.customPageView({pageName:"BV|AL|cartao|75dias-boleto"})}catch(a){}})}).catch(function(){y.modalConfig.open=!0,y.modalConfig.errorGenerate=!0;try{b.customPageView({pageName:"BV|AL|cartao|75dias-boleto-erro-lightbox"})}catch(a){}})}function v(){return y.modalConfig.open=!0,y.modalConfig.confirmation=!0,y.modalConfig.confirmation}function w(a){if(y.alternativeDueDates){return!y.alternativeDueDates.filter(function(b){var c=moment(b.expiryDate).format("DD/MM/YYYY");return angular.equals(c,moment(a).format("DD/MM/YYYY"))}).length}}function x(){y.alternativeDueDates&&y.alternativeDueDates[0]||(y.alternativeDueDates=[{expiryDate:new Date}]),c.datepickerOptions.minDate=y.alternativeDueDates[0].expiryDate,c.datepickerOptions.maxDate=y.alternativeDueDates[y.alternativeDueDates.length-1].expiryDate,y.selectedDate=y.selectedDateFlag?y.selectedDate:y.alternativeDueDates[0].expiryDate,y.openDatePicker=!0,y.dueDate=y.selectedDate,y.selectedDateFlag=!0,a.$broadcast(h.CHECK_DATES,{maxDate:c.datepickerOptions.maxDate})}var y=this;if(y.checkIt=o,y.datePickerOptions=c.datepickerOptions,y.disableInvalidDates=w,c.datepickerOptions.minDate=moment(),c.datepickerOptions.maxDate=moment(),y.getDueDates=s,y.installmentSelected={},y.installmentChecked=!1,y.gotoGenerateBillet=u,y.showDetails=p,
y.changeDate=m,y.verifyDateSelected=n,y.closeChooseDate=t,y.openModal=i.openModal,y.closeModal=i.closeModal,y.confirm=v,y.getListProposalOptions=l,document.BVDatalayer.regularize={},r(),!j.dueDates)return void(y.notSelectedDates=!0);y.alternativeDueDates=j.dueDates&&j.dueDates.datasVencimento||Array(moment(new Date).format("DD/MM/YYYY")),y.alternativeDueDates=y.alternativeDueDates.map(function(a){return{expiryDate:moment(a,"DD/MM/YYYY").toDate()}}),y.formattedSelectDate=moment(y.alternativeDueDates[0].expiryDate).format("DD/MM/YYYY"),l({onStart:!0}),x()}a.$inject=["$rootScope","dataLayerFactory","datepickerManagerService","listProposalOptionsService","listProposalOptionsFactory","proposalsFactory","proposalsService","commonEvents","modalHelpersService","$stateParams","$state"],angular.module("internetBanking.creditCard").controller("RegularizationController",a)}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){j(),m.proposal=a.proposal||[[]],m.dueDate=a.dueDate,m.option=a.option||[],m.codeBar=m.proposal.boletoPrimeiraParcela.linhaDigitavel,m.codeBarClean=m.proposal.boletoPrimeiraParcela.linhaDigitavel.replace(/[. ]/g,""),m.numberParcels=a.numberParcels,m.totalPagamento=m.option&&m.numberParcels*m.option.parcela.valorParcela,m.isRegBarcodeCopied=!1}function i(a){a.stopPropagation();var h=c.defer(),i={identificadorAcordo:m.proposal.codigoAcordo};return f.get(i).then(function(a){var c;g.IS_IE?(c=new Blob([l(a.data.base64)]),e.saveAs(c,"acordo-cartao.pdf")):(c=URL.createObjectURL(l(a.data.base64)),b.open(c,"_blank"));try{angular.merge(document.BVDatalayer.regularize,{pdfGenerated:!0}),document.BVDatalayer.formInfo.step=4,d.customPageView({pageName:"BV|AL|cartao|75dias-boleto-impresso"})}catch(f){}h.resolve({data:c,response:a})}).catch(function(a){m.modalConfig.open=!0,m.modalConfig.errorGenerate=!0;try{angular.merge(document.BVDatalayer.regularize,{pdfGenerated:!1}),d.customPageView({pageName:"BV|AL|cartao|75dias-boleto-imprimir-erro-lightbox"})}catch(b){}h.reject(a)}),h.promise}function j(){m.modalConfig={dueDates:!1,open:!1,errorGenerate:!1,success:!1,error:!1}}function k(){angular.merge(document.BVDatalayer.regularize,{paymentCodeCopied:!0}),m.isRegBarcodeCopied=!0}function l(a){function b(a){for(var b=atob(a),c=[],d="application/pdf",e=512,f=0;f<b.length;f+=e){for(var g=b.slice(f,f+e),h=new Array(g.length),i=0;i<g.length;i++)h[i]=g.charCodeAt(i);var j=new Uint8Array(h);c.push(j)}return new Blob(c,{type:d})}return b(a)}var m=this;m.generateBillet=i,m.regBarcodeCopy=k,h()}a.$inject=["$stateParams","$window","$q","dataLayerFactory","FileSaver","generateAgreementService","commonConstants"],angular.module("internetBanking.creditCard").controller("RegularizationBilletController",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","additionalCardsLimitsKeys"],angular.module("internetBanking.creditCard").factory("additionalCardsLimitsFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","fareExtractMonthsKeys"],angular.module("internetBanking.creditCard").factory("fareExtractMonthsFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","fareExtractReleasesKeys"],angular.module("internetBanking.creditCard").factory("fareExtractReleasesFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","travelNotificationContinentsKeys"],angular.module("internetBanking.creditCard").factory("travelNotificationContinentsFactory",a)}(),function(){"use strict";function a(){function a(a,b){var c=a&&a.filter(function(a){if(a.codeService===b)return a});return c&&0!==c.length?c:[]}return{checkProductContract:a}}angular.module("internetBanking.creditCard").factory("productsCreditCardFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","advisoryAddressCardKeys"],angular.module("internetBanking.creditCard").factory("advisoryAddressCardFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","getAssessoryCardKeys"],angular.module("internetBanking.creditCard").factory("getAssessoryCardFactory",a)}(),function(){"use strict";function a(){function a(a){if(!a||!a.eventos)return{totalPoints:0};var b={totalPoints:a.totalPontos};return b.events=a.eventos.map(function(a,b,c){return{product:a.produto,date:a.data,description:a.descricao,points:a.pontos}}),b}return{translate:a}}angular.module("internetBanking.creditCard").factory("extractPointsFactory",a)}(),function(){"use strict";function a(a){function b(a){if(!a)return[];var b={totalPoints:a.totalPontos};return g=a.totalPontos,b.rewards=e(a.premios).map(function(a,b,c){return{cod:a.codigoPremio,rewardName:a.nomePremio,rewardDescription:a.descricaoPremio,rewardKind:a.tipoPremio,imageBase64:"data:image/png;base64,"+a.imagem||"data:image/png;base64,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",codAirCompany:a.codigoCompanhiaAerea,order:a.ordem,condictions:a.condicoes&&a.condicoes.map(function(a,b,c){return{condictionSequence:a.sequenciaCondicao||0,codCategory:a.codigoCategoria||0,descriptionCategory:a.descricaoCategoria||0,minPointsRescue:a.quantidadePontosResgateMinimo||0,maxPointsRescue:a.quantidadePontosResgateMaximo||0,lotePointsAmount:a.quantidadePontosLote||0,conversionFactor:a.fatorConversao||0}})}}),c(b),b}function c(a){f=a}function d(){return f}function e(b){return b.forEach(function(c,d){c.codigoPremio===a.DESCONTO_FATURA.COD?(b[d].nomePremio=a.DESCONTO_FATURA.NAME,b[d].ordem=1):c.codigoPremio===a.OUTROS_BENEFICIOS.COD?(b[d].nomePremio=a.OUTROS_BENEFICIOS.NAME,b[d].descricaoPremio=a.OUTROS_BENEFICIOS.DESCRIPTION,b[d].ordem=2):c.codigoPremio===a.TUDO_AZUL.COD?(b[d].nomePremio=a.TUDO_AZUL.NAME,b[d].ordem=3):c.codigoPremio===a.MULTIPLUS.COD?(b[d].nomePremio=a.MULTIPLUS.NAME,b[d].ordem=4):c.codigoPremio===a.SMILES.COD?(b[d].nomePremio=a.SMILES.NAME,b[d].ordem=5):c.codigoPremio===a.DESCONTO_FINANCIAMENTO_VEICULO.COD&&(b[d].nomePremio=a.DESCONTO_FINANCIAMENTO_VEICULO.NAME,b[d].ordem=6)}),b}var f,g;return{translate:b,setDataTransaction:c,getDataTransaction:d,fromTo:e}}a.$inject=["deserveProgram"],angular.module("internetBanking.creditCard").factory("rescuePointsFactory",a)}(),function(){"use strict";function a(){function a(a){c=a}function b(){return c}var c;return{setDataTransaction:a,getDataTransaction:b}}angular.module("internetBanking.creditCard").factory("rescuePointsRewardFactory",a)}(),function(){"use strict";function a(){function a(a){return _.sortBy(a,["expiryDate"]).map(function(a){return{product:a.produto,expiryDate:a.dataExpiracao,points:a.pontos}})}function b(a){d=a}function c(){return d}var d;return{translate:a,setDataTransaction:b,getDataTransaction:c}}angular.module("internetBanking.creditCard").factory("seePointsExpiringFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","discountAnnuityKeys"],angular.module("internetBanking.creditCard").factory("discountAnnuityFactory",a)}(),function(){"use strict";function a(){function a(a){return""}function b(){return e}function c(a){d(a)&&(e=a)}function d(a){return a.successRoute&&a.prefixEndpoint&&a.dataTransaction&&a.kindTokenTransaction}var e;return{translate:a,setDataTransaction:c,getDataTransaction:b}}angular.module("internetBanking.creditCard").factory("authenticationTokenFactory",a)}(),function(){"use strict";function a(){function a(){return d}function b(a){if(!c(a))return!1;d=a}function c(a){return!!a.successRoute&&!!a.dataTransaction&&!!a.endPoint}return{setDataTransaction:b,getDataTransaction:a};var d}angular.module("internetBanking.creditCard").factory("authenticationFactory",a)}(),function(){"use strict";function a(){function a(a){return{ultimosQuatroDigitosCartao:a.contractNumber,cvv:a.cardSecurityCode,senhaCartao:a.cardCurrentPassword,senhaNova:a.cardNewPassword}}function b(a){return a&&a.map(function(a,b,c){return{contractNumber:a.ultimosQuatroDigitosCartao,name:a.nome,limit:{owner:a.limite.proprio,value:a.limite.valor}}})}function c(a){e=a}function d(){return e}var e;return{translateChangeCardPassword:a,translateAdditionalCards:b,setCardSelected:c,getCardSelected:d}}angular.module("internetBanking.creditCard").factory("changeCardPasswordFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","invoiceLastMaturitisKeys"],angular.module("internetBanking.creditCard").factory("invoiceLastMaturitisFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","statusPayKeys"],angular.module("internetBanking.creditCard").factory("statusPayFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","invoiceDetailKeys"],angular.module("internetBanking.creditCard").factory("invoiceDetailFactory",a)}(),function(){"use strict";function a(a){function b(){r()}function c(){return u}function d(a){return a.length>0&&(u.additional=!0),u}function e(a){return i()&&!l()?(u.open=!0,u.pay=!0):(u.close=!0,j(a)&&(u.hasAlternative=!0,k(a)?(u.periodAlternative=!0,u.hasAlternative=!0):f(a)&&(u.hasPassedPeriodAlternative=!0)),g(a)&&(u.invoiceExpired=!0)),u}function f(a){var b=new Date(a.dueDateInvoice),c=new Date(n("dateNow")),d=new Date(a.dueDateAlternative);return c>b&&c>d}function g(a){var b=new Date(a.dueDateInvoice);return new Date(n("dateNow"))>b}function h(){return u.open=!0,u.pay=!0,u}function i(){if(1===n("invoices").length)return!1;var a=0;n("invoices").filter(function(b,c){if(moment(o().dueDate).format("DD/MM/YYYY")===moment(b.dueDate).format("DD/MM/YYYY"))return a=c,!0});return n("invoices")[a+1].valuePay>=o().valueMinimumPayment}function j(a){return!!a.dueDateAlternative}function k(a){var b=new Date(a.dueDateInvoice),c=new Date(n("dateNow")),d=new Date(a.dueDateAlternative);return c>b&&c<=d}function l(){return!!o().invoiceOpen}function m(a,b){t[a]=b}function n(a){return t[a]}function o(){return t.invoiceActive}function p(a){t.invoiceActive=angular.copy(a)}function q(){return{lastFourNumber:n("lastFourNumber"),duedate:a.formatToAPI(o()&&o().dueDate),invoiceOpen:o()&&o().invoiceOpen}}function r(){t.invoiceActive={},t.lastFourNumber="",t.invoices=[],t.dateNow={},u.open=!1,u.pay=!1,u.close=!1,u.periodAlternative=!1,u.hasAlternative=!1,u.additional=!1,u.hasPassedPeriodAlternative=!1,u.invoiceExpired=!1}function s(a){return!(!a.close||!a.periodAlternative)}var t={invoiceActive:{},lastFourNumber:"",invoices:[],dateNow:{}},u={open:!1,pay:!1,close:!1,periodAlternative:!1,hasAlternative:!1,additional:!1,hasPassedPeriodAlternative:!1,invoiceExpired:!1};return{init:b,getParams:q,getStatus:c,checkStatus:e,set:m,get:n,setInvoiceActive:p,checkHasAdditionalCards:d,checkInvoiceAlternative:s,checkOnlyOneInvoice:h}}a.$inject=["formatDateFactory"],angular.module("internetBanking.creditCard").factory("invoiceStatusFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","optionInstallmentskeys"],angular.module("internetBanking.creditCard").factory("optionInstallmentsInvoiceFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","invoiceCardRatesKeys"],angular.module("internetBanking.creditCard").factory("invoiceCardRatesFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","detailsInvoiceCardsKeys"],angular.module("internetBanking.creditCard").factory("detailsInvoiceCardsFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","dynamicListFieldsKeys"],angular.module("internetBanking.creditCard").factory("dynamicListFieldsFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","paymentsInvoiceKeys"],angular.module("internetBanking.creditCard").factory("paymentsInvoiceFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","movementNationalKeys"],angular.module("internetBanking.creditCard").factory("movementNationalInvoiceFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","movementInternationKeys"],angular.module("internetBanking.creditCard").factory("movementInternationInvoiceFactory",a)}(),function(){"use strict";function a(a){function b(a,b){h[a]=angular.copy(b)}function c(){return d()}function d(){return{lastFourNumber:h.lastFourNumber,statusInvoice:h.statusInvoice,invoiceData:e()}}function e(){return h.lastInvoices=angular.copy(h.lastInvoices),h.lastInvoices.map(function(a,b){return{invoiceOpen:a.invoiceOpen,invoiceHome:g(a,b),dateDesktop:a.dueDate,dateMobile:a.dueDate,valueTotalInvoice:a.valueTotalInvoice,tab:b,dueDate:a.dueDate,label:f(a,b)}})}function f(b,c){var d=0,e=["@SITE-CARTAO-CREDITO-FATURA-HISTORICO-TITULO-ACOES-VER-FATURA","@SITE-CARTAO-CREDITO-FATURA-HISTORICO-TITULO-ACOES-VER-FATURA-2VIA"];return!b.invoiceOpen&&g(b,c)&&(d=1),a("translate")(e[d])}function g(a,b){return b===h.indexInvoiceActive}var h={};return{set:b,getALL:c}}a.$inject=["$filter"],angular.module("internetBanking.creditCard").factory("historyInvoiceDataFactory",a)}(),function(){"use strict";function a(a){function b(a){return f=!a}function c(a){var b=d[d.length-1],c=angular.copy(d),f=angular.copy(e);return c.pop(),f.unshift(b),{menuText:d,subMenuText:e,mobileMenuText:c,mobileSubMenuText:f}}var d=[{name:a("translate")("@SITE-CARTAO-CREDITO-MENU-FIXO-TITULOS-FATURA"),id:"#Fatura",item:"invoice"},{name:a("translate")("@SITE-CARTAO-CREDITO-MENU-FIXO-TITULOS-BENEFICIOS"),id:"#Beneficios",item:""},{name:a("translate")("@SITE-CARTAO-CREDITO-MENU-FIXO-TITULOS-HISTORICO"),id:"#HistoricoFatura",item:"invoiceHistory"},{name:a("translate")("@SITE-CARTAO-CREDITO-MENU-FIXO-TITULOS-SEGURANCA"),id:"#Seguranca",item:""},{name:a("translate")("@SITE-CARTAO-CREDITO-MENU-FIXO-TITULOS-SOLICITACOES"),id:"#Solicitacoes",item:"solicitation"},{name:a("translate")("@SITE-CARTAO-CREDITO-MENU-FIXO-TITULOS-LIMITE"),id:"#LimitesTaxas",item:"limitCreditTax"},{name:a("translate")("@SITE-CARTAO-CREDITO-MENU-FIXO-TITULOS-ATENDIMENTO"),id:"#Atendimento"}],e=[],f=!0;return{onClickButton:b,getTextLinks:c}}a.$inject=["$filter"],angular.module("internetBanking.creditCard").factory("menuInvoiceFactory",a)}(),function(){"use strict";function a(a){function b(a,b){return(a.length>1?d(a):c(a[0])).sort(g)}function c(a){var b=f(a.movementNational),c=f(a.movementInternational);return _.union(b,c)}function d(a){for(var b,c,d,f=[],g=0;g<a.length;g++)c=e(a[g].movementNational,g),d=e(a[g].movementInternational,g),b=_.union(c,d),f=f.concat(b);return f}function e(a,b){if(angular.isArray(a)){return a&&a.map(function(a){return a.additionalClass=i[b],a})}return[]}function f(b){var c="";if(angular.isArray(b)){return b&&b.map(function(b){return c=b.numberInstallmentsDrive>1?"("+b.quantityTotalInstallments+"/"+b.numberInstallmentsDrive+")":"",b.labelInstallments=c,b.name=b.name.trim(),b.nameCityEstablishment=b.nameCityEstablishment.trim(),b.valueAbsoluteMovementReal=a.numberToCurrency(b.valueAbsoluteMovementReal,"R$"),b.labelRealValue=b.valueAbsoluteMovementReal,b.labelRealValue="+"===b.sign?"-"+b.labelRealValue:b.labelRealValue,b.labelDollarValue=a.numberToCurrency(b.valueAbsoluteMovementDolar,"US$"),b.labelDollarValue="+"===b.sign?"-"+b.labelDollarValue:b.labelDollarValue,b.moedaLocalSimbolo=b.moedaLocalSimbolo,b.taxaConversao=a.numberToCurrency(b.taxaConversao,"R$"),b.montanteMoedaOriginal=a.numberToCurrency(b.montanteMoedaOriginal,b.simboloMoedaOriginal),b.simboloMoedaOriginal=b.simboloMoedaOriginal,b.simboloMoedaReferencia=b.simboloMoedaReferencia,b.valueAbsoluteMovementDolar=a.numberToCurrency(b.valueAbsoluteMovementDolar,"USD"),b})}return[]}function g(a,b){return new Date(a.dateMovement)<new Date(b.dateMovement)?1:-1}function h(a,b,c){var d=a.detailsInvoiceCards.filter(function(a){return a.lastFourNumber.toString()===b.toString()}),e=a.detailsInvoiceCards.filter(function(a){return a.lastFourNumber.toString()!==b.toString()&&a.name.toString().trim()===c.toString().trim()});e.length>0&&(d=d.concat(e));var f=a.detailsInvoiceCards.filter(function(a){return a.lastFourNumber.toString()!==b.toString()&&a.name.toString().trim()!==c.toString().trim()});return d=d.concat(f),angular.copy(d)}var i=["list-prices-item__title -magenta","list-prices-item__title -purple","list-prices-item__title -orange","list-prices-item__title -blue","list-prices-item__title -green","list-prices-item__title -yellow"];return{getExtract:b,filterDataExtract:c,filterWithDataExtract:d,orderMovimentInvoiceWithAdditional:h}}a.$inject=["numberToCurrencyFactory"],angular.module("internetBanking.creditCard").factory("movementExtractFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,b.createFactory(a)),c}a.$inject=["invoiceReceiveMethodKeys","baseFactory"],angular.module("internetBanking.creditCard").factory("invoiceReceiveMethodFactory",a)}(),function(){"use strict";function a(a,b){function c(a,b,c){i={},i.invoiceActive=a,i.invoiceType=b,i.statusInvoice=c}function d(a,b){return e(a,b)}function e(c,d){var e="";return"money"===d?e=b.numberToCurrency(i.invoiceActive[c],"R$ "):"date"===d?e=a.format(i.invoiceActive[c],"@SITE-BILLET-GENERATED-DAY-FORMAT"):"time"===d&&(e=a.format(i.invoiceActive[c],"@SITE-BILLET-GENERATED-TIME-FORMAT")+"h"),e}function f(){return g()}function g(){var a={};return a.dateInvoiceGenerated=d("dateTimeGeneratedInvoice","date"),a.time=d("dateTimeGeneratedInvoice","time"),a.duedateInvoice=d("dueDateInvoice","date"),a.dateEndMoviments=d("dateEndMoviments","date"),a.valueTotalInvoice=h(i.invoiceActive.valueTotalInvoice),a.valueMinimumPayment=i.invoiceActive.valueMinimumPayment,a.hasInvoiceAlternative=i.statusInvoice.hasAlternative,i.invoiceType.closeAlternative&&(a.dueDateAlternative=d("dueDateAlternative","date"),a.valueDueDateAlternative=i.invoiceActive.valueDueDateAlternative),i.invoiceType.close&&a.hasInvoiceAlternative&&(a.invoiceAlternativeValueTotal=i.invoiceActive.valueDueDateAlternative,a.invoiceAlternativeDueDate=d("dueDateAlternative","date")),a}function h(a){var c=angular.copy(a);return a<0?(c*=-1,a="-"+b.numberToCurrency(c,"R$ ")):a=b.numberToCurrency(c,"R$ "),a}var i={};return{init:c,get:d,getView:f}}a.$inject=["formatDateFactory","numberToCurrencyFactory"],angular.module("internetBanking.creditCard").factory("invoiceInformationDataFactory",a)}(),function(){"use strict";function a(){function a(){return{responsive:!0,maintainAspectRatio:!1,barValueSpacing:0,barDatasetSpacing:0,tooltips:{display:!1},legend:{display:!1},title:{display:!1},scales:{xAxes:[{ticks:{display:!1},gridLines:{display:!0,drawBorder:!1,color:"rgba(221,221,221,0.6)",lineWidth:.5}}],yAxes:[{ticks:{display:!1},gridLines:{display:!1}}]}}}function b(){return[{className:"graph-gray",hex:"#c0c0c0",rgbaWithTransparent:"rgba(192,192,192, 0.3)",colorBorder:"rgba(0,0,0, 0.2)",rgb:"rgba(192,192,192, 0)"},{className:"graph-magenta",hex:"#dc1468",rgbaWithTransparent:"rgba(220,20,104, 0.3)",colorBorder:"rgba(0,0,0, 0.1)",rgb:"rgba(220,20,104, 0)"},{className:"graph-purple",hex:"#8a57d3",rgbaWithTransparent:"rgba(138,87,211, 0.3)",colorBorder:"rgba(0,0,0, 0.1)",rgb:"rgba(138,87,211, 0)"},{className:"graph-orange",hex:"#f9883b",rgbaWithTransparent:"rgba(249,136,59, 0.3)",colorBorder:"rgba(0,0,0, 0.1)",rgb:"rgba(249,136,59, 0)"},{className:"graph-blue",hex:"#3b8abf",rgbaWithTransparent:"rgba(59,138,191, 0.3)",colorBorder:"rgba(0,0,0, 0.1)",rgb:"rgba(59,138,191, 0)"},{className:"graph-green",hex:"#57ac52",rgbaWithTransparent:"rgba(87,172,82, 0.3)",colorBorder:"rgba(0,0,0, 0.1)",rgb:"rgba(87,172,82, 0)"},{className:"graph-yellow",hex:"#f7d743",rgbaWithTransparent:"rgba(247,215,67, 0.3)",colorBorder:"rgba(0,0,0, 0.1)",rgb:"rgba(247,215,67, 0)"},{className:"graph-black",hex:"#333333",rgbaWithTransparent:"rgba(33, 33, 33, 0.3)",colorBorder:"rgba(0,0,0, 0.1)",rgb:"rgba(33, 33, 33, 0)"}]}function c(a){var b=new Date(a),c=["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"];return(parseInt(b.getDate(),10)<10?"0"+b.getDate():b.getDate())+" "+c[b.getMonth()]}function d(a){var b=2,c=".",d=a<0?"-":"",e=String(parseInt(a=Math.abs(Number(a)||0).toFixed(b))),f=(f=e.length)>3?f%3:0;return d+(f?e.substr(0,f)+c:"")+e.substr(f).replace(/(\d{3})(?=\d)/g,"$1"+c)+(b?","+Math.abs(a-e).toFixed(b).slice(2):"")}function e(a){return Math.round(100*a)/100}function f(a){return a.remaining=100*a.sumTotalsTotal/a.sumTotals,Math.round(100*a.sumTotalsTotal/a.sumTotals)}function g(a){return parseFloat(a.sumTotalsTotal.toFixed(2))}function h(a){a.toLowerCase().replace(/(?:^|[\s])(?!(?:d|da|das|de|do|dos)[\s'\-])([a-z])(?=[a-z]{2})/g,function(a){return a.toUpperCase()});return a.charAt(0).toUpperCase()+a.slice(1)}return{getColors:b,createOptionsConfigChart:a,formatDayMoviment:c,formatMoney:d,truncateDecimals:e,getPercentageByOwner:f,getTotalAmountByOwner:g,fixSizeCase:h}}angular.module("internetBanking.creditCard").factory("graphicFactory",a)}(),function(){"use strict";function a(){function a(a){return a.getContext("2d")}function b(a,b){var c='<div class="chart-line-content"><div class="chart-line"></div></div><canvas id="'+b+'"  style="position:relative;height:160px;"></canvas>';a.innerHTML=c}function c(a,b,c){for(var d=b.labels.length,e={},f=0;f<d;f++){if(e=document.createElement("div"),e.className=f>0?b.labels[f]>0?"invoice-points-item":"invoice-points-item zero":"invoice-points-item __primary",e.innerHTML=c(b.datasets[0],f,d),0==f){var g=b.datasets[0].dataMoviment[f].dateMoviment;g=g.split("-");var h=document.createElement("span");h.className="invoice-points-item-date-init",h.innerHTML=g[0]+"/"+g[1],e.appendChild(h)}b.labels[f]>0&&(e.addEventListener("mouseenter",function(a){this.firstChild.classList.add("-visible")}),e.addEventListener("mouseleave",function(a){this.firstChild.classList.remove("-visible")})),a.appendChild(e)}}function d(a){a.style.display="none"}return{createCTX:a,createCanvas:b,createToolTip:c,showAddAddicionalCards:d}}angular.module("internetBanking.creditCard").factory("graphicDOMFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","othersOptionsClosingKeys"],angular.module("internetBanking.creditCard").factory("othersOptionsClosingFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","listOptionsClosingInvoiceKeys"],angular.module("internetBanking.creditCard").factory("listOptionsClosingInvoiceFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","limitCreditInvoiceCardKeys"],angular.module("internetBanking.creditCard").factory("limitCreditInvoiceCardFactory",a)}(),function(){"use strict";function a(a,b,c){function d(){var b=a.getALL();return{title:f(i),date:g(b.invoiceActive.dateTimeGeneratedInvoice),time:h(b.invoiceActive.dateTimeGeneratedInvoice)}}function e(a){i=a}function f(a){var b=["@SITE-CARTAO-CREDITO-TITULO-FATURA-ANTERIOR","@SITE-CARTAO-CREDITO-TITULO-FATURA-FECHADA","@SITE-CARTAO-CREDITO-TITULO-FATURA-ABERTA"];return c("translate")(b[a])}function g(a){return b.format(a,"@SITE-BILLET-GENERATED-DAY-FORMAT")}function h(a){return b.format(a,"@SITE-BILLET-GENERATED-TIME-FORMAT")+"h"}var i;return{create:d,setTab:e}}a.$inject=["invoiceDataCurrentService","formatDateFactory","$filter"],angular.module("internetBanking.creditCard").factory("settingsOfTheInvoiceTitleFactory",a)}(),function(){"use strict";function a(a,b,c,d){function e(){var b=a.getALL(),c={};return c.date=g(b.invoiceActive.dueDateInvoice),c.value=h(b.invoices[l].valueTotalInvoice),c.isInvoiceOpen=b.invoices[l].invoiceOpen,l!==m&&(c.valueMinimumPayment=i(b.invoiceActive.valueMinimumPayment)),c}function f(a){l=a}function g(a){var b="@SITE-BILLET-GENERATED-DAY-FORMAT";return d.isPrint&&(b="@SITE-BILLET-GENERATED-DAY-FORMATFULL"),c.format(a,b)}function h(a){return j(a)}function i(a){return b.numberToCurrency(a,"R$ ")}function j(a){var c=angular.copy(a),d=k(c),e="";return d&&(c*=-1,e="-"),e+b.numberToCurrency(c,"R$ ")}function k(a){return a<0}var l,m=2;return{create:e,setTab:f}}a.$inject=["invoiceDataCurrentService","numberToCurrencyFactory","formatDateFactory","$rootScope"],angular.module("internetBanking.creditCard").factory("settingsOfTheInvoiceInformationFactory",a)}(),function(){"use strict";function a(a,b){function c(){var b=a.getALL(),c={};return c.data=d(b.invoiceActive.invoiceCardRates),c.data.valueFeePaymentAccount=f(b.invoiceActive.invoiceCardRates.valueFeePaymentAccount),c.data.valueFeeSack=f(b.invoiceActive.invoiceCardRates.valueFeeSack),c.data.nextMonthlyCET=b.invoiceActive.nextMonthlyCetWI,c.data.clientWithdrawalInstallmentRate=b.invoiceActive.clientWIRate,c}function d(a){var b=angular.copy(a);return _.forEach(b,function(a,c){e(c)&&(b[c]=a.toString().indexOf(".")>-1?a.toString().replace(".",","):a.toString())}),b}function e(a){return"valueFeePaymentAccount"!=a&&"valueFeeSack"!=a}function f(a){return b.numberToCurrency(a,"R$ ")}function g(a){a.taxes=!0,a.isTaxes.open=!0}return{create:c,showModalFeesAndCharges:g}}a.$inject=["invoiceDataCurrentService","numberToCurrencyFactory"],angular.module("internetBanking.creditCard").factory("settingsOfTheModalFeesAndChargesFactory",a)}(),function(){"use strict";function a(a){function b(){var b=a.getALL();return{valueTotalInvoice:angular.copy(b.invoiceActive.valueTotalInvoice),dueDateInvoice:angular.copy(b.invoices[1].dueDate),lastFourNumber:angular.copy(b.lastFourNumber)}}function c(){var b=a.getALL(),c=b.invoiceActive.index;return!!b.invoices[c].invoiceOpen&&(!(b.invoices[c].valueTotalInvoice<=0)&&!!d())}function d(){var b=a.getALL();return 0!==b.invoiceActive.index&&0!==b.invoices[b.invoiceActive.index-1].valueTotalInvoice}return{create:b,hasAnticipatedPayment:c}}a.$inject=["invoiceDataCurrentService"],angular.module("internetBanking.creditCard").factory("settingsOfTheAnticipatedPaymentFactory",a)}(),function(){"use strict";function a(a,b,c){function d(){var b=a.getALL(),c={};return c.previousBalance=i(b.invoiceActive),c.totalNational=j(b.invoiceActive),c.totalInternational=k(b.invoiceActive),c.totalIvoice=l(b.invoiceActive),c.invoiceOpen=m(b.invoices[n].invoiceOpen),c}function e(a){n=a}function f(a){var b="";return a>0&&(b="-"),b+c.numberToCurrency(a,"R$ ")}function g(a){var b=angular.copy(a),d=h(b),e="";return d&&(b*=-1,e="-"),e+c.numberToCurrency(b,"R$ ")}function h(a){return a<0}function i(a){var b=f(a.valueTotalInvoicePayPrevious);return{balance:g(a.valueBalancePrevious),totalInvice:g(a.valueTotalInvoicePrevious),pay:b,open:!0,totalInvoiceAmountPaid:g(a.totalInvoiceAmountPaid),totalAmountDebtPromisesPaid:g(a.totalAmountDebtPromisesPaid),valueMinimumPayment:g(a.valueMinimumPayment),valueToNotOverduePayment:g(a.valueToNotOverduePayment)}}function j(a){return{total:c.numberToCurrency(a.valueTotalNational,"R$ "),custom:c.numberToCurrency(a.valueCustom,"R$ "),adjustments:c.numberToCurrency(a.valueAdjustment,"R$ "),movement:c.numberToCurrency(a.valueTotalNationalMovement,"R$ "),open:!1}}function k(a){return{cotation:"Cotação do dólar em "+b.format(a.datePriceQuoteInvoice,"@SITE-BILLET-GENERATED-DAY-FORMATFULL")+" : "+c.numberToCurrency(a.valuePriceQuoteDolarInvoice,"R$ ")+" "+c.numberToCurrency(1,"US$ "),valueReal:c.numberToCurrency(a.valueTotalInternationalMovement,"R$ "),valueDolar:c.numberToCurrency(a.valueTotalInternationalMovementDolar,"US$ ")}}function l(a){return{value:g(a.valueTotalInvoice)}}function m(a){return a}var n;return{create:d,setTab:e}}a.$inject=["invoiceDataCurrentService","formatDateFactory","numberToCurrencyFactory"],angular.module("internetBanking.creditCard").factory("settingsOfTheInvoiceSummaryFactory",a)}(),function(){"use strict";function a(a){function b(){var b=a.getALL();return{payments:b.invoiceActive.detailsInvoiceCards[0].payments,valueBalancePrevious:b.invoiceActive.valueBalancePrevious,statusInvoice:b.statusInvoice}}function c(a){e=a}function d(){return a.getALL().invoiceActive.detailsInvoiceCards.length>0}var e;return{create:b,setTab:c,hasDetailsInvoice:d}}a.$inject=["invoiceDataCurrentService"],angular.module("internetBanking.creditCard").factory("settingsOfTheInvoicePreviousPaymentFactory",a)}(),function(){"use strict";function a(a){function b(){var b=a.getALL();return{data:b.invoiceActive,invoiceOpen:b.statusInvoice.next}}function c(a){d=a}var d;return{create:b,setTab:c}}a.$inject=["invoiceDataCurrentService"],angular.module("internetBanking.creditCard").factory("settingsOfTheInvoiceTotalPaymentFactory",a)}(),function(){"use strict";function a(a,b){function c(){var b=a.getALL();if(b.invoiceActive.dynamicListFields){var c=b.invoiceActive.dynamicListFields;return{installment:d(c,1),annuity:d(c,2),total:d(c,99)}}return{}}function d(a,b){return a.filter(function(a){return a.codeNumber==b})[0]}function e(a){f=a}var f;return{create:c,setTab:e}}a.$inject=["invoiceDataCurrentService","numberToCurrencyFactory"],angular.module("internetBanking.creditCard").factory("settingsOfTheInvoiceFutureChargesFactory",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){var a=b.getALL();return{tab:a.tabActive,indiceInvoicesActive:a.indiceInvoicesActive,data:h()}}function h(){
var a=b.getALL();return a.invoices.map(function(b,e){return{active:a.tabActive===b.tab,label:c.capitalizeFirstLetter(d.formatDateMonth(b.dueDate)),indexArray:b.indexArray,tab:b.tab}})}function i(c,d){if(d!==c){var f=2===c,g=b.getInvoiceTab(c),h=j({tab:c,status:f,indexClicked:g.indexArray});a.setALL(h),b.set("tabActive",null,g.tab),b.set("indiceInvoicesActive",null,g.indexArray),e.go(k[g.tab])}}function j(c){var d={};return d.tab=c.tab,d.openInvoice=c.status,d.lastFourNumber=b.getALL().lastFourNumber,d.dueDate=a.get("lastInvoices")[c.indexClicked].dueDate,c.status&&(d.valueMinimumPayment=a.get("lastInvoices")[c.indexClicked].valueMinimumPayment),d.lastInvoices=a.get("lastInvoices"),d.statusInvoice=a.get("statusInvoice"),d.valueTotalInvoice=angular.copy(a.get("lastInvoices")[c.indexClicked].valueTotalInvoice),d.scroll=c.scroll?c.scroll:null,d.lineScroll=c.lineScroll?c.lineScroll:null,d}var k=[f.INVOICE_PREVIOUS,f.INVOICE_CURRENT,f.INVOICE_NEXT];return{create:g,onClickTabs:i}}a.$inject=["invoiceDetailCreditCardCurrentService","invoiceDataCurrentService","invoiceUtilsFactory","formatDateFactory","$state","creditCardRoutes"],angular.module("internetBanking.creditCard").factory("settingsOfTheTabsFactory",a)}(),function(){"use strict";function a(a){function b(a){return a.charAt(0).toUpperCase()+a.slice(1)}function c(b){a.go(b)}return{capitalizeFirstLetter:b,redirect:c}}a.$inject=["$state"],angular.module("internetBanking.creditCard").factory("invoiceUtilsFactory",a)}(),function(){"use strict";function a(a,b,c){function d(){return{creditCardTransactions:e(),graphic:g()}}function e(){var b=a.getALL();return{dateInitMoviments:f(b.invoiceActive.dateEndMoviments),duedateInvoice:f(b.invoiceActive.dueDateInvoice)}}function f(a){return b.format(a,"@SITE-BILLET-GENERATED-DAY-FORMAT")}function g(){var b=a.getALL();return{lastFourNumber:b.lastFourNumber,name:b.name,data:b.invoiceActive,tab:b.tabActive,statusInvoice:b.statusInvoice,datesMoviments:{init:b.dateInitMoviments[b.indiceInvoicesActive],end:b.dateEndMoviments[b.indiceInvoicesActive]}}}function h(){var b=a.getALL();return!!(b.invoiceActive.detailsInvoiceCards&&b.invoiceActive.detailsInvoiceCards.length>0)}function i(){for(var b=a.getALL(),c=b.invoiceActive.detailsInvoiceCards.length,d=!1,e=0;e<c;e++)if(b.invoiceActive.detailsInvoiceCards[e].movementNational.length>0||b.invoiceActive.detailsInvoiceCards[e].movementInternational.length>0){d=!0;break}return d}return{create:d,hasInvoiceDetails:h,hasCreditCardTransactions:i}}a.$inject=["invoiceDataCurrentService","formatDateFactory","movementExtractFactory"],angular.module("internetBanking.creditCard").factory("settingsOfTheGraphicFactory",a)}(),function(){"use strict";function a(a){function b(){a.getALL();return{}}function c(a,b){e[a]=b}function d(a){return e[a]}var e={page:null};return{create:b,set:c,get:d}}a.$inject=["invoiceDataCurrentService"],angular.module("internetBanking.creditCard").factory("settingsOfTheTransactionsFactory",a)}(),function(){"use strict";function a(){function a(a){return{valueFeeSack:a.valorTarifaSaque,valueFeePaymentAccount:a.valorTarifaPagamentoConta,taxBalanceFinancedMonthly:a.taxaSaldoFinanciadoPeriodoMensal,taxBalanceFundedAnnualPeriod:a.taxaSaldoFinanciadoPeriodoAnual,taxNationalWithdrawalPeriodMonthly:a.taxaSaqueNacionalPeriodoMensal,taxNationalWithdrawalAnnualPeriod:a.taxaSaqueNacionalPeriodoAnual,taxBalanceFinancedNextPeriodMonth:a.taxaSaldoFinanciadoProximoPeriodoMensal,taxBalanceFinancedNextPeriodAnnual:a.taxaSaldoFinanciadoProximoPeriodoAnual,taxNationalWithdrawalNextPeriodMonth:a.taxaSaqueNacionalProximoPeriodoMensal,taxNationalWithdrawalNextPeriodAnnual:a.taxaSaqueNacionalProximoPeriodoAnual,taxIofFinancingValue:a.taxaIofFinanciamentoValor,taxIofMonthlyFinancing:a.taxaIofFinanciamentoMensal,taxIofInternationalTransaction:a.taxaIofTransacaoInternacional,taxCetMonthlyFundedBalance:a.taxaCetSaldoFinanciadoMensal,taxCetAnnualFundedBalance:a.taxaCetSaldoFinanciadoAnual,taxCetNationalMonthlyAllowance:a.taxaCetSaqueNacionalMensal,taxCetAnnualNationalWithdrawal:a.taxaCetSaqueNacionalAnual,taxCetMonthlyInvoiceInstallment:a.taxaCetParcelamentoFaturaMensal,taxCetAnnualInvoiceInstallment:a.taxaCetParcelamentoFaturaAnual,taxCetMonthlyPaymentPayment:a.taxaCetPagamentoContaMensal,taxCetAnnualAccountPayment:a.taxaCetPagamentoContaAnual,taxCetMonthlyIssuanceInstallment:a.taxaCetParcelamentoEmissorMensal,taxCetAnnualIssuanceInstallment:a.taxaCetParcelamentoEmissorAnual,taxInstallmentPeriodMonthly:a.taxaParcelamentoPeriodoMensal,taxInstallmentPeriodAnnual:a.taxaParcelamentoPeriodoAnual,taxInstallmentTotalBalanceMonthlyPeriod:a.taxaParcelamentoSaldoTotalPeriodoMensal,taxInstallmentTotalBalanceAnnualPeriod:a.taxaParcelamentoSaldoTotalPeriodoAnual,taxInstallmentNextMonthPeriod:a.taxaParcelamentoProximoPeriodoMensal,taxInstallmentAnnualNextPeriod:a.taxaParcelamentoProximoPeriodoAnual,taxInstallmentTotalBalanceMonthNextPeriod:a.taxaParcelamentoSaldoTotalProximoPeriodoMensal,taxInstallmentTotalBalanceAnnualNextPeriod:a.taxaParcelamentoSaldoTotalProximoPeriodoAnual,taxCetInstallmentTotalMonthlyBalance:a.taxaCetParcelamentoSaldoTotalMensal,taxCetInstallmentTotalAnnualBalance:a.taxaCetParcelamentoSaldoTotalAnual,nextMonthlyPersonalCreditCet:a.creditoPessoalCETProximoMensal,nextAnnualPersonalCreditCet:a.creditoPessoalCETProximoAnual,nextMonthlyCetWithdrawalInstallment:a.proximaParcelaRetiradaCETMensal,nextAnnualCetWithdrawalInstallment:a.proximaParcelaRetiradaCETAnual,nextPcTaxRate:a.taxaPCProximo}}function b(a){return{limitTotalCredit:a.valorLimiteCreditoTotal,limitCreditAvailable:a.valorLimiteCreditoDisponivel,limitCreditDetail:{valueNationalRevolvingCreditLimit:a.detalheLimitesCredito.valorLimiteCreditoRotativoNacional,valueInternationalRevolvingCreditLimit:a.detalheLimitesCredito.valorLimiteCreditoRotativoInternacional,valueNationalWithdrawalLimit:a.detalheLimitesCredito.valorLimiteSaqueNacional,valueInternationalWithdrawalLimit:a.detalheLimitesCredito.valorLimiteSaqueInternacional,valueAvailableNationalRevolvingCredit:a.detalheLimitesCredito.valorDisponivelCreditoRotativoNacional,valueAvailableInternationalRevolvingCredit:a.detalheLimitesCredito.valorDisponivelCreditoRotativoInternacional,valueAvailableNationalCash:a.detalheLimitesCredito.valorDisponivelSaqueNacional,valueAvailableInternationalCash:a.detalheLimitesCredito.valorDisponivelSaqueInternacional}}}return{translate:a,translateLimit:b}}angular.module("internetBanking.creditCard").factory("checkLimitAndRatesFactory",a)}(),function(){"use strict";function a(a,b){function c(){return e}function d(a){e=a}var e={},f={};return angular.extend(f,a.createFactory(b)),f.setAdditionalLimit=d,f.getAdditionalLimit=c,f}a.$inject=["baseFactory","additionalCardsKeys"],angular.module("internetBanking.creditCard").factory("registerAdditionalLimitFactory",a)}(),function(){"use strict";function a(){function a(a){return{dataPrimeiroPagamento:a.firstPaymentDate,valorEntrada:a.valueEntry,dataEntrada:a.dateEntry,valorTotalFinanciado:a.financedDatevalue,quantidadeParcelas:a.amountPlots,taxaCetAnualFaturaParcelada:a.annualInvoiceFee,taxaCetMensalFaturaParcelada:a.monthlyInvoiceFee,valorPrimeiraParcela:a.valueFirstParcel,valorParcelas:a.valueParcels,valorIof:a.valueIof}}function b(a){return{dataPrimeiroPagamento:a.firstPaymentDate,valorEntrada:a.valueEntry,dataEntrada:a.dateEntry,valorTotalFinanciado:a.financedDatevalue,quantidadeParcelas:a.amountPlots,taxaCetAnualFaturaParcelada:a.annualInvoiceFee,taxaCetMensalFaturaParcelada:a.monthlyInvoiceFee,valorPrimeiraParcela:a.valueFirstParcel,valorParcelas:a.valueParcels,valorIof:a.valueIof}}function c(){return k}function d(a){k=a}function e(){return i}function f(a){i=a}function g(){return j}function h(a){j=a}var i={},j={},k={};return{translate:a,translateLimit:b,setInstallmentInvoice:f,getInstallmentInvoice:e,getPaymentMethod:g,setPaymentMethod:h,getInputValues:c,setInputValues:d}}angular.module("internetBanking.creditCard").factory("invoiceInstallmentFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","fareExtractKeys"],angular.module("internetBanking.creditCard").factory("fareExtractFactory",a)}(),function(){"use strict";function a(a,b){var c={};return angular.extend(c,a.createFactory(b)),c}a.$inject=["baseFactory","formatNetpointsBalanceKeys"],angular.module("internetBanking.creditCard").factory("balanceNetpointsFactory",a)}(),function(){"use strict";function a(){function a(a){return a&&a.listaContratoCpf.map(function(a){return{id:a.identificadorContratoAcordo,number:a.numeroAcordo,status:a.statusAcordo,assessoryCode:a.codigoPessoaAssessoriaJuridica,numberCard:a.numeroCartao}})}return{format:a}}angular.module("internetBanking.creditCard").factory("listContractsFactory",a)}(),function(){"use strict";function a(){function a(a){return{code:a.codigoRetorno,message:a.mensagemRetorno,id:a.identificadorContratoAcordo,proposals:a.acordos&&a.acordos.map(function(a){return{valorPrincipal:a.valorPrincipal||0,valorMulta:a.valorMulta||0,valorMora:a.valorMora||0,valorIOF:a.valorIOF||0,valorEncargos:a.valorEncargos||0,valorTotalDesconto:a.valorTotalDesconto||0,valorDescontoPrincipal:a.valorDescontoPrincipal||0,valorDescontoMora:a.valorDescontoMora||0,valorDescontoMulta:a.valorDescontoMulta||0,valorDescontoHonorario:a.valorDescontoHonorario||0,valorDescontoEncargos:a.valorDescontoEncargos||0,numeroParcelas:a.numeroParcelas||0,parcela:a.parcela}})}}function b(a){return{identificadorContratoAcordo:a.id,dataPrimeiroVencimento:a.dueDate}}return{formatResponse:a,formatRequest:b}}angular.module("internetBanking.creditCard").factory("listProposalOptionsFactory",a)}(),function(){"use strict";function a(){function a(a){return{identificadorContratoAcordo:a.id,dataPrimeiroVencimento:a.dueDate,numeroParcelas:a.numeroParcelas}}function b(a){return a}return{formatRequest:a,formatResponse:b}}angular.module("internetBanking.creditCard").factory("proposalsFactory",a)}(),function(){"use strict";function a(a){function b(a){return{ultimosQuatroDigitosCartao:a.lastFourDigits,primeiroNomeAdicional:a.firstName,sobrenomeAdicional:a.lastName,cpfAdicional:a.cpf,nomeMaeAdicional:a.motherName,dataNascimentoAdicional:moment(a.birthDate,"DD/MM/YYYY").format("YYYY-MM-DD")}}function c(){return e}function d(a){e=a}var e={};return{convertViewModelToAPI:b,setClientInfo:d,getClientInfo:c}}a.$inject=["formatDateFactory"],angular.module("internetBanking.creditCard").factory("additionalCardFactory",a)}(),function(){"use strict";function a(a,b,c){function d(c){return{ultimosQuatroDigitosCartao:c.contractNumber,valorPagamento:b.currencyToNumber(c.accountValue,"R$"),dataPagamento:a.formatToAPI(c.datePayment)}}function e(a){return{cet:{cetYear:c("currency")(a.cet.cetAno,"",2),cetMonth:c("currency")(a.cet.cetMes,"",2),cetPeriod:c("currency")(a.cet.cetPeriodo,"",2)},percentageRates:{percentageChanges:c("currency")(a.percentualTarifas.percentualEncargos,"",2),percentageIOF:c("currency")(a.percentualTarifas.percentualIof,"",2),percentageRate:c("currency")(a.percentualTarifas.percentualTarifa,"",2),percentagePaymentValue:c("currency")(a.percentualTarifas.percentualValorPagamento,"",2)},values:{totalToPayment:c("currency")(a.valores.totalAPagar,"",2),changesValue:c("currency")(a.valores.valorEncargos,"",2),IOFValue:c("currency")(a.valores.valorIof,"",2),rateValue:c("currency")(a.valores.valorTarifas,"",2)},sumTotalValues:f(a.valores).toFixed(2).replace(".",",")}}function f(a){return parseFloat(a.valorTarifas)+parseFloat(a.valorIof)+parseFloat(a.valorEncargos)+parseFloat(a.totalAPagar)}function g(a){return a&&a.map(function(a,b,d){return{paymentId:a.identificadorPagamentoFaturaCartao,description:a.descricao,date:a.data,value:c("currency")(a.valor,"R$ ",2)}})}function h(a){var b=4;return{codigoTipoConsulta:a.checkPayments,dataPeriodoFim:a.checkPayments==b?i(a.periodTo):null,dataPeriodoInicio:a.checkPayments==b?i(a.periodFrom):null,ultimosQuatroDigitosCartao:a.contractNumber}}function i(a){var b=a.split("/");return b[2]+"-"+b[1]+"-"+b[0]}function j(a){return 1==a?"R$ 500,00":2==a?"R$ 800,00":3==a?"R$ 1.000,00":"R$ 300,00"}return{translateSimulatePaymentToAPI:d,translateSimulatePaymentToView:e,translateCheckPaymentToView:g,translateCheckPaymentToAPI:h,limitsForeachCard:j}}a.$inject=["formatDateFactory","numberToCurrencyFactory","$filter"],angular.module("internetBanking.creditCard").factory("accountPaymentFactory",a)}(),function(){"use strict";function a(a){function b(a){return a&&a.map(function(a,b,c){return{code:a.codigo,description:a.descricao}})}function c(a){return a&&a.map(function(a,b,c){return{codigo:a.code,descricao:a.description}})}function d(a){return{lastFourDigits:a.ultimosQuatroDigitosCartao,travels:{continents:a.viagens.continentes.map(function(a,b,c){return{code:a.codigo,description:a.descricao}}),period:{startDate:a.travels.periodo.dataInicio,endDate:a.travels.periodo.dataFim}}}}function e(b){return{ultimosQuatroDigitosCartao:b.lastFourDigits,viagens:{continentes:b.travels.continents.map(function(a,b,c){return{codigo:a.code,descricao:a.description}}),periodo:{dataInicio:a.formatToAPI(b.travels.period.startDate),dataFim:a.formatToAPI(b.travels.period.endDate)}}}}function f(){return h}function g(a){h=a}var h={};return{setSelectedCard:g,getSelectedCard:f,translateContinentsToView:b,translateContinentsToAPI:c,translateTravelCardToView:d,translateTravelCardToAPI:e}}a.$inject=["formatDateFactory"],angular.module("internetBanking.creditCard").factory("travelNotificationFactory",a)}(),function(){"use strict";function a(){function a(a,b){c[a]=b}function b(a){return c[a]}var c={receivingType:""};return{set:a,get:b}}angular.module("internetBanking.creditCard").factory("invoiceReceiveMethodDataFactory",a)}(),function(){"use strict";function a(a,b,c,d){function e(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=c.defer(),i={method:"GET",cache:!0,url:a.backEnd+d.CC_DETALHES_CARTAO+"/"+e};return b(i).then(f).catch(g),h.promise}return{getDetails:e}}a.$inject=["appSettings","$http","$q","endPoints"],angular.module("internetBanking.creditCard").service("creditCardDetailsService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=c.defer(),i={method:"GET",cache:!0,url:a.backEnd+d.CREDIT_CARD_GET_ASSESSORY+"/"+e};return b(i).then(f).catch(g),h.promise}return{get:e}}a.$inject=["appSettings","$http","$q","endPoints"],angular.module("internetBanking.creditCard").service("getAssessoryCardService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e){function f(a){i.resolve(a)}function g(a){i.reject(a)}var h=e&&e.prefixEndpoint||"";console.log("prefixEndpoint",h,b.SEND_TOKEN);var i=d.defer(),j={method:"POST",cache:!1,url:a.backEnd+h+b.SEND_TOKEN,data:e.data};return c(j).then(f).catch(g),i.promise}function f(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=d.defer(),i={method:"POST",url:a.backEnd+e.prefixEndpoint+b.RESEND_TOKEN,data:e.data};return c(i).then(f).catch(g),h.promise}function g(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=d.defer(),i={method:"POST",url:a.backEnd+e.prefixEndpoint+b.OPERATION_CONFIRM_TOKEN,data:e.data,headers:{"hst-token":e.token}};return c(i).then(f).catch(g),h.promise}return{send:e,resend:f,confirmOperation:g}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.creditCard").service("authenticationTokenService",a)}(),function(){"use strict";function a(a,b,c,d){function e(b){function e(a){g.resolve(a)}function f(a){g.reject(a)}var g=d.defer(),h={method:"POST",cache:!1,url:a.backEnd+b.endpoint,data:b.data};return c(h).then(e).catch(f),g.promise}return{confirm:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.creditCard").service("authenticationService",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(f,g,h){function i(a){k.resolve(a)}function j(a){k.reject(a)}var k=d.defer(),l={method:"GET",cache:e.siteCache&&e.siteCache.CREDIT_CARD_CACHE||!1,url:a.backEnd+b.CREDIT_CARD_GET_BAR_CODE_CARD+"/"+f+"/"+g+"/"+h};return c(l).then(i).catch(j),k.promise}function g(e,f){function g(a){i.resolve(a)}function h(a){i.reject(a)}var i=d.defer(),j={method:"POST",cache:!1,data:{nuCpfCnpj:e,codigoBarras:f},url:a.backEnd+b.CREDIT_CARD_GET_BAR_CODE_IMAGE};return c(j).then(g).catch(h),i.promise}return{get:f,barcodeImage:g}}a.$inject=["appSettings","endPoints","$http","$q","$rootScope"],angular.module("internetBanking.creditCard").service("getCodeBarbilletCreditCardService",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(f){function g(a){i.resolve(a)}function h(a){i.reject(a)}var i=d.defer(),j="/"+f,k={method:"GET",cache:e.siteCache&&e.siteCache.CREDIT_CARD_CACHE||!1,url:a.backEnd+b.CREDIT_CARD_INVOICE_LAST_MATURITIES+j};return c(k).then(g).catch(h),i.promise}return{get:f}}a.$inject=["appSettings","endPoints","$http","$q","$rootScope"],angular.module("internetBanking.creditCard").service("invoiceLastMaturitisService",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(f){function g(a){i.resolve(a)}function h(a){i.reject(a)}var i=d.defer(),j="/"+f.lastFourNumber+"/"+f.duedate+"/"+f.invoiceOpen,k={method:"GET",cache:e.siteCache&&e.siteCache.CREDIT_CARD_CACHE||!1,url:a.backEnd+b.CREDIT_CARD_INVOICE_INVOICE+j};return c(k).then(g).catch(h),i.promise}return{get:f}}a.$inject=["appSettings","endPoints","$http","$q","$rootScope"],angular.module("internetBanking.creditCard").service("invoiceDetailService",a)}(),function(){"use strict";function a(){function a(a){e.data=a}function b(a,b){e.data[a]=b}function c(){return e.data}function d(a){return e.data[a]}var e={data:{}};return{setALL:a,set:b,getALL:c,get:d}}angular.module("internetBanking.creditCard").service("invoiceDetailCreditCardCurrentService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=d.defer(),i="/"+e,j={method:"GET",url:a.backEnd+b.CREDIT_CARD_LIST_OPTIONS_CLOSING_INVOICE+i};return c(j).then(f).catch(g),h.promise}return{get:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.creditCard").service("listOptionsClosingInvoiceService",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(f,g,h){function i(a){k.resolve(a)}function j(a){k.reject(a)}var k=d.defer(),l="/"+f+"/"+g+"/"+h,m={method:"GET",cache:e.siteCache&&e.siteCache.CREDIT_CARD_CACHE||!1,url:a.backEnd+b.CREDIT_CARD_GET_BILLET_PDF+l,headers:{accept:"application/pdf"},responseType:"arraybuffer",transformResponse:function(a){var b,c=!!document.documentMode;return c?a:(a&&(b=new Blob([a],{type:"application/pdf"})),b)}};return c(m).then(i).catch(j),k.promise}return{get:f}}a.$inject=["appSettings","endPoints","$http","$q","$rootScope"],angular.module("internetBanking.creditCard").service("getPDFBilletCreditCardService",a)}(),function(){"use strict";function a(a){function b(){c()}function c(){p.invoices=[],p.invoicesDetails=[null,null,null],p.dateInitMoviments=["","",""],p.dateEndMoviments=["","",""],p.lastFourNumber=null,p.invoiceActive=null,p.name=null,p.tabActive=null,p.indiceInvoicesActive=null,p.hasAdditionalCard=null,p.listAdditionalCard=null}function d(a,b,c){null===b?p[a]=c:p[a][b]=c}function e(a,b){return void 0!==b?p[a][b]:p[a]}function f(a){return p}function g(a){return p.invoices.filter(function(b){return b.tab===a})[0]}function h(a){return p.invoices.filter(function(b){return moment(b.dueDate).format("DD/MM/YYYY")===moment(a).format("DD/MM/YYYY")})[0]}function i(a){d("dateInitMoviments",0,a.invoicePrevious.dateInitMoviments),d("dateEndMoviments",0,a.invoicePrevious.dateEndMoviments),d("dateInitMoviments",1,a.invoicePrevious.dateEndMoviments),d("invoicesDetails",0,a.invoicePrevious),a.hasOwnProperty("invoiceActive")&&d("invoicesDetails",1,a.invoiceActive)}function j(a){a.hasOwnProperty("invoiceClose")&&(d("dateEndMoviments",a.indexInvoiceOpen,a.invoiceOpen.dateEndMoviments),d("dateInitMoviments",a.indexInvoiceOpen,a.invoiceClose.dateEndMoviments)),d("dateEndMoviments",a.indexInvoiceOpen,a.invoiceOpen.dateEndMoviments),d("invoicesDetails",a.indexInvoiceOpen,a.invoiceOpen),a.hasOwnProperty("indexInvoiceClose")&&d("invoicesDetails",a.indexInvoiceClose,a.invoiceClose)}function k(a){d("dateInitMoviments",a.indexInvoiceActive,a.invoiceActive.dateInitMoviments),d("dateEndMoviments",a.indexInvoiceActive,a.invoiceActive.dateEndMoviments)}function l(){return p.invoices.length>0}function m(a){return 3===p.invoices.length?n({previous:0,current:1,next:2},a):2===p.invoices.length?n({current:0,next:1},a):n({current:0,next:0},a)}function n(a,b){return a[b]}function o(b){var c=p.invoices[b],d=a.formatToAPI(c.dueDate);return{lastFourNumber:p.lastFourNumber,duedate:d,invoiceOpen:p.invoices[b].invoiceOpen}}var p={invoices:[],dateInitMoviments:["","",""],dateEndMoviments:["","",""],invoicesDetails:["","",""],lastFourNumber:null,name:null,invoiceActive:null,hasAdditionalCard:null,listAdditionalCard:null,tabActive:null,indiceInvoicesActive:null};return{init:b,set:d,get:e,getALL:f,getInvoiceTab:g,getInvoiceDate:h,setDataInvoicePrevious:i,setDataInvoiceNext:j,setDataInvoiceCurrent:k,hasDataInvoiceCache:l,getParamsInvoice:o,getIndexInvoice:m}}a.$inject=["formatDateFactory"],angular.module("internetBanking.creditCard").service("invoiceDataCurrentService",a)}(),function(){"use strict";function a(a,b,c,d){function e(){function e(a){g.resolve(a)}function f(a){g.reject(a)}var g=d.defer(),h={method:"GET",url:a.backEnd+b.CREDIT_LAST_US_VALUE};return c(h).then(e).catch(f),g.promise}return{getLastValue:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.creditCard").service("getForeing",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){function f(a){h.resolve(a)}function g(a){h.resolve(a)}var h=d.defer();return c({method:"GET",cache:e.siteCache&&e.siteCache.POINTS_CREDIT_CARD_CACHE||!1,url:a.backEnd+b.CREDIT_CARD_NETPOINTS_BALANCE}).then(f).catch(g),h.promise}return{getBalanceNetpoints:f}}a.$inject=["appSettings","endPoints","$http","$q","$rootScope"],angular.module("internetBanking.creditCard").service("balanceNetpointsService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e){function f(a){h.resolve(a)}function g(a){h.resolve(a)}var h=d.defer();return c({method:"POST",data:e,url:a.backEnd+b.REGULARIZATION_GENERATE_PDF}).then(f).catch(g),h.promise}return{get:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.creditCard").service("generateAgreementService",a)}(),function(){"use strict";function a(a,b,c,d){function e(){function e(a){g.resolve(a)}function f(a){g.resolve(a)}var g=d.defer();return c({method:"GET",cache:!1,url:a.backEnd+b.REGULARIZATION_CONTRACTS}).then(e).catch(f),g.promise}return{get:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.creditCard").service("listContractService",a)}(),function(){"use strict";function a(a,b,c,d){function e(){function e(a){g.resolve(a)}function f(a){g.resolve(a)}var g=d.defer();return c({method:"GET",cache:!1,url:a.backEnd+b.REGULARIZATION_LIST_DUE_DATES}).then(e).catch(f),g.promise}return{get:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.creditCard").service("listDueDatesService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e){function f(a){h.resolve(a)}function g(a){h.resolve(a)}var h=d.defer();return c({method:"POST",data:e,url:a.backEnd+b.REGULARIZATION_OPTIONS}).then(f).catch(g),h.promise}return{get:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.creditCard").service("listProposalOptionsService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e){function f(a){h.resolve(a)}function g(a){h.resolve(a)}var h=d.defer();return c({method:"POST",data:e,url:a.backEnd+b.REGULARIZATION_PROPOSALS}).then(f).catch(g),h.promise}return{get:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.creditCard").service("proposalsService",a)}(),function(){"use strict";function a(a,b,c,d){function e(){return{requestNewCard:b.CREDIT_CARD_REQUEST_ADDITIONAL_CARD}}function f(e){function f(a){i.resolve(a)}function g(a){i.reject(a)}var h=a.backEnd+b.CREDIT_CARD_GET_EMBOSSED_NAME,i=d.defer();return c({method:"POST",cache:!1,url:h,data:e}).then(f).catch(g),i.promise}return{tokenOperation:e,getEmbossedName:f}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.creditCard").service("additionalCardService",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){return b.CC_ACCOUNT_PAYMENT}function g(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=d.defer(),i={method:"POST",cache:!1,url:a.backEnd+b.CC_SIMULATE_PAYMENT,data:e};return c(i).then(f).catch(g),h.promise}function h(f){function g(a){j.resolve(a.data)}function h(a){j.reject(a)}var i=a.backEnd+b.CC_RULES_PAYMENT,j=d.defer(),k={method:"GET",cache:e.siteCache&&e.siteCache.CREDIT_CARD_CACHE||!1,url:i.concat("/",f)};return c(k).then(g).catch(h),j.promise}function i(){function e(a){g.resolve(a.data)}function f(a){g.reject(a)}var g=d.defer(),h={method:"GET",cache:!0,url:a.backEnd+b.CC_SANTANDER_ENVIRONMENT};return c(h).then(e).catch(f),g.promise}return{simulatePayment:g,accountPaymentPrefix:f,rulesPayment:h,santanderEnvironment:i}}a.$inject=["appSettings","endPoints","$http","$q","$rootScope"],angular.module("internetBanking.creditCard").service("accountPaymentService",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=d.defer(),i={method:"POST",url:a.backEnd+b.CC_CHECK_PAYMENTS,data:e,cache:!1};return c(i).then(f).catch(g),h.promise}function g(f){function g(a){j.resolve(a)}function h(a){j.reject(a)}var i=a.backEnd+b.CC_CHECK_PAYMENT_VOUCHER,j=d.defer(),k={method:"GET",cache:e.siteCache&&e.siteCache.CREDIT_CARD_CACHE||!1,url:i+"/"+f};return c(k).then(g).catch(h),j.promise}return{listPaymentsVoucher:f,checkPaymentVoucher:g}}a.$inject=["appSettings","endPoints","$http","$q","$rootScope"],angular.module("internetBanking.creditCard").service("checkPaymentVoucherService",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){return{requestTravelNotification:b.CREDIT_CARD_REQUEST_TRAVEL_NOTIFICATION}}function g(f){function g(a){j.resolve(a)}function h(a){j.reject(a)}var i=a.backEnd+b.CREDIT_CARD_GET_CONTINENTS,j=d.defer(),k={method:"GET",cache:e.siteCache&&e.siteCache.CREDIT_CARD_CACHE||!1,url:i};return c(k).then(g).catch(h),j.promise}return{tokenOperation:f,getContinents:g}}a.$inject=["appSettings","endPoints","$http","$q","$rootScope"],angular.module("internetBanking.creditCard").service("travelNotificationService",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(f){function g(a){i.resolve(a)}function h(a){i.reject(a)}var i=d.defer(),j={method:"GET",url:a.backEnd+b.CREDIT_CARD__SOLICITATION__GET_INVOICE_RECEIVE_METHOD+"/"+f,cache:e.siteCache&&e.siteCache.CREDIT_CARD_CACHE||!1};return c(j).then(g).catch(h),i.promise}return{getMethod:f}}a.$inject=["appSettings","endPoints","$http","$q","$rootScope"],angular.module("internetBanking.creditCard").service("invoiceReceiveMethodService",a)}(),function(){"use strict";function a(a,b,c,d){function e(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=d.defer(),i={method:"POST",url:a.backEnd+b.CREDIT_CARD__VALIDATE_CARD_SECURITY_DATA,data:e};return c(i).then(f).catch(g),h.promise}return{validate:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.creditCard").service("validateCardSecurityDataService",a)}(),function(){"use strict";function a(a,b,c,d){function e(){return{changeCardPassword:b.CC_CHANGE_CARD_PASSWORD}}function f(e){function f(a){i.resolve(a)}function g(a){i.reject(a)}var h=a.backEnd+b.CC_VALIDATE_PASSWORD,i=d.defer();return c({method:"POST",url:h,data:e}).then(f).catch(g),i.promise}return{validateCardPassword:f,tokenOperation:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.creditCard").service("changeCardPasswordService",a)}(),function(){"use strict";function a(a,b,c,d){function e(){return{changeCardEmail:b.CC_CHANGE_CARD_EMAIL}}return{getTokenOperation:e}}a.$inject=["appSettings","endPoints","$http","$q"],angular.module("internetBanking.creditCard").service("emailCardService",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(f,g){function h(a){k.resolve(a)}function i(a){k.reject(a)}var j=a.backEnd+d.CREDIT_CARD_DESERVE_PROGRAM_EXTRACT_POINTS,k=c.defer(),l={method:"GET",cache:e.siteCache&&e.siteCache.POINTS_CREDIT_CARD_CACHE||!1,url:[j,f,g].join("/")};return b(l).then(h).catch(i),k.promise}return{get:f}}a.$inject=["appSettings","$http","$q","endPoints","$rootScope"],angular.module("internetBanking.creditCard").service("extractPointsService",a)}(),function(){function a(a,b,c,d,e){function f(){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=c.defer(),i={method:"GET",cache:e.siteCache&&e.siteCache.POINTS_CREDIT_CARD_CACHE||!1,url:a.backEnd+d.CREDIT_CARD_DESERVE_CATALOGO_PROGRAMA_PONTOS};return b(i).then(f).catch(g),h.promise}return{getCatalogProgramPoints:f}}a.$inject=["appSettings","$http","$q","endPoints","$rootScope"],angular.module("internetBanking.creditCard").service("rescuePointsService",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(f){function g(a){j.resolve(a)}function h(a){j.reject(a)}var i=a.backEnd+d.DISCOUNT_ANNUITY_GET_VALUE,j=c.defer(),k={method:"GET",cache:e.siteCache&&e.siteCache.CREDIT_CARD_CACHE||!1,url:i+"/"+f};return b(k).then(g).catch(h),j.promise}return{getValueDiscount:f}}a.$inject=["appSettings","$http","$q","endPoints","$rootScope"],angular.module("internetBanking.creditCard").service("discountAnnuityService",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=c.defer(),i={method:"GET",cache:e.siteCache&&e.siteCache.POINTS_CREDIT_CARD_CACHE||!1,url:a.backEnd+d.CREDIT_CARD_DESERVE_PROGRAM_SEE_POINTS_EXPIRING};return b(i).then(f).catch(g),h.promise}return{getPointsExpiring:f}}a.$inject=["appSettings","$http","$q","endPoints","$rootScope"],angular.module("internetBanking.creditCard").service("seePointsExpiringService",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(f){function g(a){j.resolve(a)}function h(a){j.reject(a)}var i=a.backEnd+d.CREDIT_CARD_INVOICE_CHECK_PERMISSION,j=c.defer(),k={method:"GET",cache:e.siteCache&&e.siteCache.CREDIT_CARD_CACHE||!1,url:i+"/"+f};return b(k).then(g).catch(h),j.promise}function g(f){function g(a){j.resolve(a)}function h(a){j.reject(a)}var i=a.backEnd+d.CREDIT_CARD_INVOICE_SIMULATE,j=c.defer(),k={method:"GET",cache:e.siteCache&&e.siteCache.CREDIT_CARD_CACHE||!1,url:i};return k.url=k.url.replace("{ultimosQuatroDigitosCartao}",f.ultimosQuatroDigitosCartao).replace("{valorEntrada}",f.valorEntrada).replace("{dataEntrada}",f.dataEntrada),b(k).then(g).catch(h),j.promise}function h(e){function f(a){h.resolve(a)}function g(a){h.reject(a)}var h=c.defer(),i={method:"POST",cache:!1,url:a.backEnd+d.CREDIT_CARD_INVOICE_PARCEL,data:e};return b(i).then(f).catch(g),h.promise}return{getVerifyPermission:f,simulateInstallmentInvoice:g,getInvoiceParcel:h}}a.$inject=["appSettings","$http","$q","endPoints","$rootScope"],angular.module("internetBanking.creditCard").service("invoiceInstallmentService",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(f){function g(a){j.resolve(a)}function h(a){j.reject(a)}var i=a.backEnd+d.TAXES_LIMITS_LAST_DAY_PAY,j=c.defer(),k={method:"GET",cache:e.siteCache&&e.siteCache.CREDIT_CARD_CACHE||!1,url:i+"/"+f};return b(k).then(g).catch(h),j.promise}function g(f){function g(a){j.resolve(a)}function h(a){j.reject(a)}var i=a.backEnd+d.TAXES_LIMITS_GET_TAXES,j=c.defer(),k={method:"GET",cache:e.siteCache&&e.siteCache.CREDIT_CARD_CACHE||!1,url:i+"/"+f}
;return b(k).then(g).catch(h),j.promise}function h(f){function g(a){j.resolve(a)}function h(a){j.reject(a)}var i=a.backEnd+d.TAXES_LIMITS_GET_LIMITS,j=c.defer(),k={method:"GET",cache:e.siteCache&&e.siteCache.CREDIT_CARD_CACHE||!1,url:i+"/"+f};return b(k).then(g).catch(h),j.promise}return{getLastDatePay:f,getTaxes:g,getLimits:h}}a.$inject=["appSettings","$http","$q","endPoints","$rootScope"],angular.module("internetBanking.creditCard").service("checkLimitAndRatesService",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(f){function g(a){j.resolve(a)}function h(a){j.reject(a)}var i=a.backEnd+b.TAXES_LIMITS_FARE_EXTRACT,j=d.defer(),k={method:"GET",cache:e.siteCache&&e.siteCache.CREDIT_CARD_CACHE||!1,url:i+"/"+f};return c(k).then(g).catch(h),j.promise}return{getExtract:f}}a.$inject=["appSettings","endPoints","$http","$q","$rootScope"],angular.module("internetBanking.creditCard").service("fareExtractService",a)}();